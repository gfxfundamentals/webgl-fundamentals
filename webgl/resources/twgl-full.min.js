/*!
 * @license twgl.js 3.7.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.twgl=r():e.twgl=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){var n,o;n=[t(1),t(10),t(11),t(12)],o=function(e,r,t,n){"use strict";return e.m4=r,e.v3=t,e.primitives=n,e}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(2),t(5),t(7),t(6),t(8),t(3),t(9),t(4)],o=function(e,r,t,n,o,a,i,u){"use strict";function f(r){u.copyExistingProperties(r,v),e.setDefaults_(r),o.setDefaults_(r)}function s(e,r){var t=e.getExtension(r);if(t){var n=h.exec(r)[1],o="_"+n;for(var a in t){var i=t[a],u="function"==typeof i,f=u?n:o,s=a;a.endsWith(f)&&(s=a.substring(0,a.length-f.length)),void 0!==e[s]?u||e[s]===i||console.warn(s,e[s],i,a):u?e[s]=function(e){return function(){return e.apply(t,arguments)}}(i):e[s]=i}}return t}function c(e){for(var r=0;r<A.length;++r)s(e,A[r])}function l(e,r){for(var t=["webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){v.addExtensionsToContext&&c(n);break}return n}function m(e,r){var t=l(e,r);return t}function y(e,r){for(var t=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){v.addExtensionsToContext&&c(n);break}return n}function p(e,r){var t=y(e,r);return t}function d(e,r){r=r||1,r=Math.max(0,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;return(e.width!==t||e.height!==n)&&(e.width=t,e.height=n,!0)}function E(e){return"_"!==e[e.length-1]}function b(e,r){return Object.keys(e).filter(E).forEach(function(t){r[t]=e[t]}),r}var v={addExtensionsToContext:!0},h=/^(.*?)_/,A=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","WEBGL_draw_buffers"],T={addExtensionsToContext:c,getContext:p,getWebGLContext:m,isWebGL1:u.isWebGL1,isWebGL2:u.isWebGL2,resizeCanvasToDisplaySize:d,setDefaults:f},x={attributes:e,draw:r,framebuffers:t,programs:n,textures:o,typedArrays:a,vertexArrays:i};return Object.keys(x).forEach(function(e){var r=x[e];b(r,T),T[e]=b(r,{})}),T}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(3),t(4)],o=function(e,r){"use strict";function t(e){T.attribPrefix=e}function n(e){r.copyExistingProperties(e,T)}function o(e,r,t,n,o){e.bindBuffer(r,t),e.bufferData(r,n,o||e.STATIC_DRAW)}function a(e,r,t,n){if(r instanceof WebGLBuffer)return r;t=t||e.ARRAY_BUFFER;var a=e.createBuffer();return o(e,t,a,r,n),a}function i(e){return"indices"===e}function u(e){return e instanceof Int8Array||e instanceof Uint8Array}function f(e){return e===Int8Array||e===Uint8Array}function s(e){return e.length?e:e.data}function c(e,r){var t;if(t=x.test(e)?2:R.test(e)?4:3,r%t>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+t+" but "+r+" values is not evenly divisible by "+t+". You should specify it.";return t}function l(e,r){return e.numComponents||e.size||c(r,s(e).length)}function m(r,t){if(e.isArrayBuffer(r))return r;if(e.isArrayBuffer(r.data))return r.data;Array.isArray(r)&&(r={data:r});var n=r.type;return n||(n=i(t)?Uint16Array:Float32Array),new n(r.data)}function y(r,t){var n={};return Object.keys(t).forEach(function(o){if(!i(o)){var s,y,p,d,E,b=t[o],v=b.attrib||b.name||b.attribName||T.attribPrefix+o;if("number"==typeof b||"number"==typeof b.data){E=b.data||b;var h=b.type||Float32Array,A=E*h.BYTES_PER_ELEMENT;y=e.getGLTypeForTypedArrayType(h),p=void 0!==b.normalize?b.normalize:f(h),d=b.numComponents||b.size||c(o,E),s=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,A,b.drawType||r.STATIC_DRAW)}else{var x=m(b,o);s=a(r,x,void 0,b.drawType),y=e.getGLTypeForTypedArray(x),p=void 0!==b.normalize?b.normalize:u(x),d=l(b,o),E=x.length}n[v]={buffer:s,numComponents:d,type:y,normalize:p,stride:b.stride||0,offset:b.offset||0,divisor:void 0===b.divisor?void 0:b.divisor,drawType:b.drawType}}}),r.bindBuffer(r.ARRAY_BUFFER,null),n}function p(e,r,t,n){t=m(t),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,t)):o(e,e.ARRAY_BUFFER,r.buffer,t,r.drawType)}function d(e,r){return r===e.BYTE?1:r===e.UNSIGNED_BYTE?1:r===e.SHORT?2:r===e.UNSIGNED_SHORT?2:r===e.INT?4:r===e.UNSIGNED_INT?4:r===e.FLOAT?4:0}function E(e){for(var r,t=0;t<F.length&&(r=F[t],!(r in e));++t);t===F.length&&(r=Object.keys(e)[0]);var n=e[r],o=s(n).length,a=l(n,r),i=o/a;if(o%a>0)throw"numComponents "+a+" not correct for length "+o;return i}function b(e,r){for(var t,n=0;n<F.length&&(t=F[n],!(t in r))&&(t=T.attribPrefix+t,!(t in r));++n);n===F.length&&(t=Object.keys(r)[0]);var o=r[t];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);var a=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var i=d(e,o.type),u=a/i,f=o.numComponents||o.size,s=u/f;if(s%1!==0)throw"numComponents "+f+" not correct for length "+length;return s}function v(r,t){var n={attribs:y(r,t)},o=t.indices;return o?(o=m(o,"indices"),n.indices=a(r,o,r.ELEMENT_ARRAY_BUFFER),n.numElements=o.length,n.elementType=e.getGLTypeForTypedArray(o)):n.numElements=b(r,n.attribs),n}function h(e,r,t){var n="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,o=m(r,t);return a(e,o,n)}function A(r,t){var n={};return Object.keys(t).forEach(function(e){n[e]=h(r,t[e],e)}),t.indices?(n.numElements=t.indices.length,n.elementType=e.getGLTypeForTypedArray(m(t.indices),"indices")):n.numElements=E(t),n}var T={attribPrefix:""},x=/coord|texture/i,R=/color|colour/i,F=["position","positions","a_position"];return{createAttribsFromArrays:y,createBuffersFromArrays:A,createBufferFromArray:h,createBufferFromTypedArray:a,createBufferInfoFromArrays:v,setAttribInfoBufferFromArray:p,setAttributePrefix:t,setDefaults_:n,getNumComponents_:l,getArray_:s}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[],o=function(){"use strict";function e(e){if(e instanceof Int8Array)return o;if(e instanceof Uint8Array)return a;if(e instanceof Uint8ClampedArray)return a;if(e instanceof Int16Array)return i;if(e instanceof Uint16Array)return u;if(e instanceof Int32Array)return f;if(e instanceof Uint32Array)return s;if(e instanceof Float32Array)return c;throw"unsupported typed array type"}function r(e){if(e===Int8Array)return o;if(e===Uint8Array)return a;if(e===Uint8ClampedArray)return a;if(e===Int16Array)return i;if(e===Uint16Array)return u;if(e===Int32Array)return f;if(e===Uint32Array)return s;if(e===Float32Array)return c;throw"unsupported typed array type"}function t(e){var r=A[e];if(!r)throw"unknown gl type";return r}function n(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}var o=5120,a=5121,i=5122,u=5123,f=5124,s=5125,c=5126,l=32819,m=32820,y=33635,p=5131,d=33640,E=35899,b=35902,v=36269,h=34042,A={},T=A;return T[o]=Int8Array,T[a]=Uint8Array,T[i]=Int16Array,T[u]=Uint16Array,T[f]=Int32Array,T[s]=Uint32Array,T[c]=Float32Array,T[l]=Uint16Array,T[m]=Uint16Array,T[y]=Uint16Array,T[p]=Uint16Array,T[d]=Uint32Array,T[E]=Uint32Array,T[b]=Uint32Array,T[v]=Uint32Array,T[h]=Uint32Array,{getGLTypeForTypedArray:e,getGLTypeForTypedArrayType:r,getTypedArrayTypeForGLType:t,isArrayBuffer:n}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[],o=function(){"use strict";function e(e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function r(e,r,t){e.forEach(function(e){var n=r[e];void 0!==n&&(t[e]=n)})}function t(e,r){Object.keys(r).forEach(function(t){r.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(r[t]=e[t])})}function n(e){return!!e.texStorage2D}function o(e){return!e.texStorage2D}var a=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},i=window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){};return{copyExistingProperties:t,copyNamedProperties:r,shallowCopy:e,isWebGL1:o,isWebGL2:n,error:a,warn:i}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(6)],o=function(e){"use strict";function r(e,r,t,n,o,a){t=void 0===t?e.TRIANGLES:t;var i=r.indices,u=r.elementType,f=void 0===n?r.numElements:n;o=void 0===o?0:o,u||i?void 0!==a?e.drawElementsInstanced(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,o,a):e.drawElements(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,o):void 0!==a?e.drawArraysInstanced(t,o,f,a):e.drawArrays(t,o,f)}function t(t,n){var o=null,a=null;n.forEach(function(n){if(n.active!==!1){var i=n.programInfo,u=n.vertexArrayInfo||n.bufferInfo,f=!1,s=void 0===n.type?t.TRIANGLES:n.type;i!==o&&(o=i,t.useProgram(i.program),f=!0),(f||u!==a)&&(a&&a.vertexArrayObject&&!u.vertexArrayObject&&t.bindVertexArray(null),a=u,e.setBuffersAndAttributes(t,i,u)),e.setUniforms(i,n.uniforms),r(t,u,s,n.count,n.offset,n.instanceCount)}}),a.vertexArrayObject&&t.bindVertexArray(null)}return{drawBufferInfo:r,drawObjectList:t}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(4)],o=function(e){"use strict";function r(e,r){return qe[r].bindPoint}function t(e,r){return function(t){e.uniform1f(r,t)}}function n(e,r){return function(t){e.uniform1fv(r,t)}}function o(e,r){return function(t){e.uniform2fv(r,t)}}function a(e,r){return function(t){e.uniform3fv(r,t)}}function i(e,r){return function(t){e.uniform4fv(r,t)}}function u(e,r){return function(t){e.uniform1i(r,t)}}function f(e,r){return function(t){e.uniform1iv(r,t)}}function s(e,r){return function(t){e.uniform2iv(r,t)}}function c(e,r){return function(t){e.uniform3iv(r,t)}}function l(e,r){return function(t){e.uniform4iv(r,t)}}function m(e,r){return function(t){e.uniform1ui(r,t)}}function y(e,r){return function(t){e.uniform1uiv(r,t)}}function p(e,r){return function(t){e.uniform2uiv(r,t)}}function d(e,r){return function(t){e.uniform3uiv(r,t)}}function E(e,r){return function(t){e.uniform4uiv(r,t)}}function b(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}function v(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}function h(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}function A(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}function T(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}function x(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}function R(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}function F(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}function _(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}function g(t,n,o,a){var i=r(t,n);return e.isWebGL2(t)?function(e){var r=void 0,n=void 0;e instanceof WebGLTexture?(r=e,n=null):(r=e.texture,n=e.sampler),t.uniform1i(a,o),t.activeTexture(t.TEXTURE0+o),t.bindTexture(i,r),t.bindSampler(o,n)}:function(e){t.uniform1i(a,o),t.activeTexture(t.TEXTURE0+o),t.bindTexture(i,e)}}function P(t,n,o,a,i){for(var u=r(t,n),f=new Int32Array(i),s=0;s<i;++s)f[s]=o+s;return e.isWebGL2(t)?function(e){t.uniform1iv(a,f),e.forEach(function(e,r){t.activeTexture(t.TEXTURE0+f[r]);var n=void 0,a=void 0;e instanceof WebGLTexture?(n=e,a=null):(n=e.texture,a=e.sampler),t.bindSampler(o,a),t.bindTexture(u,n)})}:function(e){t.uniform1iv(a,f),e.forEach(function(e,r){t.activeTexture(t.TEXTURE0+f[r]),t.bindTexture(u,e)})}}function U(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||e.FLOAT,t.normalize||!1,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor)}}function w(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||e.INT,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor)}}function B(e,r,t){var n=t.size,o=t.count;return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);for(var a=t.size||t.numComponents||n,i=a/o,u=t.type||e.FLOAT,f=qe[u],s=f.size*a,c=t.normalize||!1,l=t.offset||0,m=s/o,y=0;y<o;++y)e.enableVertexAttribArray(r+y),e.vertexAttribPointer(r+y,i,u,c,s,l+m*y),void 0!==t.divisor&&e.vertexAttribDivisor(r+y,t.divisor)}}function I(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}function C(e,r,t,n){var o=n||ne,a=e.createShader(t),i=0;$e.test(r)&&(i=1,r=r.replace($e,"")),e.shaderSource(a,r),e.compileShader(a);var u=e.getShaderParameter(a,e.COMPILE_STATUS);if(!u){var f=e.getShaderInfoLog(a);return o(I(r,i)+"\n*** Error compiling shader: "+f),e.deleteShader(a),null}return a}function S(e,r,t){if("function"==typeof r&&(t=r,r=void 0),"function"==typeof e)t=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var n=e;t=n.errorCallback,e=n.attribLocations;var o=n.transformFeedbackVaryings}var a={errorCallback:t||ne,transformFeedbackVaryings:o};if(e){var i={};Array.isArray(e)?e.forEach(function(e,t){i[e]=r?r[t]:t}):i=e,a.attribLocations=i}return a}function M(e){return e.indexOf("frag")>=0?Qe.FRAGMENT_SHADER:e.indexOf("vert")>=0?Qe.VERTEX_SHADER:void 0}function L(e,r){r.forEach(function(r){e.deleteShader(r)})}function O(e,r,t,n,o){for(var a=S(t,n,o),i=[],u=[],f=0;f<r.length;++f){var s=r[f];if("string"==typeof s){var c=document.getElementById(s),l=c?c.text:s,m=e[Je[f]];c&&c.type&&(m=M(c.type)||m),s=C(e,l,m,a.errorCallback),u.push(s)}s instanceof WebGLShader&&i.push(s)}if(i.length!==r.length)return programOptions.errorCallback("not enough shaders for program"),L(e,u),null;var y=e.createProgram();i.forEach(function(r){e.attachShader(y,r)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(r){e.bindAttribLocation(y,a.attribLocations[r],r)});var p=a.transformFeedbackVaryings;p&&(p.attribs&&(p=p.attribs),Array.isArray(p)||(p=Object.keys(p)),e.transformFeedbackVaryings(y,p,a.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(y);var d=e.getProgramParameter(y,e.LINK_STATUS);if(!d){var E=e.getProgramInfoLog(y);return a.errorCallback("Error in program linking:"+E),e.deleteProgram(y),L(e,u),null}return y}function D(e,r,t,n){var o="",a=document.getElementById(r);if(!a)throw"*** Error: unknown script element"+r;o=a.text;var i=t||M(a.type);if(!i)throw"*** Error: unknown shader type";return C(e,o,i,n)}function N(e,r,t,n,o){for(var a=S(t,n,o),i=[],u=0;u<r.length;++u){var f=D(e,r[u],e[Je[u]],a.errorCallback);if(!f)return null;i.push(f)}return O(e,i,a)}function z(e,r,t,n,o){for(var a=S(t,n,o),i=[],u=0;u<r.length;++u){var f=C(e,r[u],e[Je[u]],a.errorCallback);if(!f)return null;i.push(f)}return O(e,i,a)}function G(e,r){function t(r,t){var o=e.getUniformLocation(r,t.name),a=t.size>1&&"[0]"===t.name.substr(-3),i=t.type,u=qe[i];if(!u)throw"unknown type: 0x"+i.toString(16);var f;if(u.bindPoint){var s=n;n+=t.size,f=a?u.arraySetter(e,i,s,o,t.size):u.setter(e,i,s,o,t.size)}else f=u.arraySetter&&a?u.arraySetter(e,o):u.setter(e,o);return f.location=o,f}for(var n=0,o={},a=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),i=0;i<a;++i){var u=e.getActiveUniform(r,i);if(!u)break;var f=u.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var s=t(r,u);o[f]=s}return o}function X(e,r){for(var t={},n=e.getProgramParameter(r,e.TRANSFORM_FEEDBACK_VARYINGS),o=0;o<n;++o){var a=e.getTransformFeedbackVarying(r,o);t[a.name]={index:o,type:a.type,size:a.size}}return t}function k(e,r,t){r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs);for(var n in t){var o=r[n];if(o){var a=t[n];a.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer,a.offset,a.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer)}}}function V(e,r,t){r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs);for(var n in t){var o=r[n];o&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,null)}}function Y(e,r,t){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(r.program),k(e,r,t),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),V(e,r,t),n}function W(e,r){for(var t=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=[],o=[],a=0;a<t;++a){o.push(a),n.push({});var i=e.getActiveUniform(r,a);if(!i)break;n[a].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var a=t[0],i=t[1];e.getActiveUniforms(r,o,e[a]).forEach(function(e,r){n[r][i]=e})});var u={},f=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS);for(a=0;a<f;++a){var s=e.getActiveUniformBlockName(r,a),c={index:a,usedByVertexShader:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(r,a,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,u[s]=c}return{blockSpecs:u,uniformData:n}}function j(e,r,t,n){var o=t.blockSpecs,a=t.uniformData,i=o[n];if(!i)return oe("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(i.size),f=e.createBuffer(),s=i.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(r,i.index,s);var c=n+".";er.test(c)&&(c=c.replace(er,"."));var l={};return i.uniformIndices.forEach(function(e){var r=a[e],t=qe[r.type],n=t.Type,o=r.size*t.size,i=r.name;i.substr(0,c.length)===c&&(i=i.substr(c.length)),l[i]=new n(u,r.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:f,uniforms:l}}function K(e,r,t){return j(e,r.program,r.uniformBlockSpec,t)}function H(e,r,t){var n=r.uniformBlockSpec||r,o=n.blockSpecs[t.name];if(o){var a=o.index;return e.bindBufferRange(e.UNIFORM_BUFFER,a,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function q(e,r,t){H(e,r,t)&&e.bufferData(e.UNIFORM_BUFFER,t.array,e.DYNAMIC_DRAW)}function Z(e,r){var t=e.uniforms;for(var n in r){var o=t[n];if(o){var a=r[n];a.length?o.set(a):o[0]=a}}}function Q(e,r){for(var t=e.uniformSetters||e,n=arguments.length,o=1;o<n;++o){var a=arguments[o];if(Array.isArray(a))for(var i=a.length,u=0;u<i;++u)Q(t,a[u]);else for(var f in a){var s=t[f];s&&s(a[f])}}}function $(e,r){for(var t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),o=0;o<n;++o){var a=e.getActiveAttrib(r,o);if(!a)break;var i=e.getAttribLocation(r,a.name),u=Ze[a.type],f=u.setter(e,i,u);f.location=i,t[a.name]=f}return t}function J(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function ee(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(J(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indices))}function re(r,t){var n=G(r,t),o=$(r,t),a={program:t,uniformSetters:n,attribSetters:o};return e.isWebGL2(r)&&(a.uniformBlockSpec=W(r,t),a.transformFeedbackInfo=X(r,t)),a}function te(e,r,t,n,o){var a=S(t,n,o),i=!0;if(r=r.map(function(e){if(e.indexOf("\n")<0){var r=document.getElementById(e);r?e=r.text:(a.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;var u=z(e,r,a);return u?re(e,u):null}var ne=e.error,oe=e.warn,ae=5126,ie=35664,ue=35665,fe=35666,se=5124,ce=35667,le=35668,me=35669,ye=35670,pe=35671,de=35672,Ee=35673,be=35674,ve=35675,he=35676,Ae=35678,Te=35680,xe=35679,Re=35682,Fe=35685,_e=35686,ge=35687,Pe=35688,Ue=35689,we=35690,Be=36289,Ie=36292,Ce=36293,Se=5125,Me=36294,Le=36295,Oe=36296,De=36298,Ne=36299,ze=36300,Ge=36303,Xe=36306,ke=36307,Ve=36308,Ye=36311,We=3553,je=34067,Ke=32879,He=35866,qe={};qe[ae]={Type:Float32Array,size:4,setter:t,arraySetter:n},qe[ie]={Type:Float32Array,size:8,setter:o},qe[ue]={Type:Float32Array,size:12,setter:a},qe[fe]={Type:Float32Array,size:16,setter:i},qe[se]={Type:Int32Array,size:4,setter:u,arraySetter:f},qe[ce]={Type:Int32Array,size:8,setter:s},qe[le]={Type:Int32Array,size:12,setter:c},qe[me]={Type:Int32Array,size:16,setter:l},qe[Se]={Type:Uint32Array,size:4,setter:m,arraySetter:y},qe[Me]={Type:Uint32Array,size:8,setter:p},qe[Le]={Type:Uint32Array,size:12,setter:d},qe[Oe]={Type:Uint32Array,size:16,setter:E},qe[ye]={Type:Uint32Array,size:4,setter:u,arraySetter:f},qe[pe]={Type:Uint32Array,size:8,setter:s},qe[de]={Type:Uint32Array,size:12,setter:c},qe[Ee]={Type:Uint32Array,size:16,setter:l},qe[be]={Type:Float32Array,size:16,setter:b},qe[ve]={Type:Float32Array,size:36,setter:v},qe[he]={Type:Float32Array,size:64,setter:h},qe[Fe]={Type:Float32Array,size:24,setter:A},qe[_e]={Type:Float32Array,size:32,setter:x},qe[ge]={Type:Float32Array,size:24,setter:T},qe[Pe]={Type:Float32Array,size:48,setter:F},qe[Ue]={Type:Float32Array,size:32,setter:R},qe[we]={Type:Float32Array,size:48,setter:_},qe[Ae]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:We},qe[Te]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:je},qe[xe]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:Ke},qe[Re]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:We},qe[Be]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:He},qe[Ie]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:He},qe[Ce]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:je},qe[De]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:We},qe[Ne]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:Ke},qe[ze]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:je},qe[Ge]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:He},qe[Xe]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:We},qe[ke]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:Ke},qe[Ve]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:je},qe[Ye]={Type:null,size:0,setter:g,arraySetter:P,bindPoint:He};var Ze={};Ze[ae]={size:4,setter:U},Ze[ie]={size:8,setter:U},Ze[ue]={size:12,setter:U},Ze[fe]={size:16,setter:U},Ze[se]={size:4,setter:w},Ze[ce]={size:8,setter:w},Ze[le]={size:12,setter:w},Ze[me]={size:16,setter:w},Ze[Se]={size:4,setter:w},Ze[Me]={size:8,setter:w},Ze[Le]={size:12,setter:w},Ze[Oe]={size:16,setter:w},Ze[ye]={size:4,setter:w},Ze[pe]={size:8,setter:w},Ze[de]={size:12,setter:w},Ze[Ee]={size:16,setter:w},Ze[be]={size:4,setter:B,count:2},Ze[ve]={size:9,setter:B,count:3},Ze[he]={size:16,setter:B,count:4};var Qe=void 0,$e=/^[ \t]*\n/,Je=["VERTEX_SHADER","FRAGMENT_SHADER"],er=/\[\d+\]\.$/;return{createAttributeSetters:$,createProgram:O,createProgramFromScripts:N,createProgramFromSources:z,createProgramInfo:te,createProgramInfoFromProgram:re,createUniformSetters:G,createUniformBlockSpecFromProgram:W,createUniformBlockInfoFromProgram:j,createUniformBlockInfo:K,createTransformFeedback:Y,createTransformFeedbackInfo:X,bindTransformFeedbackInfo:k,setAttributes:J,setBuffersAndAttributes:ee,setUniforms:Q,setUniformBlock:q,setBlockUniforms:Z,bindUniformBlock:H}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(8),t(4)],o=function(e,r){"use strict";function t(e){return F[e]}function n(e){return _[e]}function o(o,a,i,u){var f=o.FRAMEBUFFER,s=o.createFramebuffer();o.bindFramebuffer(f,s),i=i||o.drawingBufferWidth,u=u||o.drawingBufferHeight,a=a||R;var c=0,l={framebuffer:s,attachments:[],width:i,height:u};return a.forEach(function(a){var s=a.attachment,m=a.format,y=t(m);if(y||(y=b+c++),!s)if(n(m))s=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,s),o.renderbufferStorage(o.RENDERBUFFER,m,i,u);else{var p=r.shallowCopy(a);p.width=i,p.height=u,void 0===p.auto&&(p.auto=!1,p.min=p.min||p.minMag||o.LINEAR,p.mag=p.mag||p.minMag||o.LINEAR,p.wrapS=p.wrapS||p.wrap||o.CLAMP_TO_EDGE,p.wrapT=p.wrapT||p.wrap||o.CLAMP_TO_EDGE),s=e.createTexture(o,p)}if(s instanceof WebGLRenderbuffer)o.framebufferRenderbuffer(f,y,o.RENDERBUFFER,s);else{if(!(s instanceof WebGLTexture))throw"unknown attachment type";o.framebufferTexture2D(f,y,a.texTarget||o.TEXTURE_2D,s,a.level||0)}l.attachments.push(s)}),l}function a(r,t,n,o,a){o=o||r.drawingBufferWidth,a=a||r.drawingBufferHeight,t.width=o,t.height=a,n=n||R,n.forEach(function(n,i){var u=t.attachments[i],f=n.format;if(u instanceof WebGLRenderbuffer)r.bindRenderbuffer(r.RENDERBUFFER,u),r.renderbufferStorage(r.RENDERBUFFER,f,o,a);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";e.resizeTexture(r,u,n,o,a)}})}function i(e,r,t){t=t||e.FRAMEBUFFER,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var u=5121,f=6402,s=6408,c=32854,l=32855,m=36194,y=33189,p=6401,d=36168,E=34041,b=36064,v=36096,h=36128,A=33306,T=33071,x=9729,R=[{format:s,type:u,min:x,wrap:T},{format:E}],F={};F[E]=A,F[p]=h,F[d]=h,F[f]=v,F[y]=v;var _={};return _[c]=!0,_[l]=!0,_[m]=!0,_[E]=!0,_[y]=!0,_[p]=!0,_[d]=!0,{bindFramebufferInfo:i,createFramebufferInfo:o,resizeFramebufferInfo:a}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(3),t(4)],o=function(e,r){"use strict";function t(e,r){var t=vr[e];if(!t)throw"unknown internal format";var n=t.bytesPerElementMap[r];if(void 0===n)throw"unknown internal format";return n}function n(e){var r=vr[e];if(!r)throw"unknown internal format";return{format:r.e,type:Array.isArray(r.type)?r.type[0]:r.type}}function o(e){return 0===(e&e-1)}function a(e,t,n,a){if(!r.isWebGL2(e))return o(t)&&o(n);var i=vr[a];if(!i)throw"unknown internal format";return i.r&&i.t}function i(e){var r=vr[e];if(!r)throw"unknown internal format";return r.t}function u(e){var r=Er[e];if(!r)throw"unknown format: "+e;return r.n}function f(r,t,n){return N(t)?e.getGLTypeForTypedArray(t):n||r.UNSIGNED_BYTE}function s(e,r,t,n,o){if(o%1!==0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=o/n,t%1))throw"can't guess dimensions"}else if(n=o/t,n%1)throw"can't guess dimensions"}else{var a=Math.sqrt(o/(r===e.TEXTURE_CUBE_MAP?6:1));a%1===0?(t=a,n=a):(t=o,n=1)}return{width:t,height:n}}function c(e){D.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function l(e){r.copyExistingProperties(e,D),e.textureColor&&c(e.textureColor)}function m(e,r){void 0!==r.colorspaceConversion&&(Tr.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(Tr.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha)),void 0!==r.flipY&&(Tr.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY))}function y(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,Tr.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Tr.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,Tr.flipY)}function p(e,r,t,n){n.minMag&&(t.call(e,r,e.TEXTURE_MIN_FILTER,n.minMag),t.call(e,r,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&t.call(e,r,e.TEXTURE_MIN_FILTER,n.min),n.mag&&t.call(e,r,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(t.call(e,r,e.TEXTURE_WRAP_S,n.wrap),t.call(e,r,e.TEXTURE_WRAP_T,n.wrap),(r===e.TEXTURE_3D||r instanceof xr)&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&t.call(e,r,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&t.call(e,r,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&t.call(e,r,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&t.call(e,r,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&t.call(e,r,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&t.call(e,r,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function d(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r),p(e,n,e.texParameteri,t)}function E(e,r,t){p(e,r,e.samplerParameteri,t)}function b(e,r){var t=e.createSampler();return E(e,t,r),t}function v(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=b(e,r[n])}),t}function h(e){return e=e||D.textureColor,N(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function A(e,r,t,n,o,u,f){t=t||D.textureOptions,u=u||e.RGBA,f=f||e.UNSIGNED_BYTE;var s=t.target||e.TEXTURE_2D;if(n=n||t.width,o=o||t.height,e.bindTexture(s,r),a(e,n,o,u,f))e.generateMipmap(s);else{var c=i(u,f)?e.LINEAR:e.NEAREST;e.texParameteri(s,e.TEXTURE_MIN_FILTER,c),e.texParameteri(s,e.TEXTURE_MAG_FILTER,c),e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function T(e){return e.auto===!0||void 0===e.auto&&void 0===e.level}function x(e,r){return r=r||{},r.cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function R(e,r){var t=x(e,r),n=t.map(function(e,r){return{face:e,ndx:r}});return n.sort(function(e,r){return e.face-r.face}),n}function F(e,r,t,o){o=o||D.textureOptions;var a=o.target||e.TEXTURE_2D,i=o.level||0,u=t.width,f=t.height,s=o.internalFormat||o.format||e.RGBA,c=n(s),l=o.format||c.format,p=o.type||c.type;if(m(e,o),e.bindTexture(a,r),a===e.TEXTURE_CUBE_MAP){var E,b,v=t.width,h=t.height;if(v/6===h)E=h,b=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===v)E=v,b=[0,0,0,1,0,2,0,3,0,4,0,5];else if(v/3===h/2)E=v/3,b=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(v/2!==h/3)throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);E=v/2,b=[0,0,1,0,0,1,1,1,0,2,1,2]}z.canvas.width=E,z.canvas.height=E,u=E,f=E,R(e,o).forEach(function(r){var n=b[2*r.ndx+0]*E,o=b[2*r.ndx+1]*E;z.drawImage(t,n,o,E,E,0,0,E,E),e.texImage2D(r.face,i,s,l,p,z.canvas)}),z.canvas.width=1,z.canvas.height=1}else if(a===e.TEXTURE_3D){var x=Math.min(t.width,t.height),F=Math.max(t.width,t.height),_=F/x;if(_%1!==0)throw"can not compute 3D dimensions of element";var g=t.width===F?1:0,P=t.height===F?1:0;e.texImage3D(a,i,s,x,x,x,0,l,p,null),z.canvas.width=x,z.canvas.height=x;for(var U=0;U<_;++U){var w=U*x*g,B=U*x*P,I=x,C=x,S=0,M=0,L=x,O=x;z.drawImage(t,w,B,I,C,S,M,L,O),e.texSubImage3D(a,i,0,0,U,x,x,1,l,p,z.canvas)}z.canvas.width=0,z.canvas.height=0}else e.texImage2D(a,i,s,l,p,t);y(e,o),T(o)&&A(e,r,o,u,f,s,p),d(e,r,o)}function _(){}function g(e,t,n){function o(){u.removeEventListener("error",a),u.removeEventListener("load",i),u=null}function a(){var t="couldn't load image: "+e;r.error(t),n(t,u),o()}function i(){n(null,u),o()}n=n||_;var u=new Image;return t=void 0!==t?t:D.crossOrigin,void 0!==t&&(u.crossOrigin=t),u.addEventListener("error",a),u.addEventListener("load",i),u.src=e,u}function P(e,r,t){t=t||D.textureOptions;var n=t.target||e.TEXTURE_2D;if(e.bindTexture(n,r),t.color!==!1){var o=h(t.color);if(n===e.TEXTURE_CUBE_MAP)for(var a=0;a<6;++a)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}}function U(e,t,n,o){o=o||_,n=n||D.textureOptions,P(e,t,n),n=r.shallowCopy(n);var a=g(n.src,n.crossOrigin,function(r,a){r?o(r,t,a):(F(e,t,a,n),o(null,t,a))});return a}function w(e,t,o,a){function i(r){return function(n,i){--b,n?v.push(n):i.width!==i.height?v.push("cubemap face img is not a square: "+i.src):(m(e,o),e.bindTexture(d,t),5===b?x(e).forEach(function(r){e.texImage2D(r,f,s,l,p,i)}):e.texImage2D(r,f,s,l,p,i),y(e,o),T(o)&&e.generateMipmap(d)),0===b&&a(v.length?v:void 0,E,t)}}a=a||_;var u=o.src;if(6!==u.length)throw"there must be 6 urls for a cubemap";var f=o.level||0,s=o.internalFormat||o.format||e.RGBA,c=n(s),l=o.format||c.format,p=o.type||e.UNSIGNED_BYTE,d=o.target||e.TEXTURE_2D;if(d!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";P(e,t,o),o=r.shallowCopy(o);var E,b=6,v=[],h=x(e,o);E=u.map(function(e,r){return g(e,o.crossOrigin,i(h[r]))})}function B(e,t,o,a){function i(r){return function(n,i){if(--E,n)b.push(n);else{if(m(e,o),e.bindTexture(p,t),R){R=!1,h=o.width||i.width,A=o.height||i.height,
e.texImage3D(p,v,f,h,A,x,0,c,l,null);for(var u=0;u<x;++u)e.texSubImage3D(p,v,0,0,u,h,A,1,c,l,i)}else{var s=i;i.width===h&&i.height===A||(s=z.canvas,z.canvas.width=h,z.canvas.height=A,z.drawImage(i,0,0,h,A)),e.texSubImage3D(p,v,0,0,r,h,A,1,c,l,s),s===z.canvas&&(z.canvas.width=0,z.canvas.height=0)}y(e,o),T(o)&&e.generateMipmap(p)}0===E&&a(b.length?b:void 0,d,t)}}a=a||_;var u=o.src,f=o.internalFormat||o.format||e.RGBA,s=n(f),c=o.format||s.format,l=o.type||e.UNSIGNED_BYTE,p=o.target||e.TEXTURE_2D_ARRAY;if(p!==e.TEXTURE_3D&&p!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";P(e,t,o),o=r.shallowCopy(o);var d,E=u.length,b=[],v=o.level||0,h=o.width,A=o.height,x=u.length,R=!0;d=u.map(function(e,r){return g(e,o.crossOrigin,i(r))})}function I(r,o,a,i){i=i||D.textureOptions;var u=i.target||r.TEXTURE_2D;r.bindTexture(u,o);var c=i.width,l=i.height,p=i.depth,d=i.level||0,E=i.internalFormat||i.format||r.RGBA,b=n(E),v=i.format||b.format,h=i.type||f(r,a,b.type);if(N(a))a instanceof Uint8ClampedArray&&(a=new Uint8Array(a.buffer));else{var A=e.getTypedArrayTypeForGLType(h);a=new A(a)}var T=t(E,h),x=a.byteLength/T;if(x%1)throw"length wrong size for format: "+Ar(r,v);var F;if(u===r.TEXTURE_3D)if(c||l||p)!c||l&&p?!l||c&&p?(F=s(r,u,c,l,x/p),c=F.width,l=F.height):(F=s(r,u,c,p,x/l),c=F.width,p=F.height):(F=s(r,u,l,p,x/c),l=F.width,p=F.height);else{var _=Math.cbrt(x);if(_%1!==0)throw"can't guess cube size of array of numElements: "+x;c=_,l=_,p=_}else F=s(r,u,c,l,x),c=F.width,l=F.height;if(r.pixelStorei(r.UNPACK_ALIGNMENT,i.unpackAlignment||1),m(r,i),u===r.TEXTURE_CUBE_MAP){var g=T/a.BYTES_PER_ELEMENT,P=x/6*g;R(r,i).forEach(function(e){var t=P*e.ndx,n=a.subarray(t,t+P);r.texImage2D(e.face,d,E,c,l,0,v,h,n)})}else u===r.TEXTURE_3D?r.texImage3D(u,d,E,c,l,p,0,v,h,a):r.texImage2D(u,d,E,c,l,0,v,h,a);return y(r,i),{width:c,height:l,depth:p,type:h}}function C(e,r,t){var o=t.target||e.TEXTURE_2D;e.bindTexture(o,r);var a=t.level||0,i=t.internalFormat||t.format||e.RGBA,u=n(i),f=t.format||u.format,s=t.type||u.type;if(m(e,t),o===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,a,i,t.width,t.height,0,f,s,null);else o===e.TEXTURE_3D?e.texImage3D(o,a,i,t.width,t.height,t.depth,0,f,s,null):e.texImage2D(o,a,i,t.width,t.height,0,f,s,null);y(e,t)}function S(e,r,t){t=t||_,r=r||D.textureOptions;var o=e.createTexture(),a=r.target||e.TEXTURE_2D,i=r.width||1,u=r.height||1,f=r.internalFormat||e.RGBA,s=n(f),c=r.type||s.type;e.bindTexture(a,o),a===e.TEXTURE_CUBE_MAP&&(e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var l=r.src;if(l)if("function"==typeof l&&(l=l(e,r)),"string"==typeof l)U(e,o,r,t);else if(N(l)||Array.isArray(l)&&("number"==typeof l[0]||Array.isArray(l[0])||N(l[0]))){var m=I(e,o,l,r);i=m.width,u=m.height,c=m.type}else if(Array.isArray(l)&&"string"==typeof l[0])a===e.TEXTURE_CUBE_MAP?w(e,o,r,t):B(e,o,r,t);else{if(!(l instanceof HTMLElement))throw"unsupported src type";F(e,o,l,r),i=l.width,u=l.height}else C(e,o,r);return T(r)&&A(e,o,r,i,u,f,c),d(e,o,r),o}function M(e,r,t,o,a){o=o||t.width,a=a||t.height;var i=t.target||e.TEXTURE_2D;e.bindTexture(i,r);var u,s=t.level||0,c=t.internalFormat||t.format||e.RGBA,l=n(c),m=t.format||l.format,y=t.src;if(u=y&&(N(y)||Array.isArray(y)&&"number"==typeof y[0])?t.type||f(e,y,l.type):t.type||l.type,i===e.TEXTURE_CUBE_MAP)for(var p=0;p<6;++p)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,s,m,o,a,0,m,u,null);else e.texImage2D(i,s,m,o,a,0,m,u,null)}function L(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]}function O(e,r,t){function n(){0===o&&setTimeout(function(){t(a.length?a:void 0,i,u)},0)}t=t||_;var o=0,a=[],i={},u={};return Object.keys(r).forEach(function(t){var f,s=r[t];L(s.src)&&(f=function(e,r,i){u[t]=i,--o,e&&a.push(e),n()},++o),i[t]=S(e,s,f)}),n(),i}var D={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},N=e.isArrayBuffer,z=document.createElement("canvas").getContext("2d"),G=6406,X=6407,k=6408,V=6409,Y=6410,W=6402,j=34041,K=33321,H=36756,q=33325,Z=33326,Q=33330,$=33329,J=33338,ee=33337,re=33340,te=33339,ne=33323,oe=36757,ae=33327,ie=33328,ue=33336,fe=33335,se=33332,ce=33331,le=33334,me=33333,ye=32849,pe=35905,de=36194,Ee=36758,be=35898,ve=35901,he=34843,Ae=34837,Te=36221,xe=36239,Re=36215,Fe=36233,_e=36209,ge=36227,Pe=32856,Ue=35907,we=36759,Be=32855,Ie=32854,Ce=32857,Se=34842,Me=34836,Le=36220,Oe=36238,De=36975,Ne=36214,ze=36232,Ge=36226,Xe=36208,ke=33189,Ve=33190,Ye=36012,We=36013,je=35056,Ke=5120,He=5121,qe=5122,Ze=5123,Qe=5124,$e=5125,Je=5126,er=32819,rr=32820,tr=33635,nr=5131,or=36193,ar=33640,ir=35899,ur=35902,fr=36269,sr=34042,cr=33319,lr=33320,mr=6403,yr=36244,pr=36248,dr=36249,Er={},br=Er;br[G]={n:1},br[V]={n:1},br[Y]={n:2},br[X]={n:3},br[k]={n:4},br[mr]={n:1},br[yr]={n:1},br[cr]={n:2},br[lr]={n:2},br[X]={n:3},br[pr]={n:3},br[k]={n:4},br[dr]={n:4},br[W]={n:1},br[j]={n:2};var vr={},hr=vr;hr[G]={e:G,r:!0,t:!0,o:[1,2,2,4],type:[He,nr,or,Je]},hr[V]={e:V,r:!0,t:!0,o:[1,2,2,4],type:[He,nr,or,Je]},hr[Y]={e:Y,r:!0,t:!0,o:[2,4,4,8],type:[He,nr,or,Je]},hr[X]={e:X,r:!0,t:!0,o:[3,6,6,12,2],type:[He,nr,or,Je,tr]},hr[k]={e:k,r:!0,t:!0,o:[4,8,8,16,2,2],type:[He,nr,or,Je,er,rr]},hr[K]={e:mr,r:!0,t:!0,o:1,type:He},hr[H]={e:mr,r:!1,t:!0,o:1,type:Ke},hr[q]={e:mr,r:!1,t:!0,o:[4,2],type:[Je,nr]},hr[Z]={e:mr,r:!1,t:!1,o:4,type:Je},hr[Q]={e:yr,r:!0,t:!1,o:1,type:He},hr[$]={e:yr,r:!0,t:!1,o:1,type:Ke},hr[se]={e:yr,r:!0,t:!1,o:2,type:Ze},hr[ce]={e:yr,r:!0,t:!1,o:2,type:qe},hr[le]={e:yr,r:!0,t:!1,o:4,type:$e},hr[me]={e:yr,r:!0,t:!1,o:4,type:Qe},hr[ne]={e:cr,r:!0,t:!0,o:2,type:He},hr[oe]={e:cr,r:!1,t:!0,o:2,type:Ke},hr[ae]={e:cr,r:!1,t:!0,o:[8,4],type:[Je,nr]},hr[ie]={e:cr,r:!1,t:!1,o:8,type:Je},hr[ue]={e:lr,r:!0,t:!1,o:2,type:He},hr[fe]={e:lr,r:!0,t:!1,o:2,type:Ke},hr[J]={e:lr,r:!0,t:!1,o:4,type:Ze},hr[ee]={e:lr,r:!0,t:!1,o:4,type:qe},hr[re]={e:lr,r:!0,t:!1,o:8,type:$e},hr[te]={e:lr,r:!0,t:!1,o:8,type:Qe},hr[ye]={e:X,r:!0,t:!0,o:3,type:He},hr[pe]={e:X,r:!1,t:!0,o:3,type:He},hr[de]={e:X,r:!0,t:!0,o:[3,2],type:[He,tr]},hr[Ee]={e:X,r:!1,t:!0,o:3,type:Ke},hr[be]={e:X,r:!1,t:!0,o:[12,6,4],type:[Je,nr,ir]},hr[ve]={e:X,r:!1,t:!0,o:[12,6,4],type:[Je,nr,ur]},hr[he]={e:X,r:!1,t:!0,o:[12,6],type:[Je,nr]},hr[Ae]={e:X,r:!1,t:!1,o:12,type:Je},hr[Te]={e:pr,r:!1,t:!1,o:3,type:He},hr[xe]={e:pr,r:!1,t:!1,o:3,type:Ke},hr[Re]={e:pr,r:!1,t:!1,o:6,type:Ze},hr[Fe]={e:pr,r:!1,t:!1,o:6,type:qe},hr[_e]={e:pr,r:!1,t:!1,o:12,type:$e},hr[ge]={e:pr,r:!1,t:!1,o:12,type:Qe},hr[Pe]={e:k,r:!0,t:!0,o:4,type:He},hr[Ue]={e:k,r:!0,t:!0,o:4,type:He},hr[we]={e:k,r:!1,t:!0,o:4,type:Ke},hr[Be]={e:k,r:!0,t:!0,o:[4,2,4],type:[He,rr,ar]},hr[Ie]={e:k,r:!0,t:!0,o:[4,2],type:[He,er]},hr[Ce]={e:k,r:!0,t:!0,o:4,type:ar},hr[Se]={e:k,r:!1,t:!0,o:[16,8],type:[Je,nr]},hr[Me]={e:k,r:!1,t:!1,o:16,type:Je},hr[Le]={e:dr,r:!0,t:!1,o:4,type:He},hr[Oe]={e:dr,r:!0,t:!1,o:4,type:Ke},hr[De]={e:dr,r:!0,t:!1,o:4,type:ar},hr[Ne]={e:dr,r:!0,t:!1,o:8,type:Ze},hr[ze]={e:dr,r:!0,t:!1,o:8,type:qe},hr[Ge]={e:dr,r:!0,t:!1,o:16,type:Qe},hr[Xe]={e:dr,r:!0,t:!1,o:16,type:$e},hr[ke]={e:W,r:!0,t:!1,o:[2,4],type:[Ze,$e]},hr[Ve]={e:W,r:!0,t:!1,o:4,type:$e},hr[Ye]={e:W,r:!0,t:!1,o:4,type:Je},hr[je]={e:j,r:!0,t:!1,o:4,type:sr},hr[We]={e:j,r:!0,t:!1,o:4,type:fr},Object.keys(hr).forEach(function(e){var r=hr[e];if(r.bytesPerElementMap={},Array.isArray(r.o))r.o.forEach(function(e,t){var n=r.type[t];r.bytesPerElementMap[n]=e});else{var t=r.type;r.bytesPerElementMap[t]=r.o}});var Ar=function(){function e(e){if(!r){r={};for(var t in e)"number"==typeof e[t]&&(r[e[t]]=t)}}var r;return function(t,n){return e(t),r[n]||"0x"+n.toString(16)}}(),Tr={},xr=window.WebGLSampler||function(){};return{setDefaults_:l,createSampler:b,createSamplers:v,setSamplerParameters:E,createTexture:S,setEmptyTexture:C,setTextureFromArray:I,loadTextureFromUrl:U,setTextureFromElement:F,setTextureFilteringForSize:A,setTextureParameters:d,setDefaultTextureColor:c,createTextures:O,resizeTexture:M,getNumComponentsForFormat:u,getBytesPerElementForInternalFormat:t}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(6)],o=function(e){"use strict";function r(r,t,n){var o=r.createVertexArray();return r.bindVertexArray(o),t.length||(t=[t]),t.forEach(function(t){e.setBuffersAndAttributes(r,t,n)}),r.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:o}}function t(r,t,n,o){var a=r.createVertexArray();return r.bindVertexArray(a),e.setAttributes(t,n),o&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bindVertexArray(null),a}function n(e,r,n){return t(e,r.attribSetters||r,n.attribs,n.indices)}return{createVertexArrayInfo:r,createVAOAndSetAttributes:t,createVAOFromBufferInfo:n}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(11)],o=function(e){"use strict";function r(e){var r=I;return I=e,r}function t(e,r){return r=r||new I(16),r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=-e[7],r[8]=-e[8],r[9]=-e[9],r[10]=-e[10],r[11]=-e[11],r[12]=-e[12],r[13]=-e[13],r[14]=-e[14],r[15]=-e[15],r}function n(e,r){return r=r||new I(16),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function o(e){return e=e||new I(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,r){if(r=r||new I(16),r===e){var t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,r}var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],f=e[5],s=e[6],c=e[7],l=e[8],m=e[9],y=e[10],p=e[11],d=e[12],E=e[13],b=e[14],v=e[15];return r[0]=n,r[1]=u,r[2]=l,r[3]=d,r[4]=o,r[5]=f,r[6]=m,r[7]=E,r[8]=a,r[9]=s,r[10]=y,r[11]=b,r[12]=i,r[13]=c,r[14]=p,r[15]=v,r}function i(e,r){r=r||new I(16);var t=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],f=e[6],s=e[7],c=e[8],l=e[9],m=e[10],y=e[11],p=e[12],d=e[13],E=e[14],b=e[15],v=m*b,h=E*y,A=f*b,T=E*s,x=f*y,R=m*s,F=o*b,_=E*a,g=o*y,P=m*a,U=o*s,w=f*a,B=c*d,C=p*l,S=i*d,M=p*u,L=i*l,O=c*u,D=t*d,N=p*n,z=t*l,G=c*n,X=t*u,k=i*n,V=v*u+T*l+x*d-(h*u+A*l+R*d),Y=h*n+F*l+P*d-(v*n+_*l+g*d),W=A*n+_*u+U*d-(T*n+F*u+w*d),j=R*n+g*u+w*l-(x*n+P*u+U*l),K=1/(t*V+i*Y+c*W+p*j);return r[0]=K*V,r[1]=K*Y,r[2]=K*W,r[3]=K*j,r[4]=K*(h*i+A*c+R*p-(v*i+T*c+x*p)),r[5]=K*(v*t+_*c+g*p-(h*t+F*c+P*p)),r[6]=K*(T*t+F*i+w*p-(A*t+_*i+U*p)),r[7]=K*(x*t+P*i+U*c-(R*t+g*i+w*c)),r[8]=K*(B*s+M*y+L*b-(C*s+S*y+O*b)),r[9]=K*(C*a+D*y+G*b-(B*a+N*y+z*b)),r[10]=K*(S*a+N*s+X*b-(M*a+D*s+k*b)),r[11]=K*(O*a+z*s+k*y-(L*a+G*s+X*y)),r[12]=K*(S*m+O*E+C*f-(L*E+B*f+M*m)),r[13]=K*(z*E+B*o+N*m-(D*m+G*E+C*o)),r[14]=K*(D*f+k*E+M*o-(X*E+S*o+N*f)),r[15]=K*(X*m+L*o+G*f-(z*f+k*m+O*o)),r}function u(e,r,t){t=t||new I(16);var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],f=e[5],s=e[6],c=e[7],l=e[8],m=e[9],y=e[10],p=e[11],d=e[12],E=e[13],b=e[14],v=e[15],h=r[0],A=r[1],T=r[2],x=r[3],R=r[4],F=r[5],_=r[6],g=r[7],P=r[8],U=r[9],w=r[10],B=r[11],C=r[12],S=r[13],M=r[14],L=r[15];return t[0]=n*h+u*A+l*T+d*x,t[1]=o*h+f*A+m*T+E*x,t[2]=a*h+s*A+y*T+b*x,t[3]=i*h+c*A+p*T+v*x,t[4]=n*R+u*F+l*_+d*g,t[5]=o*R+f*F+m*_+E*g,t[6]=a*R+s*F+y*_+b*g,t[7]=i*R+c*F+p*_+v*g,t[8]=n*P+u*U+l*w+d*B,t[9]=o*P+f*U+m*w+E*B,t[10]=a*P+s*U+y*w+b*B,t[11]=i*P+c*U+p*w+v*B,t[12]=n*C+u*S+l*M+d*L,t[13]=o*C+f*S+m*M+E*L,t[14]=a*C+s*S+y*M+b*L,t[15]=i*C+c*S+p*M+v*L,t}function f(e,r,t){return t=t||o(),e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function s(r,t){return t=t||e.create(),t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function c(r,t,n){n=n||e.create();var o=4*t;return n[0]=r[o+0],n[1]=r[o+1],n[2]=r[o+2],n}function l(e,r,t,o){o!==e&&(o=n(e,o));var a=4*t;return o[a+0]=r[0],o[a+1]=r[1],o[a+2]=r[2],o}function m(e,r,t,n,o){o=o||new I(16);var a=Math.tan(.5*Math.PI-.5*e),i=1/(t-n);return o[0]=a/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(t+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=t*n*i*2,o[15]=0,o}function y(e,r,t,n,o,a,i){return i=i||new I(16),i[0]=2/(r-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-t),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(a-o),i[11]=0,i[12]=(r+e)/(e-r),i[13]=(n+t)/(t-n),i[14]=(a+o)/(o-a),i[15]=1,i}function p(e,r,t,n,o,a,i){i=i||new I(16);var u=r-e,f=n-t,s=o-a;return i[0]=2*o/u,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/f,i[6]=0,i[7]=0,i[8]=(e+r)/u,i[9]=(n+t)/f,i[10]=a/s,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a/s,i[15]=0,i}function d(r,t,n,o){o=o||new I(16);var a=C,i=S,u=M;return e.normalize(e.subtract(r,t,u),u),e.normalize(e.cross(n,u,a),a),e.normalize(e.cross(u,a,i),i),o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=0,o[4]=i[0],o[5]=i[1],o[6]=i[2],o[7]=0,o[8]=u[0],o[9]=u[1],o[10]=u[2],o[11]=0,o[12]=r[0],o[13]=r[1],o[14]=r[2],o[15]=1,o}function E(e,r){return r=r||new I(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function b(e,r,t){t=t||new I(16);var n=r[0],o=r[1],a=r[2],i=e[0],u=e[1],f=e[2],s=e[3],c=e[4],l=e[5],m=e[6],y=e[7],p=e[8],d=e[9],E=e[10],b=e[11],v=e[12],h=e[13],A=e[14],T=e[15];return e!==t&&(t[0]=i,t[1]=u,t[2]=f,t[3]=s,t[4]=c,t[5]=l,t[6]=m,t[7]=y,t[8]=p,t[9]=d,t[10]=E,t[11]=b),t[12]=i*n+c*o+p*a+v,t[13]=u*n+l*o+d*a+h,t[14]=f*n+m*o+E*a+A,t[15]=s*n+y*o+b*a+T,t}function v(e,r){r=r||new I(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function h(e,r,t){t=t||new I(16);var n=e[4],o=e[5],a=e[6],i=e[7],u=e[8],f=e[9],s=e[10],c=e[11],l=Math.cos(r),m=Math.sin(r);return t[4]=l*n+m*u,t[5]=l*o+m*f,t[6]=l*a+m*s,t[7]=l*i+m*c,t[8]=l*u-m*n,t[9]=l*f-m*o,t[10]=l*s-m*a,t[11]=l*c-m*i,e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function A(e,r){r=r||new I(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function T(e,r,t){t=t||new I(16);var n=e[0],o=e[1],a=e[2],i=e[3],u=e[8],f=e[9],s=e[10],c=e[11],l=Math.cos(r),m=Math.sin(r);return t[0]=l*n-m*u,t[1]=l*o-m*f,t[2]=l*a-m*s,t[3]=l*i-m*c,t[8]=l*u+m*n,t[9]=l*f+m*o,t[10]=l*s+m*a,t[11]=l*c+m*i,e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function x(e,r){r=r||new I(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function R(e,r,t){t=t||new I(16);var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],f=e[5],s=e[6],c=e[7],l=Math.cos(r),m=Math.sin(r);return t[0]=l*n+m*u,t[1]=l*o+m*f,t[2]=l*a+m*s,t[3]=l*i+m*c,t[4]=l*u-m*n,t[5]=l*f-m*o,t[6]=l*s-m*a,t[7]=l*c-m*i,e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function F(e,r,t){t=t||new I(16);var n=e[0],o=e[1],a=e[2],i=Math.sqrt(n*n+o*o+a*a);n/=i,o/=i,a/=i;var u=n*n,f=o*o,s=a*a,c=Math.cos(r),l=Math.sin(r),m=1-c;return t[0]=u+(1-u)*c,t[1]=n*o*m+a*l,t[2]=n*a*m-o*l,t[3]=0,t[4]=n*o*m-a*l,t[5]=f+(1-f)*c,t[6]=o*a*m+n*l,t[7]=0,t[8]=n*a*m+o*l,t[9]=o*a*m-n*l,t[10]=s+(1-s)*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(e,r,t,n){n=n||new I(16);var o=r[0],a=r[1],i=r[2],u=Math.sqrt(o*o+a*a+i*i);o/=u,a/=u,i/=u;var f=o*o,s=a*a,c=i*i,l=Math.cos(t),m=Math.sin(t),y=1-l,p=f+(1-f)*l,d=o*a*y+i*m,E=o*i*y-a*m,b=o*a*y-i*m,v=s+(1-s)*l,h=a*i*y+o*m,A=o*i*y+a*m,T=a*i*y-o*m,x=c+(1-c)*l,R=e[0],F=e[1],_=e[2],g=e[3],P=e[4],U=e[5],w=e[6],B=e[7],C=e[8],S=e[9],M=e[10],L=e[11];return n[0]=p*R+d*P+E*C,n[1]=p*F+d*U+E*S,n[2]=p*_+d*w+E*M,n[3]=p*g+d*B+E*L,n[4]=b*R+v*P+h*C,n[5]=b*F+v*U+h*S,n[6]=b*_+v*w+h*M,n[7]=b*g+v*B+h*L,n[8]=A*R+T*P+x*C,n[9]=A*F+T*U+x*S,n[10]=A*_+T*w+x*M,n[11]=A*g+T*B+x*L,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function g(e,r){return r=r||new I(16),r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function P(e,r,t){t=t||new I(16);var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=n*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=o*e[6],t[7]=o*e[7],t[8]=a*e[8],t[9]=a*e[9],t[10]=a*e[10],t[11]=a*e[11],e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function U(r,t,n){n=n||e.create();var o=t[0],a=t[1],i=t[2],u=o*r[3]+a*r[7]+i*r[11]+r[15];return n[0]=(o*r[0]+a*r[4]+i*r[8]+r[12])/u,n[1]=(o*r[1]+a*r[5]+i*r[9]+r[13])/u,n[2]=(o*r[2]+a*r[6]+i*r[10]+r[14])/u,n}function w(r,t,n){n=n||e.create();var o=t[0],a=t[1],i=t[2];return n[0]=o*r[0]+a*r[4]+i*r[8],n[1]=o*r[1]+a*r[5]+i*r[9],n[2]=o*r[2]+a*r[6]+i*r[10],n}function B(r,t,n){n=n||e.create();var o=i(r),a=t[0],u=t[1],f=t[2];return n[0]=a*o[0]+u*o[1]+f*o[2],n[1]=a*o[4]+u*o[5]+f*o[6],n[2]=a*o[8]+u*o[9]+f*o[10],n}var I=Float32Array,C=e.create(),S=e.create(),M=e.create();return{axisRotate:_,axisRotation:F,create:o,copy:n,frustum:p,getAxis:c,getTranslation:s,identity:o,inverse:i,lookAt:d,multiply:u,negate:t,ortho:y,perspective:m,rotateX:h,rotateY:T,rotateZ:R,rotateAxis:_,rotationX:v,rotationY:A,rotationZ:x,scale:P,scaling:g,setAxis:l,setDefaultType:r,setTranslation:f,transformDirection:w,transformNormal:B,transformPoint:U,translate:b,translation:E,transpose:a}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[],o=function(){"use strict";function e(e){var r=v;return v=e,r}function r(e,r,t){var n=new v(3);return e&&(n[0]=e),r&&(n[1]=r),t&&(n[2]=t),n}function t(e,r,t){return t=t||new v(3),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function n(e,r,t){return t=t||new v(3),t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function o(e,r,t,n){return n=n||new v(3),n[0]=(1-t)*e[0]+t*r[0],n[1]=(1-t)*e[1]+t*r[1],n[2]=(1-t)*e[2]+t*r[2],n}function a(e,r,t){return t=t||new v(3),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function i(e,r,t){return t=t||new v(3),t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r,t}function u(e,r,t){t=t||new v(3);var n=e[2]*r[0]-e[0]*r[2],o=e[0]*r[1]-e[1]*r[0];return t[0]=e[1]*r[2]-e[2]*r[1],t[1]=n,t[2]=o,t}function f(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function s(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function c(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function l(e,r){var t=e[0]-r[0],n=e[1]-r[1],o=e[2]-r[2];return Math.sqrt(t*t+n*n+o*o)}function m(e,r){var t=e[0]-r[0],n=e[1]-r[1],o=e[2]-r[2];return t*t+n*n+o*o}function y(e,r){r=r||new v(3);var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.sqrt(t);return n>1e-5?(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n):(r[0]=0,r[1]=0,r[2]=0),r}function p(e,r){return r=r||new v(3),r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function d(e,r){return r=r||new v(3),r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function E(e,r,t){return t=t||new v(3),t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function b(e,r,t){return t=t||new v(3),t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}var v=Float32Array;return{add:t,copy:d,create:r,cross:u,distance:l,distanceSq:m,divide:b,divScalar:i,dot:f,lerp:o,length:s,lengthSq:c,mulScalar:a,multiply:E,negate:p,normalize:y,setDefaultType:e,subtract:n}}.apply(r,n),!(void 0!==o&&(e.exports=o))},function(e,r,t){var n,o;n=[t(2),t(4),t(10),t(11)],o=function(e,r,t,n){"use strict";function o(e,r){var t=0;return e.push=function(){for(var r=0;r<arguments.length;++r){var n=arguments[r];if(n instanceof Array||n.buffer&&n.buffer instanceof ArrayBuffer)for(var o=0;o<n.length;++o)e[t++]=n[o];else e[t++]=n}},e.reset=function(e){t=e||0},e.numComponents=r,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function a(e,r,t){var n=t||Float32Array;return o(new n(e*r),e)}function i(e){return"indices"!==e}function u(e){function r(r){for(var i=e[r],u=i.numComponents,f=a(u,o,i.constructor),s=0;s<o;++s)for(var c=t[s],l=c*u,m=0;m<u;++m)f.push(i[l+m]);n[r]=f}var t=e.indices,n={},o=t.length;return Object.keys(e).filter(i).forEach(r),n}function f(e){if(e.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var r=e.normal,t=r.length,n=0;n<t;n+=9){var o=r[n+0],a=r[n+1],i=r[n+2],u=r[n+3],f=r[n+4],s=r[n+5],c=r[n+6],l=r[n+7],m=r[n+8],y=o+u+c,p=a+f+l,d=i+s+m,E=Math.sqrt(y*y+p*p+d*d);y/=E,p/=E,d/=E,r[n+0]=y,r[n+1]=p,r[n+2]=d,r[n+3]=y,r[n+4]=p,r[n+5]=d,r[n+6]=y,r[n+7]=p,r[n+8]=d}return e}function s(e,r,t){for(var n=e.length,o=new Float32Array(3),a=0;a<n;a+=3)t(r,[e[a],e[a+1],e[a+2]],o),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2]}function c(e,r,t){t=t||n.create();var o=r[0],a=r[1],i=r[2];return t[0]=o*e[0]+a*e[1]+i*e[2],t[1]=o*e[4]+a*e[5]+i*e[6],t[2]=o*e[8]+a*e[9]+i*e[10],t}function l(e,r){return s(e,r,t.transformDirection),e}function m(e,r){return s(e,t.inverse(r),c),e}function y(e,r){return s(e,r,t.transformPoint),e}function p(e,r){return Object.keys(e).forEach(function(t){var n=e[t];t.indexOf("pos")>=0?y(n,r):t.indexOf("tan")>=0||t.indexOf("binorm")>=0?l(n,r):t.indexOf("norm")>=0&&m(n,r)}),e}function d(e,r,t){return e=e||2,r=r||0,t=t||0,e*=.5,{position:{numComponents:2,data:[r+-1*e,t+-1*e,r+1*e,t+-1*e,r+-1*e,t+1*e,r+1*e,t+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function E(e,r,n,o,i){e=e||1,r=r||1,n=n||1,o=o||1,i=i||t.identity();for(var u=(n+1)*(o+1),f=a(3,u),s=a(3,u),c=a(2,u),l=0;l<=o;l++)for(var m=0;m<=n;m++){var y=m/n,d=l/o;f.push(e*y-.5*e,0,r*d-.5*r),s.push(0,1,0),c.push(y,d)}for(var E=n+1,b=a(3,n*o*2,Uint16Array),l=0;l<o;l++)for(var m=0;m<n;m++)b.push((l+0)*E+m,(l+1)*E+m,(l+0)*E+m+1),b.push((l+1)*E+m,(l+1)*E+m+1,(l+0)*E+m+1);var v=p({position:f,normal:s,texcoord:c,indices:b},i);return v}function b(e,r,t,n,o,i,u){if(r<=0||t<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||Math.PI,i=i||0,u=u||2*Math.PI;for(var f=o-n,s=u-i,c=(r+1)*(t+1),l=a(3,c),m=a(3,c),y=a(2,c),p=0;p<=t;p++)for(var d=0;d<=r;d++){var E=d/r,b=p/t,v=s*E,h=f*b,A=Math.sin(v),T=Math.cos(v),x=Math.sin(h),R=Math.cos(h),F=T*x,_=R,g=A*x;l.push(e*F,e*_,e*g),m.push(F,_,g),y.push(1-E,b)}for(var P=r+1,U=a(3,r*t*2,Uint16Array),d=0;d<r;d++)for(var p=0;p<t;p++)U.push((p+0)*P+d,(p+0)*P+d+1,(p+1)*P+d),U.push((p+1)*P+d,(p+0)*P+d+1,(p+1)*P+d+1);return{position:l,normal:m,texcoord:y,indices:U}}function v(e){e=e||1;for(var r=e/2,t=[[-r,-r,-r],[+r,-r,-r],[-r,+r,-r],[+r,+r,-r],[-r,-r,+r],[+r,-r,+r],[-r,+r,+r],[+r,+r,+r]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=24,u=a(3,i),f=a(3,i),s=a(2,i),c=a(3,12,Uint16Array),l=0;l<6;++l){for(var m=O[l],y=0;y<4;++y){var p=t[m[y]],d=n[l],E=o[y];u.push(p),f.push(d),s.push(E)}var b=4*l;c.push(b+0,b+1,b+2),c.push(b+0,b+2,b+3)}return{position:u,normal:f,texcoord:s,indices:c}}function h(e,r,t,n,o,i,u){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(o<1)throw Error("verticalSubdivisions must be 1 or greater");for(var f=void 0===i||i,s=void 0===u||u,c=(f?2:0)+(s?2:0),l=(n+1)*(o+1+c),m=a(3,l),y=a(3,l),p=a(2,l),d=a(3,n*(o+c)*2,Uint16Array),E=n+1,b=Math.atan2(e-r,t),v=Math.cos(b),h=Math.sin(b),A=f?-2:0,T=o+(s?2:0),x=A;x<=T;++x){var R,F=x/o,_=t*F;x<0?(_=0,F=1,R=e):x>o?(_=t,F=1,R=r):R=e+(r-e)*(x/o),x!==-2&&x!==o+2||(R=0,F=0),_-=t/2;for(var g=0;g<E;++g){var P=Math.sin(g*Math.PI*2/n),U=Math.cos(g*Math.PI*2/n);m.push(P*R,_,U*R),y.push(x<0||x>o?0:P*v,x<0?-1:x>o?1:h,x<0||x>o?0:U*v),p.push(g/n,1-F)}}for(var x=0;x<o+c;++x)for(var g=0;g<n;++g)d.push(E*(x+0)+0+g,E*(x+0)+1+g,E*(x+1)+1+g),d.push(E*(x+0)+0+g,E*(x+1)+1+g,E*(x+1)+0+g);return{position:m,normal:y,texcoord:p,indices:d}}function A(e,r){r=r||[];for(var t=[],n=0;n<e.length;n+=4){var o=e[n],a=e.slice(n+1,n+4);a.push.apply(a,r);for(var i=0;i<o;++i)t.push.apply(t,a)}return t}function T(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],r=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],t=A([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=A([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),o=e.length/3,i={position:a(3,o),texcoord:a(2,o),normal:a(3,o),color:a(4,o,Uint8Array),indices:a(3,o/3,Uint16Array)};i.position.push(e),i.texcoord.push(r),i.normal.push(t),i.color.push(n);for(var u=0;u<o;++u)i.indices.push(u);return i}function x(e,r,t,o,i,u,f){function s(e,r,t){return e+(r-e)*t}function c(r,t,a,f,c,l){for(var p=0;p<=i;p++){var v=t/(m-1),h=p/i,A=2*(v-.5),T=(u+h*y)*Math.PI,x=Math.sin(T),R=Math.cos(T),F=s(e,r,x),_=A*o,g=R*e,P=x*F;d.push(_,g,P);var U=n.add(n.multiply([0,x,R],a),f);E.push(U),b.push(v*c+l,h)}}function l(e,r){for(var t=0;t<i;++t)A.push(e+t+0,e+t+1,r+t+0),A.push(e+t+1,r+t+1,r+t+0)}if(i<=0)throw Error("subdivisionDown must be > 0");u=u||0,f=f||1;for(var m=2,y=f-u,p=2*(i+1)*(2+m),d=a(3,p),E=a(3,p),b=a(2,p),v=0;v<m;v++){var h=2*(v/(m-1)-.5);c(r,v,[1,1,1],[0,0,0],1,0),c(r,v,[0,0,0],[h,0,0],0,0),c(t,v,[1,1,1],[0,0,0],1,0),c(t,v,[0,0,0],[h,0,0],0,1)}var A=a(3,2*i*(2+m),Uint16Array),T=i+1;return l(0*T,4*T),l(5*T,7*T),l(6*T,2*T),l(3*T,1*T),{position:d,normal:E,texcoord:b,indices:A}}function R(e,r,t,n,o,a){return h(e,e,r,t,n,o,a)}function F(e,r,t,n,o,i){if(t<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");o=o||0,i=i||2*Math.PI;for(var u=i-o,f=t+1,s=n+1,c=f*s,l=a(3,c),m=a(3,c),y=a(2,c),p=a(3,t*n*2,Uint16Array),d=0;d<s;++d)for(var E=d/n,b=E*Math.PI*2,v=Math.sin(b),h=e+v*r,A=Math.cos(b),T=A*r,x=0;x<f;++x){var R=x/t,F=o+R*u,_=Math.sin(F),g=Math.cos(F),P=_*h,U=g*h,w=_*v,B=g*v;l.push(P,T,U),m.push(w,A,B),y.push(R,1-E)}for(var d=0;d<n;++d)for(var x=0;x<t;++x){var I=1+x,C=1+d;p.push(f*d+x,f*C+x,f*d+I),p.push(f*C+x,f*C+I,f*d+I)}return{position:l,normal:m,texcoord:y,indices:p}}function _(e,r,t,n,o){if(r<3)throw Error("divisions must be at least 3");t=t?t:1,o=o?o:1,n=n?n:0;for(var i=(r+1)*(t+1),u=a(3,i),f=a(3,i),s=a(2,i),c=a(3,t*r*2,Uint16Array),l=0,m=e-n,y=r+1,p=0;p<=t;++p){for(var d=n+m*Math.pow(p/t,o),E=0;E<=r;++E){var b=2*Math.PI*E/r,v=d*Math.cos(b),h=d*Math.sin(b);if(u.push(v,0,h),f.push(0,1,0),s.push(1-E/r,p/t),p>0&&E!==r){var A=l+(E+1),T=l+E,x=l+E-y,R=l+(E+1)-y;c.push(A,T,x),c.push(A,x,R)}}l+=r+1}return{position:u,normal:f,texcoord:s,indices:c}}function g(e){return Math.random()*e|0}function P(e,r){r=r||{};var t=e.position.numElements,n=a(4,t,Uint8Array),o=r.rand||function(e,r){return r<3?g(256):255};if(e.color=n,e.indices)for(var i=0;i<t;++i)n.push(o(i,0),o(i,1),o(i,2),o(i,3));else for(var u=r.vertsPerColor||3,f=t/u,i=0;i<f;++i)for(var s=[o(i,0),o(i,1),o(i,2),o(i,3)],c=0;c<u;++c)n.push(s);return e}function U(r){return function(t){var n=r.apply(this,Array.prototype.slice.call(arguments,1));return e.createBuffersFromArrays(t,n)}}function w(r){return function(t){var n=r.apply(null,Array.prototype.slice.call(arguments,1));return e.createBufferInfoFromArrays(t,n)}}function B(e,r,t,n){n=n||0;for(var o=e.length,a=0;a<o;++a)r[t+a]=e[a]+n}function I(e,t){var n=M(e),a=new n.constructor(t),i=a;return n.numComponents&&n.numElements&&o(a,n.numComponents),e.data&&(i={data:a},r.copyNamedProperties(D,e,i)),i}function C(e){function r(r){for(var t,n=0,o=0;o<e.length;++o){var a=e[o],i=a[r],u=M(i);n+=u.length,t&&!i.data||(t=i)}return{length:n,spec:t}}function t(r,t,n){for(var o=0,a=0,i=0;i<e.length;++i){var u=e[i],f=u[r],s=M(f);"indices"===r?(B(s,n,a,o),o+=t[i]):B(s,n,a),a+=s.length}}for(var n,o={},a=0;a<e.length;++a){var i=e[a];Object.keys(i).forEach(function(e){o[e]||(o[e]=[]),n||"indices"===e||(n=e);var r=i[e],t=L(r,e),a=M(r),u=a.length/t;o[e].push(u)})}var u=o[n],f={};return Object.keys(o).forEach(function(e){var n=r(e),o=I(n.spec,n.length);t(e,u,M(o)),f[e]=o}),f}function S(e){var r={};return Object.keys(e).forEach(function(t){var n=e[t],o=M(n),a=I(n,o.length);B(o,M(a),0),r[t]=a}),r}var M=e.getArray_,L=e.getNumComponents_,O=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]],D=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];return{create3DFBufferInfo:w(T),create3DFBuffers:U(T),create3DFVertices:T,createAugmentedTypedArray:a,createCubeBufferInfo:w(v),createCubeBuffers:U(v),createCubeVertices:v,createPlaneBufferInfo:w(E),createPlaneBuffers:U(E),createPlaneVertices:E,createSphereBufferInfo:w(b),createSphereBuffers:U(b),createSphereVertices:b,createTruncatedConeBufferInfo:w(h),createTruncatedConeBuffers:U(h),createTruncatedConeVertices:h,createXYQuadBufferInfo:w(d),createXYQuadBuffers:U(d),createXYQuadVertices:d,createCresentBufferInfo:w(x),createCresentBuffers:U(x),createCresentVertices:x,createCylinderBufferInfo:w(R),createCylinderBuffers:U(R),createCylinderVertices:R,createTorusBufferInfo:w(F),createTorusBuffers:U(F),createTorusVertices:F,createDiscBufferInfo:w(_),createDiscBuffers:U(_),createDiscVertices:_,deindexVertices:u,flattenNormals:f,makeRandomVertexColors:P,reorientDirections:l,reorientNormals:m,reorientPositions:y,reorientVertices:p,concatVertices:C,duplicateVertices:S}}.apply(r,n),!(void 0!==o&&(e.exports=o))}])});