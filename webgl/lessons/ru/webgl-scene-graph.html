<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ru/webgl-scene-graph.md. Do not edited directly -->
<!--
Copyright 2021 GFXFundamentals.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of GFXFundamentals. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Что такое граф сцены, и для чего он используется">
<meta name="keywords" content="webgl graphics">
<meta name="thumbnail" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ru.jpg">

<meta property="og:title" content="WebGL - Графы сцены">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ru.jpg">
<meta property="og:description" content="Что такое граф сцены, и для чего он используется">
<meta property="og:url" content="https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webglfundamentals.org">
<meta name="twitter:title" content="WebGL - Графы сцены">
<meta name="twitter:url" content="https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html">
<meta name="twitter:description" content="Что такое граф сцены, и для чего он используется">
<meta name="twitter:image:src" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ru.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webglfundamentals.org/#website",
      "url":"https://webglfundamentals.org/",
      "name":"WebglFundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html#primaryimage",
      "url":"https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ru.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html#webpage",
      "url":"https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html",
      "inLanguage":"ru",
      "name":"WebGL - Графы сцены",
      "keywords":"webgl graphics programming",
      "isPartOf":{
        "@id":"https://webglfundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL - Графы сцены</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-scene-graph.html">
  <link rel="alternate" hreflang="fr" href="https://webglfundamentals.org/webgl/lessons/fr/webgl-scene-graph.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-scene-graph.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html">
  <link rel="alternate" hreflang="pl" href="https://webglfundamentals.org/webgl/lessons/pl/webgl-scene-graph.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-scene-graph.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html">
  <link rel="alternate" hreflang="uk" href="https://webglfundamentals.org/webgl/lessons/uk/webgl-scene-graph.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-scene-graph.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-scene-graph.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-scene-graph.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-scene-graph.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-scene-graph.html" >한국어</a>
    <option value="/webgl/lessons/pl/webgl-scene-graph.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-scene-graph.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-scene-graph.html" selected>Русский</a>
    <option value="/webgl/lessons/uk/webgl-scene-graph.html" >Українська</a>
    <option value="/webgl/lessons/zh_cn/webgl-scene-graph.html" >简体中文</a>
</select>


    <a href="#toc">оглавление</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/ru/">WebGLFundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL - Графы сцены</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>Эта статья продолжает серию, которая начинается с <a href="webgl-fundamentals.html">Основ WebGL</a>.
Если вы ещё не читали предыдущие статьи, предлагаю прочесть по крайней мере первую
из них, а потом вернуться сюда.</p>
<p>Уверен, что специалисты компьютерных наук или графики будут меня осуждать,
но... Граф сцены - это обычно дерево, где каждая вершина генерирует матрицу...
Хм, не очень-то полезное определение. Вероятно, примеры будут полезней.</p>
<p>Большинство 3D-движков используют графы сцены. Вы помещаете в граф сцены
объекты, которые вы хотите видеть. Движок обходит дерево и получает список
объектов для отрисовки. Графы сцены - иерархические, поэтому если, к примеру,
вы захотите создать макет вселенной, у вас может получиться граф, похожий
на такой:</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example " style="width: 400px; height: 500px;" src="/webgl/lessons/resources/planet-diagram.html"></iframe>
</div>

</p>
<p>В чём смысл графа сцены? В первую очередь граф сцены обеспечивает связь
родитель-потомок в матрицах, <a href="webgl-2d-matrices.html">которые были рассмотрены в статье о
2D-матрицах</a>. Для примера рассмотрим простую
(и нереалистичную) модель вселенной, где звёзды (потомки) перемещаются
по галактике (родитель). Аналогично луна (потомок) вращается вокруг своей
планеты (родитель). Если сдвинуть Землю, Луна тоже переместится. А если
переместить галактику, то сдвинутся и все звёзды внутри неё. Потяните за
узлы графа выше и вы поймёте отношения между ними.</p>
<p>Если вы вернётесь к <a href="webgl-2d-matrices.html">математике 2D-матриц</a>, вы можете
вспомнить, что мы умножали матрицы для выполнения переноса, поворота и
масштабирования объектов. А структура графа сцены позволяет помочь с выбором
матрицы, которую необходимо применить к тому или иному объекту.</p>
<p>Обычно каждый <code class="notranslate" translate="no">узел</code> в графе сцены представляет собой <em>локальное пространство</em>.
При использовании верной матрицы объекты <em>локального пространства</em> могут
игнорировать всё, что находится выше по графу. Другими словами, Луну должно
заботить только вращение вокруг Земли. Вращение вокруг Солнца - это уже не
её дело. Без структуры графа сцены вам пришлось бы рассчитывать гораздо более
сложную математику для вычисления орбиты Луны относительно Солнца, потому что
эта орбита выглядит следующим образом:</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example " style="width: 400px; height: 300px;" src="/webgl/lessons/resources/moon-orbit.html"></iframe>
</div>

</p>
<p>С использованием графа сцены вам нужно просто сделать Луну потомком Земли, а
затем построить орбиту вокруг Земли, это просто. Граф сцены сам позаботится о
том, что Земля вращается вокруг Солнца. Это происходит за счёт обхода по узлам
графа и за счёт умножения матриц при обходе.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">worldMatrix = greatGrandParent * grandParent * parent * self(localMatrix)
</code></pre><p>На конкретном примере нашей вселенной получится</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">worldMatrixForMoon = galaxyMatrix * starMatrix * planetMatrix * moonMatrix;
</code></pre><p>Мы можем очень просто добиться такого поведения через рекурсивную функцию</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">function computeWorldMatrix(currentNode, parentWorldMatrix) {
    // вычисляем нашу мировую матрицу через умножение
    // локальной матрицы на мировую матрицу родителя
    var worldMatrix = m4.multiply(parentWorldMatrix, currentNode.localMatrix);

    // затем выполняем то же самое для всех потомков
    currentNode.children.forEach(function(child) {
        computeWorldMatrix(child, worldMatrix);
    });
}
</code></pre><p>Обозначим терминологию, которая достаточно распространена для графа сцены в 3D.</p>
<ul>
<li><p><code class="notranslate" translate="no">localMatrix</code>: Локальная матрица текущей вершины. Она преобразует саму
вершину и её потомков в локальное пространство с центром в этой вершине.</p>
</li>
<li><p><code class="notranslate" translate="no">worldMatrix</code>: Для данной вершины всё, что находится в локальном пространстве,
преобразовывается в пространство корневой вершины графа сцены. Другими словами,
всё помещается в мировое пространство. Если мы вычислим worldMatrix для
Луны, мы получим эту причудливую орбиту, которую вы видели на картинке выше.</p>
</li>
</ul>
<p>Граф сцены сделать достаточно просто. Определим объект <code class="notranslate" translate="no">Node</code>. Есть несметное
количество путей для организации графа сцены, и я не могу сказать, какой из
них лучший. Наиболее распространён способ, когда у вас есть необязательное поле
для хранения объектов, которые будут добавляться на сцену.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var node = {
   localMatrix: ...,  // локальная матрица данной вершины
   worldMatrix: ...,  // мировая матрица данной вершины
   children: [],      // массив дочерних элементов
   thingToDraw: ??,   // объекты для отрисовки
};
</code></pre><p>Давайте создадим граф сцены для солнечной системы. Я не буду использовать
текстуры и другие подобные вещи, так как это отвлечёт нас от основной темы.
Для начала обзаведёмся функциями для управления вершинами. Первое, что нам
понадобится - класс вершины.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var Node = function() {
  this.children = [];
  this.localMatrix = m4.identity();
  this.worldMatrix = m4.identity();
};
</code></pre><p>Создадим сеттер для родителя вершины.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">Node.prototype.setParent = function(parent) {
  // открепляемся от текущего родителя
  if (this.parent) {
    var ndx = this.parent.children.indexOf(this);
    if (ndx &gt;= 0) {
      this.parent.children.splice(ndx, 1);
    }
  }

  // прикрепляемся к новому родительскому узлу
  if (parent) {
    parent.children.append(this);
  }
  this.parent = parent;
};
</code></pre><p>Далее - код для вычисления мировых матриц из локальных матриц на основании
положения вершины в иерархии. Если мы начнём с родителя и рекурсивно обойдём
всех потомков, мы получим их мировые матрицы. Если математика матриц вам
непонятна, <a href="webgl-2d-matrices.html">советую начать со статьи про неё</a>.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">Node.prototype.updateWorldMatrix = function(parentWorldMatrix) {
  if (parentWorldMatrix) {
    // матрица была передана, поэтому выполняем умножение
    // и сохраняем результат в `this.worldMatrix`
    m4.multiply(this.localMatrix, parentWorldMatrix, this.worldMatrix);
  } else {
    // матрица не передана, поэтому просто используем
    // localMatrix в качестве мировой матрицы worldMatrix
    m4.copy(this.localMatrix, this.worldMatrix);
  }

  // повторяем для всех потомков
  var worldMatrix = this.worldMatrix;
  this.children.forEach(function(child) {
    child.updateWorldMatrix(worldMatrix);
  });
};
</code></pre><p>Для простоты возьмём только Солнце, Землю и Луну. Мы не будем сохранять
пропорции в значениях расстояний между объектами, иначе объекты не
поместятся на экране. У нас будет простая сферическая модель жёлтого цвета
для Солнца, зелёно-голубая сфера для Земли и серая сфера для Луны.
Если <code class="notranslate" translate="no">drawInfo</code>, <code class="notranslate" translate="no">bufferInfo</code> и <code class="notranslate" translate="no">programInfo</code> вам незнакомы, рекомендую
<a href="webgl-drawing-multiple-things.html">ознакомиться с предыдущей статьёй</a>.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// создаём все вершины
var sunNode = new Node();
sunNode.localMatrix = m4.translation(0, 0, 0);  // в центре - Солнце
sunNode.drawInfo = {
  uniforms: {
    u_colorOffset: [0.6, 0.6, 0, 1], // жёлтый
    u_colorMult:   [0.4, 0.4, 0, 1],
  },
  programInfo: programInfo,
  bufferInfo: sphereBufferInfo,
};

var earthNode = new Node();
earthNode.localMatrix = m4.translation(100, 0, 0);  // Землю расположим в 100 единицах от Солнца
earthNode.drawInfo = {
  uniforms: {
    u_colorOffset: [0.2, 0.5, 0.8, 1],  // зелёно-голубой
    u_colorMult:   [0.8, 0.5, 0.2, 1],
  },
  programInfo: programInfo,
  bufferInfo: sphereBufferInfo,
};

var moonNode = new Node();
moonNode.localMatrix = m4.translation(20, 0, 0);  // Луну расположим в 20 единицах от Земли
moonNode.drawInfo = {
  uniforms: {
    u_colorOffset: [0.6, 0.6, 0.6, 1],  // серый
    u_colorMult:   [0.1, 0.1, 0.1, 1],
  },
  programInfo: programInfo,
  bufferInfo: sphereBufferInfo,
};
</code></pre><p>Установим связи между узлами.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// connect the celestial objects
moonNode.setParent(earthNode);
earthNode.setParent(sunNode);
</code></pre><p>Снова создадим список объектов и список объектов для отрисовки.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var objects = [
  sunNode,
  earthNode,
  moonNode,
];

var objectsToDraw = [
  sunNode.drawInfo,
  earthNode.drawInfo,
  moonNode.drawInfo,
];
</code></pre><p>При рендеринге будем обновлять локальную матрицу каждого объекта,
слегка поворачивая его.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// обновляем локальную матрицу каждого объекта
m4.multiply(m4.yRotation(0.01), sunNode.localMatrix  , sunNode.localMatrix);
m4.multiply(m4.yRotation(0.01), earthNode.localMatrix, earthNode.localMatrix);
m4.multiply(m4.yRotation(0.01), moonNode.localMatrix , moonNode.localMatrix);
</code></pre><p>После того, как локальные матрицы обновлены, мы обновим все
мировые матрицы.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">sunNode.updateWorldMatrix();
</code></pre><p>Наконец, мы получили мировые матрицы, и нам нужно умножить их для получения
<a href="webgl-3d-perspective.html">матрицы worldViewProjection</a> для каждого объекта.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// получаем все матрицы для рендеринга
objects.forEach(function(object) {
  object.drawInfo.uniforms.u_matrix = m4.multiply(viewProjectionMatrix, object.worldMatrix);
});
</code></pre><p>Для рендеринга используется <a href="webgl-drawing-multiple-things.html">тот же цикл, что мы использовали
в последней статье</a>.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system.html" target="_blank">нажмите здесь, чтобы открыть в отдельном окне</a>
</div>

</p>
<p>Все объекты у нас получились одного размера. Попробуем сделать Землю больше.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// Землю расположим в 100 единицах от Солнца
earthNode.localMatrix = m4.translation(100, 0, 0);
// делаем Землю в два раза больше
earthNode.localMatrix = m4.scale(earthNode.localMatrix, 2, 2, 2);
</code></pre><p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system-larger-earth.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system-larger-earth.html" target="_blank">нажмите здесь, чтобы открыть в отдельном окне</a>
</div>

</p>
<p>Ой, Луна тоже стала больше. Можно, конечно, вручную сделать Луну меньше.
Но лучшим решением будет добавление вершин в наш граф сцены. Вместо</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  Солнце
   |
  Земля
   |
  Луна
</code></pre><p>У нас будет</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> СолнечнаяСистема
   |    |
   |   Солнце
   |
 ОрбитаЗемли
   |    |
   |  Земля
   |
  ОрбитаЛуны
      |
      Луна
</code></pre><p>Это позволит Земле по-прежнему вращаться в солнечной системе, но
теперь при изменении угла вращения Солнца или его масштаба это никак не
скажется на Земле. Аналогично Земля может вращаться независимо от Луны.
Создадим вершины для <code class="notranslate" translate="no">solarSystem</code>, <code class="notranslate" translate="no">earthOrbit</code> и <code class="notranslate" translate="no">moonOrbit</code>.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var solarSystemNode = new Node();
var earthOrbitNode = new Node();
earthOrbitNode.localMatrix = m4.translation(100, 0, 0);  // Землю расположим в 100 единицах от Солнца
var moonOrbitNode = new Node();
moonOrbitNode.localMatrix = m4.translation(20, 0, 0);  // Луну расположим в 20 единицах от Земли
</code></pre><p>Эти расстояния до орбиты больше не нужны в старых вершинах</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var earthNode = new Node();
-// Землю расположим в 100 единицах от Солнца
-earthNode.localMatrix = m4.translation(100, 0, 0);
-// делаем Землю в два раза больше
-earthNode.localMatrix = m4.scale(earthNode.localMatrix, 2, 2, 2);
+earthNode.localMatrix = m4.scaling(2, 2, 2);   // делаем Землю в два раза больше

var moonNode = new Node();
-moonNode.localMatrix = m4.translation(20, 0, 0);  // Луну расположим в 20 единицах от Земли
</code></pre><p>Теперь связи между ними выглядят так</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// соединяем небесные объекты
sunNode.setParent(solarSystemNode);
earthOrbitNode.setParent(solarSystemNode);
earthNode.setParent(earthOrbitNode);
moonOrbitNode.setParent(earthOrbitNode);
moonNode.setParent(moonOrbitNode);
</code></pre><p>Теперь нам нужно обновить орбиты</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// обновляем локальную матрицу каждого объекта
-m4.multiply(m4.yRotation(0.01), sunNode.localMatrix  , sunNode.localMatrix);
-m4.multiply(m4.yRotation(0.01), earthNode.localMatrix, earthNode.localMatrix);
-m4.multiply(m4.yRotation(0.01), moonNode.localMatrix , moonNode.localMatrix);
+m4.multiply(m4.yRotation(0.01), earthOrbitNode.localMatrix, earthOrbitNode.localMatrix);
+m4.multiply(m4.yRotation(0.01), moonOrbitNode.localMatrix, moonOrbitNode.localMatrix);

// обновляем все мировые матрицы графа сцены
-sunNode.updateWorldMatrix();
+solarSystemNode.updateWorldMatrix();
</code></pre><p>Теперь Земля у нас получилась в два раза больше, а Луна осталась прежней.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system-larger-earth-fixed.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system-larger-earth-fixed.html" target="_blank">нажмите здесь, чтобы открыть в отдельном окне</a>
</div>

</p>
<p>Вы также могли заметить, что Солнце и Земля более не вращаются вместе, они независимы.</p>
<p>Сделаем ещё несколько улучшений</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">-sunNode.localMatrix = m4.translation(0, 0, 0);  // Солнце в центре
+sunNode.localMatrix = m4.scaling(5, 5, 5);

...

+moonNode.localMatrix = m4.scaling(0.4, 0.4, 0.4);

...
// обновляем локальную матрицу каждого объекта
matrixMultiply(earthOrbitNode.localMatrix, m4.yRotation(0.01), earthOrbitNode.localMatrix);
matrixMultiply(moonOrbitNode.localMatrix, m4.yRotation(0.01), moonOrbitNode.localMatrix);
// вращение Солнца
matrixMultiply(sunNode.localMatrix, m4.yRotation(0.005), sunNode.localMatrix);
+// вращение Земли
+m4.multiply(m4.yRotation(0.05), earthNode.localMatrix, earthNode.localMatrix);
+// вращение Луны
+m4.multiply(m4.yRotation(-0.01), moonNode.localMatrix, moonNode.localMatrix);
</code></pre><p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system-adjusted.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system-adjusted.html" target="_blank">нажмите здесь, чтобы открыть в отдельном окне</a>
</div>

</p>
<p>Сейчас у нас есть <code class="notranslate" translate="no">localMatrix</code>, и каждый кадр мы её изменяем. Однако,
здесь кроется небольшая проблема - каждый кадр мы накапливаем ошибку.
Есть способ для устранения этой ошибки, который называется <em>ортонормализация
матрицы</em>, но даже он не всегда помогает. Представим, что мы масштабируем до
нуля, а затем обратно. Возьмём только значение <code class="notranslate" translate="no">x</code></p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">x = 246;       // кадр #0, x = 246

scale = 1;
x = x * scale  // кадр #1, x = 246

scale = 0.5;
x = x * scale  // кадр #2, x = 123

scale = 0;
x = x * scale  // кадр #3, x = 0

scale = 0.5;
x = x * scale  // кадр #4, x = 0  ОЙ!

scale = 1;
x = x * scale  // кадр #5, x = 0  ОЙ!
</code></pre><p>Мы потеряли своё значение. Можно исправить ситуацию через добавление ещё одного
класса, который обновляет матрицу из других значений. Определим <code class="notranslate" translate="no">Node</code>, чтобы у
него был <code class="notranslate" translate="no">source</code>. Если он существует, попросим <code class="notranslate" translate="no">source</code> дать нам локальную матрицу.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">*var Node = function(source) {
  this.children = [];
  this.localMatrix = m4.identity();
  this.worldMatrix = m4.identity();
+  this.source = source;
};

Node.prototype.updateWorldMatrix = function(matrix) {

+  var source = this.source;
+  if (source) {
+    source.getMatrix(this.localMatrix);
+  }

  ...
</code></pre><p>Теперь создадим источник (source). Обычно источник определяет перенос,
поворот и масштабирование примерно следующим образом</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var TRS = function() {
  this.translation = [0, 0, 0];
  this.rotation = [0, 0, 0];
  this.scale = [1, 1, 1];
};

TRS.prototype.getMatrix = function(dst) {
  dst = dst || new Float32Array(16);
  var t = this.translation;
  var r = this.rotation;
  var s = this.scale;

  // вычисляем матрицу по переносу, повороту и масштабированию
  m4.translation(t[0], t[1], t[2], dst);
  matrixMultiply(m4.xRotation(r[0]), dst, dst);
  matrixMultiply(m4.yRotation(r[1]), dst, dst);
  matrixMultiply(m4.zRotation(r[2]), dst, dst);
  matrixMultiply(m4.scaling(s[0], s[1], s[2]), dst, dst);
  return dst;
};
</code></pre><p>Теперь можно использовать источник</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// при инициализации создаём вершину с источником
var someTRS  = new TRS();
var someNode = new Node(someTRS);

// при рендеринге
someTRS.rotation[2] += elapsedTime;
</code></pre><p>Теперь проблема ушла, так как мы каждый раз пересоздаём матрицу.</p>
<p>Возможно, вы думаете &quot;Я не собирался делать солнечную систему, зачем мне
всё это?&quot;. Ну, вы могли бы использовать следующий граф сцены для
создания анимации человека.</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example " style="width: 400px; height: 400px;" src="/webgl/lessons/resources/person-diagram.html"></iframe>
</div>

</p>
<p>Сколько вы добавите суставов для конечностей и пальцев - зависит только
от вас. Чем больше суставов, тем больше ресурсов нужно для вычислений и
анимации, и тем больше анимационных данных необходимо для всех этих
суставов. В старых играх вроде Virtua Fighter было около 15 суставов. Игры
в начале и середине 2000-х содержали от 30 до 70 суставов. Если вы сделаете
каждый сустав на руках, получится по крайней мере 20 на каждой руке,
соответственно 40 суставов для 2 рук. Многие игры для анимации рук считают
большой палец отдельным пальцем, а четыре других пальца - одним единым
пальцем, чтобы сэкономить время (как художника, так и процессора/видеокарты)
и память.</p>
<p>Так или иначе, посмотрите на парня из блоков, которого я смастерил. В нём
используется источник <code class="notranslate" translate="no">TRS</code>, о котором я говорил выше. Искусство и анимация
от программиста, это победа! :P</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-block-guy.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-block-guy.html" target="_blank">нажмите здесь, чтобы открыть в отдельном окне</a>
</div>

</p>
<p>На какую бы 3D-библиотеку вы не взглянули, в ней вы найдёте похожий граф сцены.</p>
<div class="webgl_bottombar">
<h3>SetParent против AddChild / RemoveChild</h3>
<p>Многие графы сцены содержат функции <code class="notranslate" translate="no">node.addChild</code> и <code class="notranslate" translate="no">node.removeChild</code>,
но я использую функцию <code class="notranslate" translate="no">node.setParent</code>. Какой из этих подходов лучше - дело
вкуса, однако я приведу одну причину, когда <code class="notranslate" translate="no">setParent</code> лучше, чем <code class="notranslate" translate="no">addChild</code> -
при его использовании невозможно написать следующий неоднозначный код.</p>
<pre class="prettyprint">
    someParent.addChild(someNode);
    ...
    someOtherParent.addChild(someNode);
</pre>
<p>Что означает этот код? Что <code class="notranslate" translate="no">someNode</code> добавляется и в <code class="notranslate" translate="no">someParent</code>,
и в <code class="notranslate" translate="no">someOtherParent</code>? Но в большинстве графов сцены это невозможно. Тогда при выполнении
этого кода должна возникнуть ошибка <code class="notranslate" translate="no">ОШИБКА: Родитель уже задан</code>? Или же <code class="notranslate" translate="no">someNode</code>
магическим образом открепится от родителя <code class="notranslate" translate="no">someParent</code> и прикрепится к родителю
<code class="notranslate" translate="no">someOtherParent</code>? Из названия функции <code class="notranslate" translate="no">addChild</code> нам это остаётся непонятным.</p>
<p>В <code class="notranslate" translate="no">setParent</code> такой проблемы нет.</p>
<pre class="prettyprint">
    someNode.setParent(someParent);
    ...
    someNode.setParent(someOtherParent);
</pre>
<p>
На 100% понятно, что здесь происходит. Никакой неопределённости.
</p>
</div>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-scene-graph.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-scene-graph.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-scene-graph.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-scene-graph.html" >한국어</a>
    <option value="/webgl/lessons/pl/webgl-scene-graph.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-scene-graph.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-scene-graph.html" selected>Русский</a>
    <option value="/webgl/lessons/uk/webgl-scene-graph.html" >Українська</a>
    <option value="/webgl/lessons/zh_cn/webgl-scene-graph.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>Основы</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-fundamentals.html">Основы WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-how-it-works.html">Как работает WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-shaders-and-glsl.html">Шейдеры и GLSL в WebGL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL State Diagram</a></li>
        </ul>
  <li>Обработка изображений</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-image-processing.html">Обработка изображений в WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-image-processing-continued.html">Продолжаем обработку изображений в WebGL</a></li>
        </ul>
  <li>Математика переноса, поворота и масштабирования в 2D</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-2d-translation.html">2D-перенос в WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-rotation.html">2D-поворот в WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-scale.html">2D-масштабирование в WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-matrices.html">2D-матрицы в WebGL</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-orthographic.html">WebGL 3D - Ортогональ</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-perspective.html">WebGL 3D - Перспектива</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-camera.html">WebGL 3D - Камеры</a></li>
        </ul>
  <li>Освещение</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-lighting-directional.html">WebGL 3D - Направленное освещение</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-lighting-point.html">WebGL 3D - Точечное освещение</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-lighting-spot.html">WebGL 3D - Прожектор</a></li>
        </ul>
  <li>Структура и устройство</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-less-code-more-fun.html">WebGL - Меньше кода, больше веселья</a></li>
<li><a href="/webgl/lessons/ru/webgl-drawing-multiple-things.html">WebGL - Отрисовка нескольких объектов</a></li>
<li><a href="/webgl/lessons/ru/webgl-scene-graph.html">WebGL - Графы сцены</a></li>
        </ul>
  <li>Геометрия</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-geometry-lathe.html">WebGL 3D - Создание модели</a></li>
<li><a href="/webgl/lessons/ru/webgl-load-obj.html">Loading .obj files</a></li>
<li><a href="/webgl/lessons/ru/webgl-load-obj-w-mtl.html">Loading .obj w .mtl files</a></li>
        </ul>
  <li>Текстуры</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-3d-textures.html">WebGL 3D - Текстуры</a></li>
<li><a href="/webgl/lessons/ru/webgl-data-textures.html">WebGL - Данные для текстур</a></li>
<li><a href="/webgl/lessons/ru/webgl-2-textures.html">WebGL - Использование 2 и более текстур</a></li>
<li><a href="/webgl/lessons/ru/webgl-cors-permission.html">WebGL - Кросс-доменные изображения</a></li>
<li><a href="/webgl/lessons/ru/webgl-3d-perspective-correct-texturemapping.html">WebGL 3D - Перспективная коррекция текстур</a></li>
<li><a href="/webgl/lessons/ru/webgl-planar-projection-mapping.html">Planar and Perspective Projection Mapping</a></li>
        </ul>
  <li>Рендеринг в текстуру</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-render-to-texture.html">WebGL - Рендеринг в текстуру</a></li>
        </ul>
  <li>Shadows</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-shadows.html">Shadows</a></li>
        </ul>
  <li>Приёмы</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-2d-drawimage.html">WebGL 2D - DrawImage</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-matrix-stack.html">WebGL 2D - Стек матриц</a></li>
<li><a href="/webgl/lessons/ru/webgl-sprites.html">Sprites</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-cube-maps.html">Cubemaps</a></li>
<li><a href="/webgl/lessons/ru/webgl-environment-maps.html">Environment maps</a></li>
<li><a href="/webgl/lessons/ru/webgl-skybox.html">Skyboxes</a></li>
<li><a href="/webgl/lessons/ru/webgl-skinning.html">Skinning</a></li>
<li><a href="/webgl/lessons/ru/webgl-fog.html">Fog</a></li>
<li><a href="/webgl/lessons/ru/webgl-picking.html">Picking (clicking on stuff)</a></li>
        </ul>
  <li>Текст</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-text-html.html">WebGL текст - HTML</a></li>
<li><a href="/webgl/lessons/ru/webgl-text-canvas2d.html">WebGL текст - Canvas 2D</a></li>
<li><a href="/webgl/lessons/ru/webgl-text-texture.html">WebGL текст - Используем текстуру</a></li>
<li><a href="/webgl/lessons/ru/webgl-text-glyphs.html">WebGL текст - Используем глиф-текстуру</a></li>
        </ul>
  <li>Текстуры</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-ramp-textures.html">Ramp Textures (Toon Shading)</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>Tips</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-smallest-programs.html">Небольшие программы WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-drawing-without-data.html">Drawing Without Data</a></li>
<li><a href="/webgl/lessons/ru/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/ru/webgl-pulling-vertices.html">Pulling Vertices</a></li>
        </ul>
  <li>Optimization</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-indexed-vertices.html">Indexed Vertices (gl.drawElements)</a></li>
<li><a href="/webgl/lessons/ru/webgl-instanced-drawing.html">Instanced Drawing</a></li>
        </ul>
  <li>Разное</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-setup-and-installation.html">WebGL Установка и настройка</a></li>
<li><a href="/webgl/lessons/ru/webgl-boilerplate.html">Шаблон WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-resizing-the-canvas.html">Изменение размера Canvas в WebGL</a></li>
<li><a href="/webgl/lessons/ru/webgl-animation.html">WebGL - Анимация</a></li>
<li><a href="/webgl/lessons/ru/webgl-points-lines-triangles.html">Points, Lines, and Triangles</a></li>
<li><a href="/webgl/lessons/ru/webgl-multiple-views.html">Multiple Views, Multiple Canvases</a></li>
<li><a href="/webgl/lessons/ru/webgl-visualizing-the-camera.html">Visualizing the Camera</a></li>
<li><a href="/webgl/lessons/ru/webgl-and-alpha.html">WebGL и прозрачность</a></li>
<li><a href="/webgl/lessons/ru/webgl-2d-vs-3d-library.html">WebGL - 2D и 3D библиотеки</a></li>
<li><a href="/webgl/lessons/ru/webgl-anti-patterns.html">WebGL - Антипаттерны</a></li>
<li><a href="/webgl/lessons/ru/webgl-matrix-vs-math.html">WebGL Matrices vs Math Matrices</a></li>
<li><a href="/webgl/lessons/ru/webgl-precision-issues.html">Precision Issues</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#screenshot">Taking a screenshot</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#preservedrawingbuffer">Prevent the Canvas Being Cleared</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#tabindex">Get Keyboard Input From a Canvas</a></li>
<li><a href="/webgl/lessons/ru/webgl-tips.html#html-background">Use WebGL as Background in HTML</a></li>
<li><a href="/webgl/lessons/ru/webgl-cross-platform-issues.html">Cross Platform Issues</a></li>
<li><a href="/webgl/lessons/ru/webgl-qna.html">Questions and Answers</a></li>
        </ul>
  <li>Reference</li>
        <ul>
          <li><a href="/webgl/lessons/ru/webgl-attributes.html">Attributes</a></li>
<li><a href="/webgl/lessons/ru/webgl-texture-units.html">Texture Units</a></li>
<li><a href="/webgl/lessons/ru/webgl-framebuffers.html">Framebuffers</a></li>
<li><a href="/webgl/lessons/ru/webgl-readpixels.html">readPixels</a></li>
<li><a href="/webgl/lessons/ru/webgl-references.html">References</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">Документация по вспомогательным функциям</a></li>
  <li><a href="https://twgljs.org">TWGL, лёгкая библиотека-помощник для WebGL</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl-fundamentals">github</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        <div>Нашли ошибку? <a href="https://github.com/gfxfundamentals/webgl-fundamentals/issues">Создайте задачу на github</a>.</div>

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL - Графы сцены';
            var disqus_title = 'WebGL - Графы сцены';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
  owner: "gfxfundamentals",
  repo: "webgl-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
</script>


</html>



