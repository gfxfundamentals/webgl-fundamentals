<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ko/webgl-2d-drawimage.md. Do not edited directly -->
<!--
Copyright 2021 GFXFundamentals.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of GFXFundamentals. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="WebGL에서 Canvas 2D의 drawImage 함수를 구현하는 방법">
<meta name="keywords" content="webgl graphics">
<meta name="thumbnail" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-2d-drawimage_ko.jpg">

<meta property="og:title" content="WebGL DrawImage 구현">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-2d-drawimage_ko.jpg">
<meta property="og:description" content="WebGL에서 Canvas 2D의 drawImage 함수를 구현하는 방법">
<meta property="og:url" content="https://webglfundamentals.org/webgl/lessons/ko/webgl-2d-drawimage.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webglfundamentals.org">
<meta name="twitter:title" content="WebGL DrawImage 구현">
<meta name="twitter:url" content="https://webglfundamentals.org/webgl/lessons/ko/webgl-2d-drawimage.html">
<meta name="twitter:description" content="WebGL에서 Canvas 2D의 drawImage 함수를 구현하는 방법">
<meta name="twitter:image:src" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-2d-drawimage_ko.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webglfundamentals.org/#website",
      "url":"https://webglfundamentals.org/",
      "name":"WebglFundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-2d-drawimage.html#primaryimage",
      "url":"https://webglfundamentals.org/webgl/lessons/screenshots/webgl-2d-drawimage_ko.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-2d-drawimage.html#webpage",
      "url":"https://webglfundamentals.org/webgl/lessons/ko/webgl-2d-drawimage.html",
      "inLanguage":"ko",
      "name":"WebGL DrawImage 구현",
      "keywords":"webgl graphics programming",
      "isPartOf":{
        "@id":"https://webglfundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-2d-drawimage.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL DrawImage 구현</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/ko/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-2d-drawimage.html">
  <link rel="alternate" hreflang="fr" href="https://webglfundamentals.org/webgl/lessons/fr/webgl-2d-drawimage.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-2d-drawimage.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-2d-drawimage.html">
  <link rel="alternate" hreflang="pl" href="https://webglfundamentals.org/webgl/lessons/pl/webgl-2d-drawimage.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-2d-drawimage.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-2d-drawimage.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-2d-drawimage.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-2d-drawimage.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-2d-drawimage.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-2d-drawimage.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-2d-drawimage.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-2d-drawimage.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-2d-drawimage.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-2d-drawimage.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-2d-drawimage.html" >简体中文</a>
</select>


    <a href="#toc">목차</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/ko/">WebGLFundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL DrawImage 구현</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>이 글은 <a href="webgl-3d-orthographic.html">WebGL orthographic 3D</a>에서 이어집니다.
아직 읽지 않았다면 <a href="webgl-3d-orthographic.html">거기</a>부터 시작하는 게 좋습니다.
또한 텍스처와 텍스처 좌표가 어떻게 작동하는지 알아야 하기 때문에 <a href="webgl-3d-textures.html">WebGL 3D 텍스처</a>를 읽어주세요.</p>
<p>2D로 구현하는 대부분의 게임은 이미지를 그리는 단일 함수만 있으면 됩니다.
물론 일부 2D 게임은 선으로 엄청난 작업을 수행하지만 화면에 2D 이미지를 그리는 방법만 있다면 대부분의 2D 게임을 만들 수 있습니다.</p>
<p>Canvas 2D API는 <code class="notranslate" translate="no">drawImage</code>라는 이미지를 그리는 용도의 굉장히 유연한 함수가 있습니다.
이건 3가지 버전을 가지는데요.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">ctx.drawImage(image, dstX, dstY);
ctx.drawImage(image, dstX, dstY, dstWidth, dstHeight);
ctx.drawImage(image, srcX, srcY, srcWidth, srcHeight,
                     dstX, dstY, dstWidth, dstHeight);
</code></pre><p>지금까지 배운 내용을 모두 고려할 때 WebGL에서 이를 어떻게 구현하실 건가요?
첫 번째 해결책은 이 사이트의 첫 번째 글에서 했던 것처럼 정점을 생성하는 겁니다.
정점을 GPU로 보내는 것은 일반적으로 느린 작업입니다.</p>
<p>이게 WebGL의 모든 요점이 작용하는 곳입니다.
창의적으로 셰이더를 작성한 다음 해당 셰이더를 창의적으로 사용하여 문제를 해결하는 것이죠.</p>
<p>첫 번째 버전부터 시작해봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">ctx.drawImage(image, x, y);
</code></pre><p>이건 이미지와 같은 크기로 <code class="notranslate" translate="no">x, y</code> 위치에 이미지를 그리는데요.
비슷한 WebGL 기반의 함수를 만들기 위해 <code class="notranslate" translate="no">x, y</code>, <code class="notranslate" translate="no">x + width, y</code>, <code class="notranslate" translate="no">x, y + height</code>, <code class="notranslate" translate="no">x + width, y + height</code>에 대한 정점을 업로드한 다음, 다른 위치에 다른 이미지를 그릴 때 다른 정점 세트를 생성합니다.</p>
<p>하지만 더 일반적인 방법은 단위 사각형을 사용하는 겁니다.
1단위 크기의 사각형 하나를 업로드합니다.
그런 다음 <a href="webgl-2d-matrices.html">행렬 수학</a>을 사용하여 해당 단위 사각형의 크기를 조정하고 이동시켜 원하는 위치에 있도록 합니다.</p>
<p>먼저 간단한 vertex shader가 필요합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">attribute vec4 a_position;
attribute vec2 a_texcoord;

uniform mat4 u_matrix;

varying vec2 v_texcoord;

void main() {
   gl_Position = u_matrix * a_position;
   v_texcoord = a_texcoord;
}
</code></pre><p>간단한 fragment shader도 필요하죠.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">precision mediump float;

varying vec2 v_texcoord;

uniform sampler2D u_texture;

void main() {
   gl_FragColor = texture2D(u_texture, v_texcoord);
}
</code></pre><p>그리고 이제 함수입니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 이미지와 달리 텍스처는 너비와 높이가 없으므로 텍스처의 너비와 높이를 전달할 겁니다.
function drawImage(tex, texWidth, texHeight, dstX, dstY) {
  gl.bindTexture(gl.TEXTURE_2D, tex);

  // Shader program 쌍을 사용하도록 WebGL에 지시
  gl.useProgram(program);

  // 버퍼에서 데이터를 가져오기 위한 attribute 설정
  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
  gl.enableVertexAttribArray(positionLocation);
  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
  gl.bindBuffer(gl.ARRAY_BUFFER, texcoordBuffer);
  gl.enableVertexAttribArray(texcoordLocation);
  gl.vertexAttribPointer(texcoordLocation, 2, gl.FLOAT, false, 0, 0);

  // 이 행렬은 pixel에서 clip space로 변환합니다.
  var matrix = m4.orthographic(0, gl.canvas.width, gl.canvas.height, 0, -1, 1);

  // 이 행렬은 사각형을 dstX,dstY로 이동시킵니다.
  matrix = m4.translate(matrix, dstX, dstY, 0);

  // 이 행렬은 사각형을 1단위에서 texWidth,texHeight 단위로 크기를 조정합니다.
  matrix = m4.scale(matrix, texWidth, texHeight, 1);

  // 행렬 설정
  gl.uniformMatrix4fv(matrixLocation, false, matrix);

  // texture unit 0에서 텍스처를 가져오도록 셰이더에 지시
  gl.uniform1i(textureLocation, 0);

  // 사각형 그리기 (삼각형 2개, 정점 6개)
  gl.drawArrays(gl.TRIANGLES, 0, 6);
}
</code></pre><p>일부 이미지를 텍스처에 로드합시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 텍스처 정보 생성 { width: w, height: h, texture: tex }
// 텍스처는 1x1 픽셀로 시작하고 이미지가 로드되면 업데이트됩니다.
function loadImageAndCreateTextureInfo(url) {
  var tex = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, tex);

  // 모든 이미지가 2의 거듭 제곱이 아니라고 가정
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

  var textureInfo = {
    width: 1,   // 로드될 때까지 크기를 모름
    height: 1,
    texture: tex,
  };
  var img = new Image();
  img.addEventListener(&#39;load&#39;, function() {
    textureInfo.width = img.width;
    textureInfo.height = img.height;

    gl.bindTexture(gl.TEXTURE_2D, textureInfo.texture);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);
  });

  return textureInfo;
}

var textureInfos = [
  loadImageAndCreateTextureInfo(&#39;resources/star.jpg&#39;),
  loadImageAndCreateTextureInfo(&#39;resources/leaves.jpg&#39;),
  loadImageAndCreateTextureInfo(&#39;resources/keyboard.jpg&#39;),
];
</code></pre><p>그리고 임의의 위치에 그릴 수 있습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var drawInfos = [];
var numToDraw = 9;
var speed = 60;
for (var ii = 0; ii &lt; numToDraw; ++ii) {
  var drawInfo = {
    x: Math.random() * gl.canvas.width,
    y: Math.random() * gl.canvas.height,
    dx: Math.random() &gt; 0.5 ? -1 : 1,
    dy: Math.random() &gt; 0.5 ? -1 : 1,
    textureInfo: textureInfos[Math.random() * textureInfos.length | 0],
  };
  drawInfos.push(drawInfo);
}

function update(deltaTime) {
  drawInfos.forEach(function(drawInfo) {
    drawInfo.x += drawInfo.dx * speed * deltaTime;
    drawInfo.y += drawInfo.dy * speed * deltaTime;
    if (drawInfo.x &lt; 0) {
      drawInfo.dx = 1;
    }
    if (drawInfo.x &gt;= gl.canvas.width) {
      drawInfo.dx = -1;
    }
    if (drawInfo.y &lt; 0) {
      drawInfo.dy = 1;
    }
    if (drawInfo.y &gt;= gl.canvas.height) {
      drawInfo.dy = -1;
    }
  });
}

function draw() {
  gl.clear(gl.COLOR_BUFFER_BIT);

  drawInfos.forEach(function(drawInfo) {
    drawImage(
      drawInfo.textureInfo.texture,
      drawInfo.textureInfo.width,
      drawInfo.textureInfo.height,
      drawInfo.x,
      drawInfo.y);
  });
}

var then = 0;
function render(time) {
  var now = time * 0.001;
  var deltaTime = Math.min(0.1, now - then);
  then = now;

  update(deltaTime);
  draw();

  requestAnimationFrame(render);
}
requestAnimationFrame(render);
</code></pre><p>여기서 실행되는 것을 볼 수 있습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-01.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-01.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>캔버스 <code class="notranslate" translate="no">drawImage</code> 함수의 버전 2를 다뤄봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">ctx.drawImage(image, dstX, dstY, dstWidth, dstHeight);
</code></pre><p>거의 다르지 않습니다.
<code class="notranslate" translate="no">texWidth</code>와 <code class="notranslate" translate="no">texHeight</code>를 대신하여 <code class="notranslate" translate="no">dstWidth</code>와 <code class="notranslate" translate="no">dstHeight</code>를 사용하면 됩니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">*function drawImage(
*    tex, texWidth, texHeight,
*    dstX, dstY, dstWidth, dstHeight) {
+  if (dstWidth === undefined) {
+    dstWidth = texWidth;
+  }
+
+  if (dstHeight === undefined) {
+    dstHeight = texHeight;
+  }

  gl.bindTexture(gl.TEXTURE_2D, tex);

  ...

  // 이 행렬은 pixel에서 clip space로 변환합니다.
  var projectionMatrix = m3.projection(canvas.width, canvas.height, 1);

*  // 이 행렬은 사각형을 1단위에서 dstWidth,dstHeight 단위로 크기 조정합니다.
*  var scaleMatrix = m4.scaling(dstWidth, dstHeight, 1);

  // 이 행렬은 사각형을 dstX,dstY로 이동시킵니다.
  var translationMatrix = m4.translation(dstX, dstY, 0);

  // 모두 함께 곱합니다.
  var matrix = m4.multiply(translationMatrix, scaleMatrix);
  matrix = m4.multiply(projectionMatrix, matrix);

  // 행렬 설정
  gl.uniformMatrix4fv(matrixLocation, false, matrix);

  // texture unit 0에서 텍스처를 가져오도록 셰이더에 지시
  gl.uniform1i(textureLocation, 0);

  // 사각형 그리기 (삼각형 2개, 정점 6개)
  gl.drawArrays(gl.TRIANGLES, 0, 6);
}
</code></pre><p>다른 크기를 사용하도록 코드를 업데이트했습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-02.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-02.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>굉장히 쉬웠네요.
하지만 캔버스 <code class="notranslate" translate="no">drawImage</code>의 3번째 버전은 어떨까요?</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">ctx.drawImage(image, srcX, srcY, srcWidth, srcHeight,
                     dstX, dstY, dstWidth, dstHeight);
</code></pre><p>텍스처의 일부를 선택하려면 텍스처 좌표를 조작해야 합니다.
텍스처 좌표가 작동하는 방식은 <a href="webgl-3d-textures.html">텍스처에 대한 글</a>에서 다뤘습니다.
해당 글에서는 텍스처 좌표를 수동으로 생성했지만 즉석으로 생성할 수도 있으며 행렬을 사용하여 위치를 조작한 것처럼 다른 행렬을 사용하여 비슷하게 텍스처 좌표를 조작할 수 있습니다.</p>
<p>텍스처 행렬을 vertex shader에 추가하고, 텍스처 좌표에 이 텍스처 행렬을 곱해봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">attribute vec4 a_position;
attribute vec2 a_texcoord;

uniform mat4 u_matrix;
+uniform mat4 u_textureMatrix;

varying vec2 v_texcoord;

void main() {
   gl_Position = u_matrix * a_position;
*   v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;
}
</code></pre><p>이제 텍스처 행렬의 위치를 찾아야 합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var matrixLocation = gl.getUniformLocation(program, &quot;u_matrix&quot;);
+var textureMatrixLocation = gl.getUniformLocation(program, &quot;u_textureMatrix&quot;);
</code></pre><p>그리고 <code class="notranslate" translate="no">drawImage</code> 안에서 원하는 텍스처 부분을 선택하도록 설정해야 하는데요.
텍스처 좌표도 사실상 단위 사각형이므로 위치에 대해 작업한 것과 비슷합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">*function drawImage(
*    tex, texWidth, texHeight,
*    srcX, srcY, srcWidth, srcHeight,
*    dstX, dstY, dstWidth, dstHeight) {
+  if (dstX === undefined) {
+    dstX = srcX;
+    srcX = 0;
+  }
+  if (dstY === undefined) {
+    dstY = srcY;
+    srcY = 0;
+  }
+  if (srcWidth === undefined) {
+    srcWidth = texWidth;
+  }
+  if (srcHeight === undefined) {
+    srcHeight = texHeight;
+  }
  if (dstWidth === undefined) {
*    dstWidth = srcWidth;
+    srcWidth = texWidth;
  }
  if (dstHeight === undefined) {
*    dstHeight = srcHeight;
+    srcHeight = texHeight;
  }

  gl.bindTexture(gl.TEXTURE_2D, tex);

  ...

  // 이 행렬은 pixel에서 clip space로 변환합니다.
  var projectionMatrix = m3.projection(canvas.width, canvas.height, 1);

  // 이 행렬은 사각형을 1단위에서 dstWidth,dstHeight 단위로 크기 조정합니다.
  var scaleMatrix = m4.scaling(dstWidth, dstHeight, 1);

  // 이 행렬은 사각형을 dstX,dstY로 이동시킵니다.
  var translationMatrix = m4.translation(dstX, dstY, 0);

  // 모두 함께 곱합니다.
  var matrix = m4.multiply(translationMatrix, scaleMatrix);
  matrix = m4.multiply(projectionMatrix, matrix);

  // 행렬 설정
  gl.uniformMatrix4fv(matrixLocation, false, matrix);

+  // 텍스처 좌표가 0부터 1까지이고 이미 단위 사각형이기 때문에, 단위 사각형를 축소하여 텍스처 영역을 선택할 수 있습니다.
+  var texMatrix = m4.translation(srcX / texWidth, srcY / texHeight, 0);
+  texMatrix = m4.scale(texMatrix, srcWidth / texWidth, srcHeight / texHeight, 1);
+
+  // 텍스처 행렬 설정
+  gl.uniformMatrix4fv(textureMatrixLocation, false, texMatrix);

  // texture unit 0에서 텍스처를 가져오도록 셰이더에 지시
  gl.uniform1i(textureLocation, 0);

  // 사각형 그리기 (삼각형 2개, 정점 6개)
  gl.drawArrays(gl.TRIANGLES, 0, 6);
}
</code></pre><p>또한 텍스처의 일부를 선택하도록 코드를 업데이트했습니다.
여기 결과입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-03.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-03.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>Canvas 2D API와 달리 WebGL 버전은 Canvas 2D <code class="notranslate" translate="no">drawImage</code>가 처리하지 않는 경우를 처리합니다.</p>
<p>한 가지 경우로 source나 dest에 대해 음수 너비와 높이를 전달할 수 있습니다.
음수 <code class="notranslate" translate="no">srcWidth</code>는 <code class="notranslate" translate="no">srcX</code>의 왼쪽에 있는 픽셀을 선택합니다.
음수 <code class="notranslate" translate="no">dstWidth</code>는 <code class="notranslate" translate="no">dstX</code>의 왼쪽에 그려집니다.
Canvas 2D API에서 최선의 경우 에러거나 최악의 경우 정의되지 않은 동작이 발생할 수 있습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-04.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-04.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>다른 하나는 행렬을 사용하고 있기 때문에 원하는 어떤 <a href="webgl-2d-matrices.html">행렬 수학</a>도 할 수 있다는 겁니다.</p>
<p>예를 들어 텍스처의 가운데를 중심으로 텍스처 좌표를 회전시킬 수 있습니다.</p>
<p>텍스처 행렬 코드를 이걸로 변경합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">*  // Clip space가 texture space(0 ~ 1)을 대신한 걸 제외하고는 2D 투영 행렬과 같습니다.
*  // 이 행렬은 우리를 픽셀 공간에 둡니다.
*  var texMatrix = m4.scaling(1 / texWidth, 1 / texHeight, 1);
*
*  // 회전의 중심이 될 곳을 선택해야 합니다.
*  // 가운데로 이동하고, 회전한 다음, 다시 돌아갑니다.
*  var texMatrix = m4.translate(texMatrix, texWidth * 0.5, texHeight * 0.5, 0);
*  var texMatrix = m4.zRotate(texMatrix, srcRotation);
*  var texMatrix = m4.translate(texMatrix, texWidth * -0.5, texHeight * -0.5, 0);
*
*  // 픽셀 공간에 있기 때문에 scale과 translation은 이제 픽셀 단위입니다.
*  var texMatrix = m4.translate(texMatrix, srcX, srcY, 0);
*  var texMatrix = m4.scale(texMatrix, srcWidth, srcHeight, 1);

  // 텍스처 행렬 설정
  gl.uniformMatrix4fv(textureMatrixLocation, false, texMatrix);
</code></pre><p>그리고 여기 결과입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-05.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-05.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>한 가지 문제가 있는데 회전 때문에 가끔씩 텍스처 가장자리의 바깥쪽을 볼 수 있습니다.
<code class="notranslate" translate="no">CLAMP_TO_EDGE</code>로 설정되어 있으므로 가장자리가 반복되는데요.</p>
<p>셰이더 내에서 0부터 1의 범위를 벗어난 픽셀을 버리면 해결할 수 있습니다.
<code class="notranslate" translate="no">discard</code>는 픽셀을 쓰지 않고 즉시 셰이더를 종료합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">precision mediump float;

varying vec2 v_texcoord;

uniform sampler2D texture;

void main() {
+   if (v_texcoord.x &lt; 0.0 ||
+       v_texcoord.y &lt; 0.0 ||
+       v_texcoord.x &gt; 1.0 ||
+       v_texcoord.y &gt; 1.0) {
+     discard;
+   }
   gl_FragColor = texture2D(texture, v_texcoord);
}
</code></pre><p>그리고 이제 모서리가 사라졌습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-06.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-06.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>또는 텍스처 좌표가 텍스처 바깥에 있을 때 단색을 사용할 수도 있습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">precision mediump float;

varying vec2 v_texcoord;

uniform sampler2D texture;

void main() {
   if (v_texcoord.x &lt; 0.0 ||
       v_texcoord.y &lt; 0.0 ||
       v_texcoord.x &gt; 1.0 ||
       v_texcoord.y &gt; 1.0) {
*     gl_FragColor = vec4(0, 0, 1, 1); // blue
+     return;
   }
   gl_FragColor = texture2D(texture, v_texcoord);
}
</code></pre><p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-07.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-07.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>한계란 없습니다.
모든 것은 셰이더를 얼마나 창의적으로 사용하느냐에 달려있습니다.</p>
<p>다음에는 <a href="webgl-2d-matrix-stack.html">Canvas 2D의 행렬 스택을 구현</a>하겠습니다.</p>
<div class="webgl_bottombar">
<h3>가벼운 최적화</h3>
<p>
이 최적화는 추천하고 싶지 않습니다.
WebGL은 제공하는 기능의 창의적인 사용이 전부기 때문에 오히려 더 창의적인 방법을 권장하고 싶습니다.
</p>
<p>
아마 위치에 단위 사각형을 사용하고 이러한 단위 사각형의 위치가 텍스처 좌표와 정확히 일치한다는 걸 눈치채셨을 겁니다.
따라서 위치를 텍스처 좌표처럼 사용할 수 있습니다.
</p>
<pre class="prettyprint showlinemods">
attribute vec4 a_position;
-attribute vec2 a_texcoord;

uniform mat4 u_matrix;
uniform mat4 u_textureMatrix;

varying vec2 v_texcoord;

void main() {
   gl_Position = u_matrix * a_position;
*   v_texcoord = (u_textureMatrix * a_position).xy;
}
</pre>
<p>이제 텍스처 좌표를 설정하는 코드를 지울 수 있으며 이전과 동일하게 작동합니다.</p>
<div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-2d-drawimage-08.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-2d-drawimage-08.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>


</div>


    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-2d-drawimage.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-2d-drawimage.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-2d-drawimage.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-2d-drawimage.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-2d-drawimage.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-2d-drawimage.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-2d-drawimage.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-2d-drawimage.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>기초</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-fundamentals.html">기초</a></li>
<li><a href="/webgl/lessons/ko/webgl-how-it-works.html">작동 원리</a></li>
<li><a href="/webgl/lessons/ko/webgl-shaders-and-glsl.html">셰이더와 GLSL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL 상태 다이어그램</a></li>
        </ul>
  <li>이미지 처리</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-image-processing.html">이미지 처리</a></li>
<li><a href="/webgl/lessons/ko/webgl-image-processing-continued.html">이미지 처리 심화</a></li>
        </ul>
  <li>2D Translation, Rotation, Scale, 행렬 수학</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-translation.html">2D Translation</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-rotation.html">2D Rotation</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-scale.html">2D Scale</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrices.html">2D 행렬</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-orthographic.html">3D Orthographic</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective.html">3D Perspective</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-camera.html">3D 카메라</a></li>
        </ul>
  <li>조명</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-lighting-directional.html">방향성 조명</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-point.html">점 조명</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-spot.html">스포트라이트</a></li>
        </ul>
  <li>구조와 구성</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-less-code-more-fun.html">Less Code, More Fun</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-multiple-things.html">여러 물체 그리기</a></li>
<li><a href="/webgl/lessons/ko/webgl-scene-graph.html">장면 그래프</a></li>
        </ul>
  <li>Geometry</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-geometry-lathe.html">Geometry - Lathe</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj.html">.obj 파일 로딩</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj-w-mtl.html">.mtl 파일로 .obj 로딩</a></li>
        </ul>
  <li>텍스처</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-textures.html">텍스처</a></li>
<li><a href="/webgl/lessons/ko/webgl-data-textures.html">데이터 텍스처</a></li>
<li><a href="/webgl/lessons/ko/webgl-2-textures.html">2개 이상의 텍스처 사용</a></li>
<li><a href="/webgl/lessons/ko/webgl-cors-permission.html">Cross Origin Image</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html">원근 교정 텍스처 매핑</a></li>
<li><a href="/webgl/lessons/ko/webgl-planar-projection-mapping.html">평면 및 원근 투영 매핑</a></li>
        </ul>
  <li>텍스처 렌더링</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-render-to-texture.html">텍스처 렌더링</a></li>
        </ul>
  <li>그림자</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-shadows.html">그림자</a></li>
        </ul>
  <li>기법</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-drawimage.html">2D - DrawImage</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrix-stack.html">2D - 행렬 스택</a></li>
<li><a href="/webgl/lessons/ko/webgl-sprites.html">Sprite</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-cube-maps.html">Cubemap</a></li>
<li><a href="/webgl/lessons/ko/webgl-environment-maps.html">Environment Map</a></li>
<li><a href="/webgl/lessons/ko/webgl-skybox.html">Skybox</a></li>
<li><a href="/webgl/lessons/ko/webgl-skinning.html">Skinning</a></li>
<li><a href="/webgl/lessons/ko/webgl-fog.html">Fog</a></li>
<li><a href="/webgl/lessons/ko/webgl-picking.html">Picking (clicking on stuff)</a></li>
        </ul>
  <li>Text</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-text-html.html">텍스트 - HTML</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-canvas2d.html">텍스트 - Canvas 2D</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-texture.html">텍스트 - 텍스처 사용</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-glyphs.html">텍스트 - Glyph Texture 사용</a></li>
        </ul>
  <li>텍스처</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-ramp-textures.html">Ramp Textures (Toon Shading)</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>Tip</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-smallest-programs.html">최소 프로그램</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-without-data.html">Drawing Without Data</a></li>
<li><a href="/webgl/lessons/ko/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/ko/webgl-pulling-vertices.html">Pulling Vertices</a></li>
        </ul>
  <li>최적화</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-indexed-vertices.html">Indexed Vertices (gl.drawElements)</a></li>
<li><a href="/webgl/lessons/ko/webgl-instanced-drawing.html">Instanced Drawing</a></li>
        </ul>
  <li>Misc</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-setup-and-installation.html">설정 및 설치</a></li>
<li><a href="/webgl/lessons/ko/webgl-boilerplate.html">Boilerplate</a></li>
<li><a href="/webgl/lessons/ko/webgl-resizing-the-canvas.html">Canvas 크기 조정</a></li>
<li><a href="/webgl/lessons/ko/webgl-animation.html">애니메이션</a></li>
<li><a href="/webgl/lessons/ko/webgl-points-lines-triangles.html">점, 선, 삼각형</a></li>
<li><a href="/webgl/lessons/ko/webgl-multiple-views.html">Multiple Views, Multiple Canvases</a></li>
<li><a href="/webgl/lessons/ko/webgl-visualizing-the-camera.html">Visualizing the Camera</a></li>
<li><a href="/webgl/lessons/ko/webgl-and-alpha.html">WebGL Alpha</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-vs-3d-library.html">2D vs 3D 라이브러리</a></li>
<li><a href="/webgl/lessons/ko/webgl-anti-patterns.html">Anti Pattern</a></li>
<li><a href="/webgl/lessons/ko/webgl-matrix-vs-math.html">WebGL 행렬 vs 수학 행렬</a></li>
<li><a href="/webgl/lessons/ko/webgl-precision-issues.html">정밀도 문제</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#screenshot">Screenshot 찍기</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#preservedrawingbuffer">Canvas Clear 방지</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#tabindex">캔버스 키보드 입력</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#html-background">WebGL 배경 제작</a></li>
<li><a href="/webgl/lessons/ko/webgl-cross-platform-issues.html">Cross Platform 문제</a></li>
<li><a href="/webgl/lessons/ko/webgl-qna.html">질문 및 답변</a></li>
        </ul>
  <li>참고</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-attributes.html">Attribute</a></li>
<li><a href="/webgl/lessons/ko/webgl-texture-units.html">Texture Unit</a></li>
<li><a href="/webgl/lessons/ko/webgl-framebuffers.html">Framebuffer</a></li>
<li><a href="/webgl/lessons/ko/webgl-readpixels.html">readPixels</a></li>
<li><a href="/webgl/lessons/ko/webgl-references.html">참고 자료</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">도우미 API 문서</a></li>
  <li><a href="https://twgljs.org">TWGL, 가벼운 WebGL 라이브러리</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Github</a></li>
</ul>

        </div>
    </div>
    <div class="lesson-comments">
        
    <div>이슈/버그는? <a href="https://github.com/gfxfundamentals/webgl-fundamentals/issues">Github</a>에 이슈를 만들어주세요.</div>
    <div class="lesson-comment-notes">
      코드 블록은 <b>&lt;pre&gt;&lt;code&gt;</b>여기에 코드 입력<b>&lt;/code&gt;&lt;/pre&gt;</b>를 사용해주세요
    </div>
  

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL DrawImage 구현';
            var disqus_title = 'WebGL DrawImage 구현';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
  owner: "gfxfundamentals",
  repo: "webgl-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
(function() {
  if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
      return;
  }

  function addScript(src, type, fn) {
    const script = document.createElement('script');
    const firstScript = document.getElementsByTagName('script')[0];
    script.async = true;
    script.defer = true;
    script.type = type || 'javascript';
    if (fn) {
      script.addEventListener('load', fn);
    }
    script.src = src;
    firstScript.parentNode.insertBefore(script, firstScript);
  }

  // can't do this because it would eat contexts
  //addScript('//gpustats.org/stats.js', 'module');

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59804936-1', 'auto');
  ga('send', 'pageview');
}());
</script>


</html>



