<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ko/webgl-3d-lighting-spot.md. Do not edited directly -->
<!--
Copyright 2021 GFXFundamentals.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of GFXFundamentals. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="WebGL에서 spot light를 구현하는 방법">
<meta name="keywords" content="webgl graphics">
<meta name="thumbnail" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-3d-lighting-spot_ko.jpg">

<meta property="og:title" content="WebGL 3D - Spot Lighting">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-3d-lighting-spot_ko.jpg">
<meta property="og:description" content="WebGL에서 spot light를 구현하는 방법">
<meta property="og:url" content="https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-lighting-spot.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webglfundamentals.org">
<meta name="twitter:title" content="WebGL 3D - Spot Lighting">
<meta name="twitter:url" content="https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-lighting-spot.html">
<meta name="twitter:description" content="WebGL에서 spot light를 구현하는 방법">
<meta name="twitter:image:src" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-3d-lighting-spot_ko.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webglfundamentals.org/#website",
      "url":"https://webglfundamentals.org/",
      "name":"WebglFundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-lighting-spot.html#primaryimage",
      "url":"https://webglfundamentals.org/webgl/lessons/screenshots/webgl-3d-lighting-spot_ko.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-lighting-spot.html#webpage",
      "url":"https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-lighting-spot.html",
      "inLanguage":"ko",
      "name":"WebGL 3D - Spot Lighting",
      "keywords":"webgl graphics programming",
      "isPartOf":{
        "@id":"https://webglfundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-lighting-spot.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL 3D - Spot Lighting</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/ko/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-3d-lighting-spot.html">
  <link rel="alternate" hreflang="fr" href="https://webglfundamentals.org/webgl/lessons/fr/webgl-3d-lighting-spot.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-3d-lighting-spot.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-3d-lighting-spot.html">
  <link rel="alternate" hreflang="pl" href="https://webglfundamentals.org/webgl/lessons/pl/webgl-3d-lighting-spot.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-3d-lighting-spot.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-3d-lighting-spot.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-3d-lighting-spot.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-3d-lighting-spot.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-3d-lighting-spot.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-3d-lighting-spot.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-3d-lighting-spot.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-3d-lighting-spot.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-3d-lighting-spot.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-3d-lighting-spot.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-3d-lighting-spot.html" >简体中文</a>
</select>


    <a href="#toc">목차</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/ko/">WebGLFundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL 3D - Spot Lighting</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>이 글은 <a href="webgl-3d-lighting-point.html">WebGL 3D Point Lighting</a>에서 이어집니다.
아직 읽지 않았다면 <a href="webgl-3d-lighting-point.html">거기</a>부터 시작하는 게 좋습니다.</p>
<p>지난 글에서 우리는 조명에서 물체 표면의 모든 지점까지의 방향을 계산하는 point lighting을 다뤘습니다.
그런 다음 <a href="webgl-3d-lighting-directional.html">directional lighting</a>에서 했던 것과 동일하게 표면 법선(표면이 향하는 방향)과 조명 방향의 스칼라곱을 구했는데요.
이는 두 방향이 일치해서 완전히 밝아져야 하는 경우 1이 됩니다.
두 방향이 수직이면 0이고 반대면 -1이 되죠.
조명을 제공한 표면의 색상에 곱하기 위해 해당 값을 사용했습니다.</p>
<p>Spot lighting은 아주 약간 달라집니다.
사실 지금까지 우리가 했던 것에 대해 창의적으로 생각해보면 당신만의 해결책을 도출할 수 있을 겁니다.</p>
<p>Point light는 해당 지점에서 모든 방향으로 진행하는 빛을 가지는 지점이라고 상상할 수 있습니다.
Spot light를 만들기 위해서는 해당 지점에서 spotlight의 방향을 선택하면 됩니다.
그러면 빛이 진행하는 모든 방향에 대해 해당 방향과 우리가 선택한 spotlight 방향의 스칼라곱을 구할 수 있습니다.
임의의 limit를 정하고 해당 limit 내에 있다면 빛나게 됩니다.
해당 limit 내에 없다면 빛나지 않습니다.</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example noborder" style="width: 500px; height: 400px;" src="/webgl/lessons/resources/spot-lighting.html"></iframe>
</div>

</p>
<p>위 다이어그램에서 광선이 모든 방향으로 진행되고 방향에 대한 스칼라곱이 표시되는 것을 볼 수 있습니다.
또한 spotlight의 방향인 특정 <em>방향</em>을 가집니다.
그리고 limit(각도)를 설정하는데요.
Limit로 <em>dot limit</em>를 계산하고, limit의 cosine을 구합니다.
각 광선의 방향에 대한 spotlight 선택 방향의 스칼라곱이 dot limit를 초과하면 조명이 작동합니다.</p>
<p>다른 방법으로 말하기 위해, limit가 20도라고 가정해봅시다.
이걸 radian으로 변환하고 cosine을 적용해서 -1에서 1사이의 값으로 만들 수 있는데요.
이를 dot space라고 부릅시다.
다음은 limit 값에 대한 표입니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">          limits in
 degrees | radians | dot space
 --------+---------+----------
    0    |   0.0   |    1.0
    22   |    .38  |     .93
    45   |    .79  |     .71
    67   |   1.17  |     .39
    90   |   1.57  |    0.0
   180   |   3.14  |   -1.0
</code></pre><p>그런 다음 그냥 확인할 수 있습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">dotFromDirection = dot(surfaceToLight, -lightDirection)
if (dotFromDirection &gt;= limitInDotSpace) {
   // 조명 작동
}
</code></pre><p>그렇게 해봅시다.</p>
<p>먼저 <a href="webgl-3d-lighting-point.html">지난 글</a>의 fragment shader를 수정합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">precision mediump float;

// Vertex shader에서 전달됩니다.
varying vec3 v_normal;
varying vec3 v_surfaceToLight;
varying vec3 v_surfaceToView;

uniform vec4 u_color;
uniform float u_shininess;
+uniform vec3 u_lightDirection;
+uniform float u_limit;          // dot space

void main() {
  // v_normal은 varying이기 때문에 보간되므로 단위 벡터가 아닙니다.
  // 정규화하면 다시 단위 벡터가 됩니다.
  vec3 normal = normalize(v_normal);

  vec3 surfaceToLightDirection = normalize(v_surfaceToLight);
  vec3 surfaceToViewDirection = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);

-  float light = dot(normal, surfaceToLightDirection);
+  float light = 0.0;
  float specular = 0.0;

+  float dotFromDirection = dot(surfaceToLightDirection, -u_lightDirection);
+  if (dotFromDirection &gt;= u_limit) {
*    light = dot(normal, surfaceToLightDirection);
*    if (light &gt; 0.0) {
*      specular = pow(dot(normal, halfVector), u_shininess);
*    }
+  }

  gl_FragColor = u_color;

  // 색상 부분(alpha 제외)에만 light 곱하기
  gl_FragColor.rgb *= light;

  // Specular 더하기
  gl_FragColor.rgb += specular;
}
</code></pre><p>당연히 추가한 uniform의 위치를 찾아야 합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  var lightDirection = [?, ?, ?];
  var limit = degToRad(20);

  ...

  var lightDirectionLocation = gl.getUniformLocation(program, &quot;u_lightDirection&quot;);
  var limitLocation = gl.getUniformLocation(program, &quot;u_limit&quot;);
</code></pre><p>그리고 그걸 설정해야 합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">    gl.uniform3fv(lightDirectionLocation, lightDirection);
    gl.uniform1f(limitLocation, Math.cos(limit));
</code></pre><p>그리고 여기 결과입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-3d-lighting-spot.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-3d-lighting-spot.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>몇 가지 주의할 사항: 위에서 <code class="notranslate" translate="no">u_lightDirection</code>를 음수화하고 있습니다.
그리고 비교하고 있는 두 방향이 일치할 때 같은 방향을 가리키길 원합니다.
즉 surfaceToLightDirection을 spotlight의 반대 방향과 비교해야 합니다.
여러 가지 다른 방법으로 이를 수행할 수 있습니다.
Uniform을 설정할 때 음수 방향을 전달할 수 있는데요.
하지만 uniform을 <code class="notranslate" translate="no">u_reverseLightDirection</code>이나 <code class="notranslate" translate="no">u_negativeLightDirection</code> 대신 <code class="notranslate" translate="no">u_lightDirection</code>이라 부르는 것이 덜 혼란스러울 것 같습니다.</p>
<p>아마 개인 취향일 또 다른 것은 가능하면 shader에서 조건문 쓰고 싶지 않습니다.
그 이유는 사실 shader에는 조건문이 없었기 때문입니다.
만약 조건문을 추가하면 코드에 실제 조건문이 없도록 만들기 위해 여기 저기에 0과 1로 곱하는 코드를 확장합니다.
즉 조건문을 추가하면 조합의 확장으로 코드가 터질 수 있습니다.
지금도 그런지는 모르겠지만 몇 가지 기술을 보여주기 위해 조건문을 제거합시다.
사용 여부는 스스로 결정하시면 됩니다.</p>
<p><code class="notranslate" translate="no">step</code>이라 불리는 GLSL 함수가 있습니다.
2개의 값을 받는데 두 번째 값이 첫 번째 값보다 크거나 같으면 1.0을 반환합니다.
그 외에는 0을 반환합니다.
JavaScript에서는 이렇게 작성할 수 있습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">function step(a, b) {
   if (b &gt;= a) {
       return 1;
   } else {
       return 0;
   }
}
</code></pre><p>조건문을 제거하기 위해 <code class="notranslate" translate="no">step</code>을 사용해봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  float dotFromDirection = dot(surfaceToLightDirection, -u_lightDirection);
  // Spotlight 안에 있다면 inLight는 1이 되고 아니라면 0이 될 겁니다.
  float inLight = step(u_limit, dotFromDirection);
  float light = inLight * dot(normal, surfaceToLightDirection);
  float specular = inLight * pow(dot(normal, halfVector), u_shininess);
</code></pre><p>시각적으로 변한 것은 없지만 여기 결과입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-3d-lighting-spot-using-step.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-3d-lighting-spot-using-step.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>한 가지 다른 점은 현재 spotlight는 굉장히 가혹하다는 겁니다.
Spotlight 안에 있거나 그렇지 않으며 물체는 그냥 검은색으로 변합니다.</p>
<p>이를 고치기 위해 1개 대신 2개의 limit을 사용할 수 있는데, inner limit과 outer limit입니다.
Inner limit 안에 있다면 1.0을 사용합니다.
Outer limit 바깥에 있다면 0.0을 사용합니다.
Inner limit과 outer limit 사이에 있다면 1.0과 0.0사이로 선형 보간합니다.</p>
<p>다음은 이를 수행할 수 있는 한 가지 방법입니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">-uniform float u_limit;          // dot space
+uniform float u_innerLimit;     // dot space
+uniform float u_outerLimit;     // dot space

...

  float dotFromDirection = dot(surfaceToLightDirection, -u_lightDirection);
-  float inLight = step(u_limit, dotFromDirection);
+  float limitRange = u_innerLimit - u_outerLimit;
+  float inLight = clamp((dotFromDirection - u_outerLimit) / limitRange, 0.0, 1.0);
  float light = inLight * dot(normal, surfaceToLightDirection);
  float specular = inLight * pow(dot(normal, halfVector), u_shininess);
</code></pre><p>그리고 이렇게 작동합니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-3d-lighting-spot-falloff.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-3d-lighting-spot-falloff.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>이제 좀 더 spotlight처럼 보이네요!</p>
<p>한 가지 주의해야 할 것은 <code class="notranslate" translate="no">u_innerLimit</code>과 <code class="notranslate" translate="no">u_outerLimit</code>이 같으면 <code class="notranslate" translate="no">limitRange</code>는 0.0이 됩니다.
우리는 <code class="notranslate" translate="no">limitRange</code>로 나누고 있고 0으로 나누는 것은 잘못되었거나 정의되지 않았습니다.
여기서 더 이상 shader에 할 일은 없고 JavaScript에서 <code class="notranslate" translate="no">u_innerLimit</code>가 <code class="notranslate" translate="no">u_outerLimit</code>와 같지 않다는 걸 확인해야 합니다.
(참고: 예제 코드는 이를 수행하지 않습니다)</p>
<p>GLSL에는 이를 약간 단순화하기 위해 사용할 수 있는 함수도 있는데요.
<code class="notranslate" translate="no">smoothstep</code>이라 불리고, <code class="notranslate" translate="no">step</code>처럼 0에서 1사이의 값을 반환하지만, 하한과 상한이 필요하며, 그 범위의 0과 1사이로 선형 보간합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no"> smoothstep(lowerBound, upperBound, value)
</code></pre><p>해봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  float dotFromDirection = dot(surfaceToLightDirection, -u_lightDirection);
-  float limitRange = u_innerLimit - u_outerLimit;
-  float inLight = clamp((dotFromDirection - u_outerLimit) / limitRange, 0.0, 1.0);
  float inLight = smoothstep(u_outerLimit, u_innerLimit, dotFromDirection);
  float light = inLight * dot(normal, surfaceToLightDirection);
  float specular = inLight * pow(dot(normal, halfVector), u_shininess);
</code></pre><p>이 또한 작동합니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-3d-lighting-spot-falloff-using-smoothstep.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-3d-lighting-spot-falloff-using-smoothstep.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>차이점은 <code class="notranslate" translate="no">smoothstep</code>의 경우 선형 보간법 대신 에르미트 보간법을 사용한다는 겁니다.
즉 <code class="notranslate" translate="no">lowerBound</code>와 <code class="notranslate" translate="no">upperBound</code>의 사이에서 아래 오른쪽 이미지처럼 보간하는 반면 선형 보간법은 왼쪽 이미지와 같습니다.</p>
<p><img class="webgl_center invertdark" src="../resources/linear-vs-hermite.png" /></p>
<p>이 차이점을 중요하게 생각할지는 당신에게 달려있습니다.
It&#39;s up to you if you think the difference matters.</p>
<p>한 가지 유의해야 할 다른 점은 <code class="notranslate" translate="no">smoothstep</code> 함수는 <code class="notranslate" translate="no">lowerBound</code>가 <code class="notranslate" translate="no">upperBound</code>보다 크거나 같으면 정의되지 않은 결과를 가진다는 겁니다.
값이 같은 건 우리가 위에서 했던 것과 동일한 이슈입니다.
<code class="notranslate" translate="no">lowerBound</code>가 <code class="notranslate" translate="no">upperBound</code>보다 큰 건 정의되지 않은 새로운 이슈지만 절대 true가 아니어야 하는 spotlight를 목적으로 합니다.</p>
<div class="webgl_bottombar">
<h3>GLSL에서 정의되지 않은 동작을 주의하세요</h3>
<p>
GLSL의 여러 함수들이 어떤 값들에 대해 정의되지 않았습니다.
결과가 허수이기 때문에 <code class="notranslate" translate="no">pow</code>로 음수를 거듭 제곱하려고 하는 게 하나의 예시입니다.
위에서 다른 예시인 <code class="notranslate" translate="no">smoothstep</code>을 살펴봤습니다.
</p>
<p>
이를 주의하지 않으면 shader가 컴퓨터에 따라 다른 결과를 얻을 수 있습니다.
<a href="https://www.khronos.org/files/opengles_shading_language.pdf">스펙의 섹션 8</a>에는 모든 내장 함수의 기능과 더불어 정의되지 않은 동작이 있는지 나열되어 있습니다.
</p>
<p>
다음은 정의되지 않은 동작 목록입니다.
참고로 <code class="notranslate" translate="no">genType</code>은 <code class="notranslate" translate="no">float</code>, <code class="notranslate" translate="no">vec2</code>, <code class="notranslate" translate="no">vec3</code>, <code class="notranslate" translate="no">vec4</code> 등을 의미합니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType asin (genType x)</code></pre>
<p>
Arc sine.
Sine이 x인 각도를 반환합니다.
이 함수에 의해 반환되는 값들의 범위는 [−π/2, π/2]입니다.
∣x∣ > 1일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType acos (genType x)</code></pre>
<p>
Arc cosine.
Cosine이 x인 각도를 반환  합니다.
이 함수에 의해 반환되는 값들의 범위는 [0, π]입니다.
∣x∣ > 1일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType atan (genType y, genType x)</code></pre>
<p>
Arc tangent.
Tangent가 y/x인 각도를 반환합니다.
x와 y의 부호는 각도가 어느 사분면에 있는지 결정하는데 사용됩니다.
이 함수에 의해 반환되는 값들의 범위는 [−π, π]입니다.
x와 y가 모두 0일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType pow (genType x, genType y)</code></pre>
<p>
x를 y로 거듭 제곱한 x<sup>y</sup>를 반환합니다.
x < 0일 때의 결과는 정의되지 않았습니다.
x = 0이고 y <= 0일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType log (genType x)</code></pre>
<p>
x의 자연 로그를 반환합니다.
즉, 방정식 x = e<sup>y</sup>를 만족하는 값 y를 반환합니다.
x <= 0일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType log2 (genType x)</code></pre>
<p>
x의 이진 로그를 반환합니다.
즉, 방정식 x = 2<sup>y</sup>를 만족하는 값 y를 반환합니다.
x <= 0일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType sqrt (genType x)</code></pre>
<p>
√x를 반환합니다.
x < 0일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">genType inversesqrt (genType x)</code></pre>
<p>
1/√x를 반환합니다.
x <= 0일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">
genType clamp (genType x, genType minVal, genType maxVal)
genType clamp (genType x, float minVal, float maxVal)
</code></pre>
<p>
min(max(x, minVal), maxVal)을 반환합니다.
minVal > maxVal일 때의 결과는 정의되지 않았습니다.
</p>
<pre class="prettyprint"><code class="notranslate" translate="no">
genType smoothstep (genType edge0, genType edge1, genType x)
genType smoothstep (float edge0, float edge1, genType x)
</code></pre>
<p>
x <= edge0이면 0.0을 반환하고, x >= edge1이면 1.0을 반환하며, edge0 < x < edge1이면 0과 1의 사이에서 smooth Hermite 보간법을 수행합니다.
이는 smooth transition이 있는 임계 기능을 원하는 경우에 유용한데요.
이건 다음과 동일합니다.
</p>
<pre class="prettyprint">
genType t;
t = clamp ((x – edge0) / (edge1 – edge0), 0, 1);
return t * t * (3 – 2 * t);
</pre>
<p>edge0 >= edge1일 때의 결과는 정의되지 않았습니다.</p>
</div>


    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-3d-lighting-spot.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-3d-lighting-spot.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-3d-lighting-spot.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-3d-lighting-spot.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-3d-lighting-spot.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-3d-lighting-spot.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-3d-lighting-spot.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-3d-lighting-spot.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>기초</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-fundamentals.html">기초</a></li>
<li><a href="/webgl/lessons/ko/webgl-how-it-works.html">작동 원리</a></li>
<li><a href="/webgl/lessons/ko/webgl-shaders-and-glsl.html">Shader 및 GLSL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL 상태 다이어그램</a></li>
        </ul>
  <li>이미지 처리</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-image-processing.html">이미지 처리</a></li>
<li><a href="/webgl/lessons/ko/webgl-image-processing-continued.html">이미지 처리 심화</a></li>
        </ul>
  <li>2D Translation, Rotation, Scale, 행렬 수학</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-translation.html">2D Translation</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-rotation.html">2D Rotation</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-scale.html">2D Scale</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrices.html">2D 행렬</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-orthographic.html">3D 직교법</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective.html">3D 원근법</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-camera.html">3D 카메라</a></li>
        </ul>
  <li>조명</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-lighting-directional.html">Directional Lighting</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-point.html">Point Lighting</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-spot.html">Spot Lighting</a></li>
        </ul>
  <li>구조와 구성</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-less-code-more-fun.html">코드는 적게, 재미는 더</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-multiple-things.html">여러 물체 그리기</a></li>
<li><a href="/webgl/lessons/ko/webgl-scene-graph.html">Scene Graphs</a></li>
        </ul>
  <li>Geometry</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-geometry-lathe.html">Geometry - Lathe</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj.html">Loading .obj files</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj-w-mtl.html">Loading .obj w .mtl files</a></li>
        </ul>
  <li>Texture</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-textures.html">Textures</a></li>
<li><a href="/webgl/lessons/ko/webgl-data-textures.html">Data Textures</a></li>
<li><a href="/webgl/lessons/ko/webgl-2-textures.html">2개 이상의 Texture 사용</a></li>
<li><a href="/webgl/lessons/ko/webgl-cors-permission.html">Cross Origin Images</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html">Perspective Correct Texture Mapping</a></li>
<li><a href="/webgl/lessons/ko/webgl-planar-projection-mapping.html">Planar and Perspective Projection Mapping</a></li>
        </ul>
  <li>Texture 렌더링</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-render-to-texture.html">Render to Texture</a></li>
        </ul>
  <li>그림자</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-shadows.html">Shadows</a></li>
        </ul>
  <li>기법</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-drawimage.html">2D - DrawImage</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrix-stack.html">2D - Matrix Stack</a></li>
<li><a href="/webgl/lessons/ko/webgl-sprites.html">Sprite</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-cube-maps.html">Cubemaps</a></li>
<li><a href="/webgl/lessons/ko/webgl-environment-maps.html">Environment maps</a></li>
<li><a href="/webgl/lessons/ko/webgl-skybox.html">Skyboxes</a></li>
<li><a href="/webgl/lessons/ko/webgl-skinning.html">Skinning</a></li>
<li><a href="/webgl/lessons/ko/webgl-fog.html">Fog</a></li>
<li><a href="/webgl/lessons/ko/webgl-picking.html">Picking (clicking on stuff)</a></li>
        </ul>
  <li>텍스트</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-text-html.html">Text - HTML</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-canvas2d.html">Text - Canvas 2D</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-texture.html">Text - Using a Texture</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-glyphs.html">Text - Using a Glyph Texture</a></li>
        </ul>
  <li>Texture</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-ramp-textures.html">Ramp Textures (Toon Shading)</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>Tip</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-smallest-programs.html">Smallest Programs</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-without-data.html">Drawing Without Data</a></li>
<li><a href="/webgl/lessons/ko/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/ko/webgl-pulling-vertices.html">Pulling Vertices</a></li>
        </ul>
  <li>최적화</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-indexed-vertices.html">Indexed Vertices (gl.drawElements)</a></li>
<li><a href="/webgl/lessons/ko/webgl-instanced-drawing.html">Instanced Drawing</a></li>
        </ul>
  <li>Misc</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-setup-and-installation.html">설정 및 설치</a></li>
<li><a href="/webgl/lessons/ko/webgl-boilerplate.html">Boilerplate</a></li>
<li><a href="/webgl/lessons/ko/webgl-resizing-the-canvas.html">캔버스 크기 조정</a></li>
<li><a href="/webgl/lessons/ko/webgl-animation.html">애니메이션</a></li>
<li><a href="/webgl/lessons/ko/webgl-points-lines-triangles.html">점, 선, 삼각형</a></li>
<li><a href="/webgl/lessons/ko/webgl-multiple-views.html">Multiple Views, Multiple Canvases</a></li>
<li><a href="/webgl/lessons/ko/webgl-visualizing-the-camera.html">Visualizing the Camera</a></li>
<li><a href="/webgl/lessons/ko/webgl-and-alpha.html">WebGL Alpha</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-vs-3d-library.html">2D vs 3D 라이브러리</a></li>
<li><a href="/webgl/lessons/ko/webgl-anti-patterns.html">안티 패턴</a></li>
<li><a href="/webgl/lessons/ko/webgl-matrix-vs-math.html">WebGL 행렬 vs 수학 행렬</a></li>
<li><a href="/webgl/lessons/ko/webgl-precision-issues.html">정밀도 이슈</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#screenshot">스크린샷 찍기</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#preservedrawingbuffer">캔버스 지우기 방지</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#tabindex">캔버스 키보드 입력</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#html-background">WebGL 배경 제작</a></li>
<li><a href="/webgl/lessons/ko/webgl-cross-platform-issues.html">크로스 플랫폼 이슈</a></li>
<li><a href="/webgl/lessons/ko/webgl-qna.html">질문 및 답변</a></li>
        </ul>
  <li>참고</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-attributes.html">Attribute</a></li>
<li><a href="/webgl/lessons/ko/webgl-texture-units.html">Texture Unit</a></li>
<li><a href="/webgl/lessons/ko/webgl-framebuffers.html">Framebuffer</a></li>
<li><a href="/webgl/lessons/ko/webgl-readpixels.html">readPixels</a></li>
<li><a href="/webgl/lessons/ko/webgl-references.html">참고 자료</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">도우미 API 문서</a></li>
  <li><a href="https://twgljs.org">TWGL, 가벼운 WebGL 라이브러리</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Github</a></li>
</ul>

        </div>
    </div>
    <div class="lesson-comments">
        
    <div>이슈/버그는? <a href="https://github.com/gfxfundamentals/webgl-fundamentals/issues">Github</a>에 이슈를 만들어주세요.</div>
    <div class="lesson-comment-notes">
      코드 블록은 <b>&lt;pre&gt;&lt;code&gt;</b>여기에 코드 입력<b>&lt;/code&gt;&lt;/pre&gt;</b>를 사용해주세요
    </div>
  

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL 3D - Spot Lighting';
            var disqus_title = 'WebGL 3D - Spot Lighting';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
  owner: "gfxfundamentals",
  repo: "webgl-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
(function() {
  if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
      return;
  }

  function addScript(src, type, fn) {
    const script = document.createElement('script');
    const firstScript = document.getElementsByTagName('script')[0];
    script.async = true;
    script.defer = true;
    script.type = type || 'javascript';
    if (fn) {
      script.addEventListener('load', fn);
    }
    script.src = src;
    firstScript.parentNode.insertBefore(script, firstScript);
  }

  addScript('//gpustats.org/stats.js', 'module');

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59804936-1', 'auto');
  ga('send', 'pageview');
}());
</script>


</html>



