<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ko/webgl-boilerplate.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of Gregg Tavares. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta property="og:title" content="WebGL Boilerplate" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://webglfundamentals.org/webgl/lessons/resources/webglfundamentals.jpg" />
<meta property="og:description" content="모든 WebGL program에 필요한 코드" />
<meta property="og:url" content="http://webglfundamentals.org/webgl/lessons/ko/webgl-boilerplate.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@greggman" />
<meta name="twitter:creator" content="@greggman" />
<meta name="twitter:domain" content="webglfundamentals.org" />
<meta name="twitter:title" content="WebGL Boilerplate" />
<meta name="twitter:url" content="http://webglfundamentals.org/webgl/lessons/ko/webgl-boilerplate.html" />
<meta name="twitter:description" content="모든 WebGL program에 필요한 코드" />
<meta name="twitter:image:src" content="http://webglfundamentals.org/webgl/lessons/resources/webglfundamentals.jpg" />


<title>WebGL Boilerplate</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css" type="text/css" />
</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-boilerplate.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-boilerplate.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-boilerplate.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-boilerplate.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-boilerplate.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-boilerplate.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-boilerplate.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-boilerplate.html" >简体中文</a>
</select>


    <a href="#toc">목차</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/ko/">WebGLFundamentals.org</a></h1>
</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL Boilerplate</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>이건 <a href="webgl-fundamentals.html">WebGL 기초</a>에서 이어지는 글입니다.
대부분의 WebGL 강의들은 모든걸 한 번에 처리하기 때문에 배우기가 복잡해 보이기도 합니다.
가능한 한 그것을 피하도록 노력하고 더 작게 나눠서 배워봅시다.</p>
<p>WebGL을 복잡해 보이도록 만드는 것들 중 하나는 vertex shader와 fragment shader를 사용한다는 겁니다.
두 함수들은 일반적으로 최대 속도가 나오는 GPU에서 실행되는데요.
그렇기 때문에 GPU에서 수행할 수 있는 언어와 동일한 사용자 정의 언어로 작성됩니다.
이 함수 두 개는 컴파일되고 연결되어야 합니다.
해당 처리는 모든 WebGL program 시간의 99%와 같습니다.</p>
<p>여기 shader를 컴파일 하기 위한 boilerplate 코드입니다.</p>
<pre><code>/**
 * Shader 생성 및 컴파일
 *
 * @param {!WebGLRenderingContext} gl은 WebGL Context
 * @param {string} shaderSource는 shader의 GLSL source 코드
 * @param {number} shaderType은 VERTEX_SHADER 또는 FRAGMENT_SHADER 같은 shader의 종류
 * @return {!WebGLShader} Shader
 */
function compileShader(gl, shaderSource, shaderType) {
  // Shader 객체 생성
  var shader = gl.createShader(shaderType);

  // Shader source 코드 설정.
  gl.shaderSource(shader, shaderSource);

  // Shader 컴파일
  gl.compileShader(shader);

  // 컴파일 여부 확인
  var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
  if (!success) {
    // 컴파일하는 동안 문제 발생; throw error
    throw &quot;could not compile shader:&quot; + gl.getShaderInfoLog(shader);
  }

  return shader;
}
</code></pre><p>그리고 program에 두 shader를 연결하기 위한 boilerplate 코드</p>
<pre><code>/**
 * 두 shader로 program 생성합니다.
 *
 * @param {!WebGLRenderingContext) gl은 WebGL Context
 * @param {!WebGLShader} vertexShader는 vertex shader
 * @param {!WebGLShader} fragmentShader는 fragment shader
 * @return {!WebGLProgram} Program
 */
function createProgram(gl, vertexShader, fragmentShader) {
  // program 생성
  var program = gl.createProgram();

  // shader 할당
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);

  // program 연결
  gl.linkProgram(program);

  // 연결 여부 확인
  var success = gl.getProgramParameter(program, gl.LINK_STATUS);
  if (!success) {
    // 연결에 문제 발생
    throw (&quot;program filed to link:&quot; + gl.getProgramInfoLog (program));
  }

  return program;
};
</code></pre><p>물론 오류를 처리하는 방법은 다를 수 있습니다.
예외를 던지는 것이 오류를 처리하는 최고의 방법은 아니죠.
하지만 대부분의 WebGL program에서 이런 코드 몇 줄은 거의 비슷합니다.</p>
<p>저는 shader를 javascript가 아닌 &lt;script&gt; tag에 저장하는 것을 선호하는데요.
이렇게 하면 코드를 수정하기 쉽게 만들어 주므로 이런 식으로 코드를 작성합니다.</p>
<pre><code>/**
 * script tag의 내용으로 shader 생성
 *
 * @param {!WebGLRenderingContext) gl은 WebGL Context
 * @param {string} scriptId는 script tag의 id
 * @param {string} opt_shaderType는 생성할 shader의 자료형
 *                 전달되지 않으면 script tag의 type 속성 사용
 *
 * @return {!WebGLShader} A shader.
 */
function createShaderFromScript(gl, scriptId, opt_shaderType) {
  // script tag의 id로 탐색
  var shaderScript = document.getElementById(scriptId);

  if (!shaderScript) {
    throw(&quot;*** Error: unknown script element&quot; + scriptId);
  }

  // script tag의 내용 추출
  var shaderSource = shaderScript.text;

  // type을 넘기지 않으면, script tag의 &#39;type&#39; 사용
  if (!opt_shaderType) {
    if (shaderScript.type == &quot;x-shader/x-vertex&quot;) {
      opt_shaderType = gl.VERTEX_SHADER;
    } else if (shaderScript.type == &quot;x-shader/x-fragment&quot;) {
      opt_shaderType = gl.FRAGMENT_SHADER;
    } else if (!opt_shaderType) {
      throw(&quot;*** Error: shader type not set&quot;);
    }
  }

  return compileShader(gl, shaderSource, opt_shaderType);
};
</code></pre><p>이제 shader를 컴파일할 수 있습니다.</p>
<pre><code>var shader = compileShaderFromScript(gl, &quot;someScriptTagId&quot;);
</code></pre><p>보통은 한 걸음 더 나아가서 script tag에서 shader 두 개를 컴파일하고 프로그램에 첨부하고 연결하는 함수를 만들겁니다.</p>
<pre><code>/**
 * script tag 2개로 program 생성
 *
 * @param {!WebGLRenderingContext} gl은 WebGL Context
 * @param {string[]} shaderScriptId는 shader용 script tag의 id 배열입니다.
 *                   첫 번째는 vertex shader, 두 번째는 fragment shader라고 가정합니다.
 *
 * @return {!WebGLProgram} A program
 */
function createProgramFromScripts(gl, shaderScriptIds) {
  var vertexShader = createShaderFromScript(gl, shaderScriptIds[0], gl.VERTEX_SHADER);
  var fragmentShader = createShaderFromScript(gl, shaderScriptIds[1], gl.FRAGMENT_SHADER);
  return createProgram(gl, vertexShader, fragmentShader);
}
</code></pre><p>거의 모든 WebGL program에서 사용하는 다른 코드는 canvas의 크기를 조정하는 코드입니다.
<a href="webgl-resizing-the-canvas.html">여기에서 이 함수가 구현된 방법을</a> 볼 수 있습니다.</p>
<p>모든 예제는 이 두 가지 함수를 포함하고 있습니다.</p>
<pre><code>&lt;script src=&quot;resources/webgl-utils.js&quot;&gt;&lt;/script&gt;
</code></pre><p>그리고 이렇게 사용합니다.</p>
<pre><code>var program = webglUtils.createProgramFromScripts(gl, [idOfVertexShaderScript, idOfFragmentShaderScript]);

...

webglUtils.resizeCanvasToMatchDisplaySize(canvas);
</code></pre><p>특정한 예제에 대해 다룰 때는 같은 코드 여러 줄을 묶어서 예제를 복잡하게 하지 않는 것이 최고입니다.</p>
<p>여기까지가 WebGL boilerplate의 minimum set 입니다.
<a href="../../resources/webgl-utils.js"><code>webgl-utils.js</code></a> 코드는 여기서 찾으실 수 있구요.
좀 더 정리된 것을 원하신다면 <a href="http://twgljs.org">TWGL.js</a>를 확인해주세요.</p>
<p>WebGL을 복잡하게 보이게 만드는 나머지 부분은 shader로 보내는 모든 입력을 설정하는 겁니다.</p>
<p><a href="webgl-how-it-works.html">작동 원리</a>를 봐주세요.</p>
<p>또한 <a href="webgl-less-code-more-fun.html">코드는 적게 재미는 더</a>를 읽고 <a href="http://twgljs.org">TWGL</a>를 확인하는 걸 권장합니다.</p>
<p>참고로 우리가 그것을 추가하는 것과 비슷한 이유로 몇 가지 script가 더 있습니다.</p>
<ul>
<li><p><a href="../../resources/webgl-lessons-ui.js"><code>webgl-lessons-ui.js</code></a></p>
<p>슬라이더를 드래그할 때 갱신되는 표시 값이 있는 슬라이더를 설정하는 코드를 제공합니다.
다시 이 코드를 사용해서 모든 파일을 복잡하게 만들고 싶지 않았습니다.</p>
</li>
<li><p><a href="../../resources/webgl-lessons-helper.js"><code>webgl-lessons-helper.js</code></a></p>
<p>이 script는 webglfundmentals.org를 제외하고는 필요하지 않습니다.
live editor에서 다른 것들과 함께 사용하면 화면에 에러 메세지 출력하는 것을 도와줍니다.</p>
</li>
<li><p><a href="../../resources/m3.js"><code>m3.js</code></a></p>
<p>이건 2d 수학 함수들의 묶음입니다.
행렬 수학에 대한 첫 번째 글부터 시작해서 inline으로 만들어졌습니다.
하지만 너무 복잡하기 때문에 몇몇 예제에서만 이 script가 포함됩니다.</p>
</li>
<li><p><a href="../../resources/m4.js"><code>m4.js</code></a></p>
<p>이건 3d 수학 함수들의 묶음입니다.
3d에 대한 첫 번째 글부터 시작해서 inline으로 만들어졌습니다.
하지만 너무 복잡하기 때문에 3d에 대한 두 번째 글 이후부터 이 script가 포함됩니다.</p>
</li>
</ul>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-boilerplate.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-boilerplate.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-boilerplate.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-boilerplate.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-boilerplate.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-boilerplate.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-boilerplate.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-boilerplate.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>
  <li>기초</li>
  <ul>
    <li><a href="/webgl/lessons/ko/webgl-fundamentals.html">WebGL 기초</a></li>
    <li><a href="/webgl/lessons/ko/webgl-how-it-works.html">WebGL 작동 원리</a></li>
    <li><a href="/webgl/lessons/ko/webgl-shaders-and-glsl.html">WebGL 셰이더와 GLSL</a></li>
  </ul>
  <li>이미지 처리</li>
  <ul>
    <li><a href="/webgl/lessons/ko/webgl-image-processing.html">WebGL 이미지 처리</a></li>
    <li><a href="/webgl/lessons/ko/webgl-image-processing-continued.html">WebGL 이미지 처리 심화</a></li>
  </ul>
  <li>2D 이동, 회전, 크기, 행렬 수학</li>
  <ul>
    <li><a href="/webgl/lessons/ko/webgl-2d-translation.html">WebGL 2D 이동</a></li>
    <li><a href="/webgl/lessons/ko/webgl-2d-rotation.html">WebGL 2D 회전</a></li>
    <li><a href="/webgl/lessons/ko/webgl-2d-scale.html">WebGL 2D 크기</a></li>
    <li><a href="/webgl/lessons/ko/webgl-2d-matrices.html">WebGL 2D 행렬</a></li>
  </ul>
  <li>3D</li>
  <ul>
    <li><a href="/webgl/lessons/ko/webgl-3d-orthographic.html">WebGL - Orthographic 3D</a></li>
    <li><a href="/webgl/lessons/webgl-3d-perspective.html">WebGL 3D Perspective</a></li>
    <li><a href="/webgl/lessons/webgl-3d-camera.html">WebGL 3D - Cameras</a></li>
  </ul>
  <li>Lighting</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-3d-lighting-directional.html">WebGL 3D - Directional Lighting</a></li>
    <li><a href="/webgl/lessons/webgl-3d-lighting-point.html">WebGL 3D - Point Lighting</a></li>
    <li><a href="/webgl/lessons/webgl-3d-lighting-spot.html">WebGL 3D - Spot Lighting</a></li>
  </ul>
  <li>Structure and Organization</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-less-code-more-fun.html">WebGL - Less Code, More Fun</a></li>
    <li><a href="/webgl/lessons/webgl-drawing-multiple-things.html">WebGL - Drawing Multiple Things</a></li>
    <li><a href="/webgl/lessons/webgl-scene-graph.html">WebGL - Scene Graphs</a></li>
  </ul>
  <li>Geometry</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-3d-geometry-lathe.html">WebGL 3D Geometry - Lathe</a></li>
  </ul>
  <li>Textures</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-3d-textures.html">WebGL 3D - Textures</a></li>
    <li><a href="/webgl/lessons/webgl-data-textures.html">WebGL Data Textures</a></li>
    <li><a href="/webgl/lessons/webgl-2-textures.html">WebGL - Using 2 or More Textures</a></li>
    <li><a href="/webgl/lessons/webgl-cors-permission.html">WebGL - Cross Origin Images</a></li>
    <li><a href="/webgl/lessons/webgl-3d-perspective-correct-texturemapping.html">WebGL 3D - Perspective Correct Texture Mapping</a></li>
  </ul>
  <li>Rendering To A Texture</li>
  <ul>
    <li><a href="/webgl/lessons/webgl-render-to-texture.html">WebGL Render to Texture</a></li>
  </ul>
  <li>Techniques</li>
  <ul>
    <li>2D</li>
    <ul>
      <li><a href="/webgl/lessons/webgl-2d-drawimage.html">WebGL 2D - DrawImage</a>
      <li><a href="/webgl/lessons/webgl-2d-matrix-stack.html">WebGL 2D - Matrix Stack</a>
    </ul>
    <li>3D</li>
    <ul>
      <li><a href="/webgl/lessons/webgl-cube-maps.html">WebGL - Cubemaps</a></li>
      <li><a href="/webgl/lessons/webgl-environment-maps.html">WebGL - Environment maps</a></li>
      <li><a href="/webgl/lessons/webgl-skybox.html">WebGL - Skyboxes</a></li>
      <li><a href="/webgl/lessons/webgl-skinning.html">WebGL - Skinning</a></li>
      <li><a href="/webgl/lessons/webgl-fog.html">WebGL - Fog</a></li>
    </ul>
    <li>Text</li>
    <ul>
      <li><a href="/webgl/lessons/webgl-text-html.html">WebGL Text - HTML</a>
      <li><a href="/webgl/lessons/webgl-text-canvas2d.html">WebGL Text - Canvas 2D</a>
      <li><a href="/webgl/lessons/webgl-text-texture.html">WebGL Text - Using a Texture</a>
      <li><a href="/webgl/lessons/webgl-text-glyphs.html">WebGL Text - Using a Glyph Texture</a>
    </ul>
  </ul>
  <li>기타</li>
  <ul>
    <li><a href="/webgl/lessons/ko/webgl-setup-and-installation.html">WebGL 설치</a></li>
    <li><a href="/webgl/lessons/ko/webgl-boilerplate.html">WebGL Boilerplate</a></li>
    <li><a href="/webgl/lessons/ko/webgl-resizing-the-canvas.html">WebGL Canvas 크기 조정</a></li>
    <li><a href="/webgl/lessons/webgl-animation.html">WebGL - Animation</a></li>
    <li><a href="/webgl/lessons/webgl-and-alpha.html">WebGL and Alpha</a></li>
    <li><a href="/webgl/lessons/webgl-2d-vs-3d-library.html">WebGL - 2D vs 3D libraries</a></li>
    <li><a href="/webgl/lessons/webgl-anti-patterns.html">WebGL - Anti-Patterns</a></li>
  </ul>
</ul>
<ul>
  <li><a href="/docs/">API 문서</a></li>
  <li><a href="http://twgljs.org">TWGL, 가벼운 WebGL 라이브러리</a></li>
  <li><a href="https://github.com/greggman/webgl-fundamentals">github</a></li>
</ul>

        </div>
    </div>
    <div class="lesson-comments">
        <div>질문은? <a href="http://stackoverflow.com/questions/tagged/webgl">stackoverflow</a>로 물어봐주세요.</div>
        <div>이슈/버그는? <a href="http://github.com/greggman/webgl-fundamentals/issues">github</a>에 이슈를 만들어주세요.</div>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL Boilerplate';
            var disqus_title = 'WebGL Boilerplate';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js"></script>
<script src="//cdn.webglstats.com/stat.js" defer="defer" async="async"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59804936-1', 'auto');
  ga('send', 'pageview');

</script>


</html>



