<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/zh_cn/webgl-shadows.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of Gregg Tavares. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="å¦‚ä½•è®¡ç®—é˜´å½±">
<meta name="keywords" content="webgl graphics">
<meta name="thumbnail" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-shadows_zh-cn.jpg">

<meta property="og:title" content="WebGL é˜´å½±">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-shadows_zh-cn.jpg">
<meta property="og:description" content="å¦‚ä½•è®¡ç®—é˜´å½±">
<meta property="og:url" content="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shadows.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webglfundamentals.org">
<meta name="twitter:title" content="WebGL é˜´å½±">
<meta name="twitter:url" content="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shadows.html">
<meta name="twitter:description" content="å¦‚ä½•è®¡ç®—é˜´å½±">
<meta name="twitter:image:src" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-shadows_zh-cn.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webglfundamentals.org/#website",
      "url":"https://webglfundamentals.org/",
      "name":"WebglFundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shadows.html#primaryimage",
      "url":"https://webglfundamentals.org/webgl/lessons/screenshots/webgl-shadows_zh-cn.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shadows.html#webpage",
      "url":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shadows.html",
      "inLanguage":"zh-cn",
      "name":"WebGL é˜´å½±",
      "keywords":"webgl graphics programming",
      "isPartOf":{
        "@id":"https://webglfundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shadows.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL é˜´å½±</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-shadows.html">
  <link rel="alternate" hreflang="fr" href="https://webglfundamentals.org/webgl/lessons/fr/webgl-shadows.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-shadows.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-shadows.html">
  <link rel="alternate" hreflang="pl" href="https://webglfundamentals.org/webgl/lessons/pl/webgl-shadows.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-shadows.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-shadows.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-shadows.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-shadows.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-shadows.html" >FranÃ§ais</a>
    <option value="/webgl/lessons/ja/webgl-shadows.html" >æ—¥æœ¬èª</a>
    <option value="/webgl/lessons/ko/webgl-shadows.html" >í•œêµ­ì–´</a>
    <option value="/webgl/lessons/pl/webgl-shadows.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-shadows.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-shadows.html" >Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
    <option value="/webgl/lessons/zh_cn/webgl-shadows.html" selected>ç®€ä½“ä¸­æ–‡</a>
</select>


    <a href="#toc">ç›®å½•</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/zh_cn/">WebGLFundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL é˜´å½±</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>è®©æˆ‘ä»¬ç»˜åˆ¶ä¸€äº›é˜´å½±ï¼</p>
<h2 id="-">å‰ææ¡ä»¶</h2>
<p>è®¡ç®—åŸºæœ¬çš„é˜´å½±å¹¶æ²¡æœ‰<em>é‚£ä¹ˆ</em>éš¾ï¼Œä½†æ˜¯éœ€è¦ä¸€äº›èƒŒæ™¯çŸ¥è¯†ã€‚ä¸ºäº†èƒ½å¤Ÿç†è§£æœ¬æ–‡ï¼Œä½ éœ€è¦å·²ç»ç†è§£ä»¥ä¸‹è¯é¢˜ã€‚</p>
<ul>
<li><a href="webgl-3d-orthographic.html">æ­£å°„æŠ•å½±</a></li>
<li><a href="webgl-3d-perspective.html">é€è§†æŠ•å½±</a></li>
<li><a href="webgl-3d-lighting-spot.html">èšå…‰ç¯</a></li>
<li><a href="webgl-3d-textures.html">çº¹ç†</a></li>
<li><a href="webgl-render-to-texture.html">æ¸²æŸ“åˆ°çº¹ç†</a></li>
<li><a href="webgl-planar-projection-mapping.html">æŠ•å½±çº¹ç†</a></li>
<li><a href="webgl-visualizing-the-camera.html">å¯è§†åŒ–ç›¸æœº</a></li>
</ul>
<p>å› æ­¤ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»è¿‡è¿™äº›è¯é¢˜ï¼Œè¯·å…ˆå»è¯»ä¸€ä¸‹ã€‚</p>
<p>é¦–å…ˆï¼Œæœ¬æ–‡å‡è®¾ä½ å·²ç»è¯»è¿‡ <a href="webgl-less-code-more-fun.html">ç å°‘è¶£å¤š</a>ï¼Œå› ä¸ºæœ¬æ–‡ä½¿ç”¨åˆ°äº†é‚£é‡Œæåˆ°çš„åº“ï¼Œä»¥ä¾¿ä½¿å¾—æœ¬æ–‡çš„ä¾‹å­æ›´æ•´æ´ã€‚å¦‚æœä½ ä¸æ˜ç™½ <code class="notranslate" translate="no">webglUtils.setBuffersAndAttributes</code> å‡½æ•°æ˜¯è®¾ç½® buffers å’Œ attributes çš„ï¼Œæˆ–è€…ä¸æ˜ç™½ <code class="notranslate" translate="no">webglUtils.setUniforms</code> å‡½æ•°æ˜¯è®¾ç½® uniforms çš„ï¼Œç­‰ç­‰ä¹‹ç±»çš„å‡½æ•°ä½ éƒ½ä¸èƒ½ç†è§£ï¼Œé‚£ä¹ˆä½ å¯èƒ½è¦å¾€å› <a href="webgl-fundamentals.html">read the fundamentals</a>ã€‚</p>
<p>é¦–å…ˆï¼Œç»˜åˆ¶é˜´å½±çš„æ–¹æ³•ä¸æ­¢ä¸€ç§ã€‚æ¯ä¸€ç§æ–¹æ³•éƒ½æœ‰å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚ç»˜åˆ¶é˜´å½±æœ€å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨é˜´å½±æ˜ å°„ï¼ˆshadow mapï¼‰ã€‚</p>
<p>é˜´å½±æ˜ å°„æ˜¯é€šè¿‡ç»„åˆä¸Šé¢å‰ææ¡ä»¶æ–‡ç« ä¸­æåˆ°çš„æŠ€æœ¯æ¥å®ç°çš„ã€‚</p>
<p>åœ¨ <a href="webgl-planar-projection-mapping.html">å¹³é¢çš„æŠ•å½±æ˜ å°„æ–‡ç« </a> ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å°†ä¸€å¼ å›¾åƒæŠ•å½±åˆ°ç‰©ä½“ä¸Š</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-planar-projection-with-projection-matrix.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-planar-projection-with-projection-matrix.html" target="_blank">ç‚¹æ­¤åœ¨æ–°çª—å£ä¸­æµè§ˆ</a>
</div>

</p>
<p>å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŠŠé‚£å¼ å›¾åƒç»˜åˆ¶åœ¨åœºæ™¯çš„ç‰©ä½“ä¸Šï¼Œè€Œæ˜¯åœ¨ç‰©ä½“è¢«æ¸²æŸ“çš„æ—¶å€™ï¼Œå¯¹äºæ¯ä¸€ä¸ªåƒç´ ï¼Œæˆ‘ä»¬éƒ½ä¼šæ£€æŸ¥è¢«æŠ•å½±çš„çº¹ç†æ˜¯å¦åœ¨èŒƒå›´å†…ï¼Œå¦‚æœåœ¨èŒƒå›´å†…ï¼Œæˆ‘ä»¬ä¼šä»è¢«æŠ•å½±çš„çº¹ç†ä¸­é‡‡æ ·ç›¸åº”çš„é¢œè‰²ï¼Œå¦‚æœä¸åœ¨èŒƒå›´å†…ï¼Œåˆ™æˆ‘ä»¬å°±ä¼šä»å¦ä¸€ä¸ªä¸åŒçš„çº¹ç†ä¸­é‡‡æ ·ä¸€ä¸ªé¢œè‰²ï¼Œçº¹ç†çš„é¢œè‰²æ˜¯é€šè¿‡ä½¿ç”¨çº¹ç†åæ ‡è¿›è¡ŒæŸ¥æ‰¾çš„ï¼Œçº¹ç†åæ ‡æŠŠä¸€ä¸ªçº¹ç†æ˜ å°„åˆ°äº†ç‰©ä½“ä¸Šã€‚</p>
<p>å¦‚æœè¢«æŠ•å½±çš„çº¹ç†é‡ŒåŒ…å«äº†æ¥è‡ªå…‰æºè§†è§’çš„æ·±åº¦æ•°æ®ï¼Œåˆ™ä¼šæ€ä¹ˆæ ·ï¼Ÿæ¢å¥è¯è¯´ï¼Œå‡è®¾ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåœ¨è§†æ¤ä½“çš„é¡¶ç«¯æœ‰ä¸€ä¸ªå…‰æºï¼Œè€Œè¢«æŠ•å½±çš„çº¹ç†åŒ…å«äº†åœ¨è¯¥å…‰æºè§†è§’ä¸‹çš„æ·±åº¦ä¿¡æ¯ã€‚ç»“æœæ˜¯ï¼Œçƒä½“ä¼šå¾—åˆ°ä¸€ä¸ªæ›´åŠ æ¥è¿‘å…‰æºçš„æ·±åº¦å€¼ï¼Œè€Œå¹³é¢ä¼šå¾—åˆ°ä¸€ä¸ªç¨å¾®è¿œç¦»å…‰æºçš„æ·±åº¦å€¼ã€‚</p>
<div class="webgl_center"><img class="noinvertdark" src="../resources/depth-map-generation.svg" style="width: 600px;"></div>

<p>å¦‚æœæˆ‘ä»¬å…·æœ‰äº†è¿™äº›æ·±åº¦ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨é€‰æ‹©è¦æ¸²æŸ“å“ªä¸ªé¢œè‰²çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»è¢«æŠ•å½±çš„çº¹ç†ä¸­è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°ä¸€ä¸ªé‡‡æ ·æ·±åº¦å€¼ï¼Œç„¶åå’Œå½“å‰æ­£åœ¨ç»˜åˆ¶çš„åƒç´ çš„æ·±åº¦å€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœå½“å‰åƒç´ çš„æ·±åº¦å€¼æ¯”é‡‡æ ·å¾—åˆ°çš„æ·±åº¦å€¼å¤§ï¼Œåˆ™è¯´æ˜è¿˜æœ‰å…¶ä»–ä¸œè¥¿æ¯”å½“å‰åƒç´ æ›´åŠ æ¥è¿‘å…‰æºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸæ ·ä¸œè¥¿æŒ¡ä½äº†å…‰æºï¼Œå› æ­¤è¯¥åƒç´ æ˜¯å¤„äºé˜´å½±ä¸­çš„ã€‚</p>
<div class="webgl_center"><img class="noinvertdark" src="../resources/projected-depth-texture.svg" style="width: 600px;"></div>

<p>å…¶ä¸­ï¼Œæ·±åº¦çº¹ç†è¢«æŠ•å½±åˆ°å…‰æºè§†è§’ä¸‹çš„è§†æ¤ä½“å†…ã€‚å½“æˆ‘ä»¬ç»˜åˆ¶åœ°æ¿çš„åƒç´ æ—¶ï¼Œæˆ‘ä»¬ä¼šè®¡ç®—åœ¨å…‰æºè§†è§’ä¸‹ï¼Œè¯¥åƒç´ çš„æ·±åº¦å€¼ï¼ˆåœ¨ä¸Šå›¾ä¸­æ˜¯ 0.3ï¼‰ã€‚ç„¶åæˆ‘ä»¬åœ¨è¢«æŠ•å½±çš„æ·±åº¦çº¹ç†ä¸­æ‰¾åˆ°å¯¹åº”çš„æ·±åº¦å€¼ã€‚åœ¨å…‰æºè§†è§’ä¸‹ï¼Œçº¹ç†å†…çš„æ·±åº¦å€¼æ˜¯ 0.1ï¼Œå› ä¸ºå…‰çº¿é¦–å…ˆå‡»ä¸­çš„æ˜¯çƒä½“ã€‚å› ä¸º 0.1 &lt; 0.3ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“è¯¥ä½ç½®çš„åœ°æ¿ä¸€å®šåœ¨é˜´å½±å†…ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥ç»˜åˆ¶é˜´å½±æ˜ å°„ã€‚æˆ‘ä»¬ä¼šå– <a href="webgl-planar-projection-mapping.html">å¹³é¢çš„æŠ•å½±æ˜ å°„æ–‡ç« </a> çš„æœ€åä¸€ä¸ªç¤ºä¾‹ï¼Œä½†æˆ‘ä»¬å¹¶ä¸æ˜¯åŠ è½½ä¸€ä¸ªçº¹ç†ï¼Œæˆ‘ä»¬ä¼š <a href="webgl-render-to-texture.html">æ¸²æŸ“åˆ°çº¹ç†</a>ã€‚åœ¨ <a href="webgl-render-to-texture.html">é‚£ç¯‡æ–‡ç« </a> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ·±åº¦æ¸²æŸ“ç¼“å†²ã€‚è¿™ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ·±åº¦ç¼“å†²ï¼Œä»¥å¸®åŠ©å¯¹åƒç´ çš„æ’åºï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ä½¿ç”¨ä¸€ä¸ªæ·±åº¦æ¸²æŸ“ç¼“å†²ä½œä¸ºä¸€ä¸ªçº¹ç†è¾“å…¥åˆ°ç€è‰²å™¨ä¸­ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªåä¸º <code class="notranslate" translate="no">WEBGL_depth_texture</code> çš„ WebGL æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å¼€å¯è¯¥æ‰©å±•ï¼Œå®ƒä¼šç»™æˆ‘ä»¬æä¾›æ·±åº¦çº¹ç†ã€‚æœ‰äº†æ·±åº¦çº¹ç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒé™„åŠ åˆ°ä¸€ä¸ªå¸§ç¼“å†² ä¸Šï¼Œç„¶åä½¿ç”¨è¯¥çº¹ç†ä½œä¸ºç€è‰²å™¨çš„è¾“å…¥ã€‚æ£€æŸ¥å¹¶å¼€å¯è¯¥æ‰©å±•çš„ä»£ç æ˜¯ï¼š</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">function main() {
  // è·å¾—ä¸€ä¸ª WebGL context
  /** @type {HTMLCanvasElement} */
  const canvas = document.querySelector(&#39;#canvas&#39;);
  const gl = canvas.getContext(&#39;webgl&#39;);
  if (!gl) {
    return;
  }

+  const ext = gl.getExtension(&#39;WEBGL_depth_texture&#39;);
+  if (!ext) {
+    return;
+  }
}
</code></pre>
<p>ç°åœ¨ï¼Œå’Œ <a href="webgl-render-to-texture.html">æ¸²æŸ“åˆ°çº¹ç†æ–‡ç« </a> ä¸­çš„ç±»ä¼¼ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¹ç†å’Œä¸€ä¸ªå¸§ç¼“å†²ï¼Œç„¶åæŠŠè¯¥çº¹ç†ä½œä¸º <code class="notranslate" translate="no">DEPTH_ATTACHMENT</code> é™„åŠ åˆ°å¸§ç¼“å†²ä¸Šã€‚</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">const depthTexture = gl.createTexture();
const depthTextureSize = 512;
gl.bindTexture(gl.TEXTURE_2D, depthTexture);
gl.texImage2D(
    gl.TEXTURE_2D,      // target
    0,                  // mip level
    gl.DEPTH_COMPONENT, // internal format
    depthTextureSize,   // width
    depthTextureSize,   // height
    0,                  // border
    gl.DEPTH_COMPONENT, // format
    gl.UNSIGNED_INT,    // type
    null);              // data
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

const depthFramebuffer = gl.createFramebuffer();
gl.bindFramebuffer(gl.FRAMEBUFFER, depthFramebuffer);
gl.framebufferTexture2D(
    gl.FRAMEBUFFER,       // target
    gl.DEPTH_ATTACHMENT,  // attachment point
    gl.TEXTURE_2D,        // texture target
    depthTexture,         // texture
    0);                   // mip level
</code></pre>
<p><a href="#attachment-combinations">ç”±äºç§ç§åŸå› </a>ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªé¢œè‰²çº¹ç†å¹¶æŠŠå®ƒä½œä¸ºä¸€ä¸ª color attachment é™„åŠ åˆ°å¸§ç¼“å†²ä¸Šï¼Œå³ä½¿æˆ‘ä»¬å¹¶ä¸ä¼šä½¿ç”¨å®ƒã€‚</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">// åˆ›å»ºä¸€ä¸ªå’Œæ·±åº¦çº¹ç†ç›¸åŒå°ºå¯¸çš„é¢œè‰²çº¹ç†
const unusedTexture = gl.createTexture();
gl.bindTexture(gl.TEXTURE_2D, unusedTexture);
gl.texImage2D(
    gl.TEXTURE_2D,
    0,
    gl.RGBA,
    depthTextureSize,
    depthTextureSize,
    0,
    gl.RGBA,
    gl.UNSIGNED_BYTE,
    null,
);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

// æŠŠå®ƒé™„åŠ åˆ°è¯¥å¸§ç¼“å†²ä¸Š
gl.framebufferTexture2D(
    gl.FRAMEBUFFER,        // target
    gl.COLOR_ATTACHMENT0,  // attachment point
    gl.TEXTURE_2D,         // texture target
    unusedTexture,         // texture
    0);                    // mip level
</code></pre>
<p>ä¸ºäº†ä½¿ç”¨æ·±åº¦çº¹ç†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦èƒ½å¤Ÿä½¿ç”¨ä¸åŒçš„ç€è‰²å™¨æ¥æ¸²æŸ“åœºæ™¯å¤šæ¬¡ã€‚ä¸€æ¬¡æ˜¯ä¸€ä¸ªç®€å•çš„ç€è‰²å™¨ï¼Œåªæ˜¯ä¸ºäº†æ¸²æŸ“åˆ°æ·±åº¦çº¹ç†ä¸Šï¼Œç„¶åå†ä½¿ç”¨æˆ‘ä»¬å½“å‰çš„ç€è‰²å™¨ï¼Œè¯¥ç€è‰²å™¨ä¼šæŠ•å½±ä¸€ä¸ªçº¹ç†ã€‚</p>
<p>å› æ­¤ï¼Œé¦–å…ˆè®©æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹ <code class="notranslate" translate="no">drawScene</code> å‡½æ•°ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¼ å…¥æˆ‘ä»¬æƒ³è¦ç”¨æ¥æ¸²æŸ“çš„ç€è‰²å™¨ç¨‹åº</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">-function drawScene(projectionMatrix, cameraMatrix, textureMatrix) {
+function drawScene(projectionMatrix, cameraMatrix, textureMatrix, programInfo) {
  // ä»ç›¸æœºçŸ©é˜µä¸­åˆ›å»ºä¸€ä¸ªè§†å›¾çŸ©é˜µ
  const viewMatrix = m4.inverse(cameraMatrix);

-  gl.useProgram(textureProgramInfo.program);
+  gl.useProgram(programInfo.program);

  // è®¾ç½®å¯¹äºçƒä½“å’Œå¹³é¢éƒ½æ˜¯ä¸€æ ·çš„ uniforms
  // æ³¨æ„ï¼šåœ¨ç€è‰²å™¨ä¸­ï¼Œä»»ä½•æ²¡æœ‰å¯¹åº” uniform çš„å€¼éƒ½ä¼šè¢«å¿½ç•¥ã€‚
-  webglUtils.setUniforms(textureProgramInfo, {
+  webglUtils.setUniforms(programInfo, {
    u_view: viewMatrix,
    u_projection: projectionMatrix,
*    u_textureMatrix: textureMatrix,
-    u_projectedTexture: imageTexture,
+    u_projectedTexture: depthTexture,
  });

  // ------ ç»˜åˆ¶çƒä½“ --------

  // è®¾ç½®æ‰€æœ‰éœ€è¦çš„ attributes
-  webglUtils.setBuffersAndAttributes(gl, textureProgramInfo, sphereBufferInfo);
+  webglUtils.setBuffersAndAttributes(gl, programInfo, sphereBufferInfo);

  // è®¾ç½®çƒä½“ç‰¹æœ‰çš„ uniforms
-  webglUtils.setUniforms(textureProgramInfo, sphereUniforms);
+  webglUtils.setUniforms(programInfo, sphereUniforms);

  // è°ƒç”¨ gl.drawArrays æˆ– gl.drawElements
  webglUtils.drawBufferInfo(gl, sphereBufferInfo);

  // ------ ç»˜åˆ¶å¹³é¢ --------

  // è®¾ç½®æ‰€æœ‰éœ€è¦çš„ attributes
-  webglUtils.setBuffersAndAttributes(gl, textureProgramInfo, planeBufferInfo);
+  webglUtils.setBuffersAndAttributes(gl, programInfo, planeBufferInfo);

  // è®¾ç½®æˆ‘ä»¬åˆšåˆšè®¡ç®—çš„ uniforms
-  webglUtils.setUniforms(textureProgramInfo, planeUniforms);
+  webglUtils.setUniforms(programInfo, planeUniforms);

  // è°ƒç”¨ gl.drawArrays æˆ– gl.drawElements
  webglUtils.drawBufferInfo(gl, planeBufferInfo);
}
</code></pre>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨è¯¥å‡½æ•°ä»å…‰æºè§†è§’ç»˜åˆ¶ä¸€æ¬¡åœºæ™¯ï¼Œç„¶åä½¿ç”¨æ·±åº¦çº¹ç†å†ç»˜åˆ¶ä¸€æ¬¡åœºæ™¯</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">function render() {
  webglUtils.resizeCanvasToDisplaySize(gl.canvas);

  gl.enable(gl.CULL_FACE);
  gl.enable(gl.DEPTH_TEST);

  // é¦–å…ˆä»å…‰æºçš„è§†è§’ç»˜åˆ¶ä¸€æ¬¡
-  const textureWorldMatrix = m4.lookAt(
+  const lightWorldMatrix = m4.lookAt(
      [settings.posX, settings.posY, settings.posZ],          // position
      [settings.targetX, settings.targetY, settings.targetZ], // target
      [0, 1, 0],                                              // up
  );
-  const textureProjectionMatrix = settings.perspective
+  const lightProjectionMatrix = settings.perspective
      ? m4.perspective(
          degToRad(settings.fieldOfView),
          settings.projWidth / settings.projHeight,
          0.5,  // near
          10)   // far
      : m4.orthographic(
          -settings.projWidth / 2,   // left
           settings.projWidth / 2,   // right
          -settings.projHeight / 2,  // bottom
           settings.projHeight / 2,  // top
           0.5,                      // near
           10);                      // far

+  // ç»˜åˆ¶åˆ°æ·±åº¦çº¹ç†
+  gl.bindFramebuffer(gl.FRAMEBUFFER, depthFramebuffer);
+  gl.viewport(0, 0, depthTextureSize, depthTextureSize);
+  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

-  drawScene(textureProjectionMatrix, textureWorldMatrix, m4.identity());
+  drawScene(lightProjectionMatrix, lightWorldMatrix, m4.identity(), colorProgramInfo);

+  // ç°åœ¨ç»˜åˆ¶åœºæ™¯åˆ°ç”»å¸ƒï¼ŒæŠŠæ·±åº¦çº¹ç†æŠ•å½±åˆ°åœºæ™¯å†…
+  gl.bindFramebuffer(gl.FRAMEBUFFER, null);
+  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
+  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

  let textureMatrix = m4.identity();
  textureMatrix = m4.translate(textureMatrix, 0.5, 0.5, 0.5);
  textureMatrix = m4.scale(textureMatrix, 0.5, 0.5, 0.5);
-  textureMatrix = m4.multiply(textureMatrix, textureProjectionMatrix);
+  textureMatrix = m4.multiply(textureMatrix, lightProjectionMatrix);
  // ä½¿ç”¨è¯¥ä¸–ç•ŒçŸ©é˜µçš„é€†çŸ©é˜µæ¥åˆ›å»ºä¸€ä¸ª
  // å¯ä»¥å˜æ¢å…¶ä»–åæ ‡ä¸ºç›¸å¯¹äºè¿™ä¸ªä¸–ç•Œç©ºé—´
  // çš„çŸ©é˜µã€‚
  textureMatrix = m4.multiply(
      textureMatrix,
-      m4.inverse(textureWorldMatrix));
+      m4.inverse(lightWorldMatrix));

  // è®¡ç®—æŠ•å½±çŸ©é˜µ
  const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;
  const projectionMatrix =
      m4.perspective(fieldOfViewRadians, aspect, 1, 2000);

  // ä½¿ç”¨ look at è®¡ç®—ç›¸æœºçš„çŸ©é˜µ
  const cameraPosition = [settings.cameraX, settings.cameraY, 7];
  const target = [0, 0, 0];
  const up = [0, 1, 0];
  const cameraMatrix = m4.lookAt(cameraPosition, target, up);

-  drawScene(projectionMatrix, cameraMatrix, textureMatrix); 
+  drawScene(projectionMatrix, cameraMatrix, textureMatrix, textureProgramInfo); 
}
</code></pre>
<p>æ³¨æ„ï¼Œæˆ‘æŠŠ <code class="notranslate" translate="no">textureWorldMatrix</code> é‡å‘½åæˆäº† <code class="notranslate" translate="no">lightWorldMatrix</code>ï¼Œè€Œ <code class="notranslate" translate="no">textureProjectionMatrix</code> é‡å‘½åæˆäº† <code class="notranslate" translate="no">lightProjectionMatrix</code>ã€‚å®ƒä»¬å’Œä¹‹å‰è¿˜æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¹‹å‰æˆ‘ä»¬æ˜¯æŠ•å½±çº¹ç†åˆ°ä¸€ä¸ªä»»æ„ç©ºé—´å†…çš„ã€‚ç°åœ¨æˆ‘ä»¬å°è¯•ä»å…‰æºè§†è§’æŠ•å½±ä¸€ä¸ªé˜´å½±æ˜ å°„ã€‚åœ¨æ•°å­¦ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œä½†é‡å‘½åè¿™äº›å˜é‡ä¼¼ä¹æ›´åˆé€‚ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ä¹‹å‰ç»˜åˆ¶è§†æ¤ä½“çº¿æ¡†çš„ç€è‰²å™¨æ¥æ¸²æŸ“çƒä½“å’Œå¹³é¢åˆ°æ·±åº¦çº¹ç†ä¸­ã€‚é‚£ä¸ªç€è‰²å™¨åªä¼šç»˜åˆ¶äº†çº¯è‰²çš„ä¸œè¥¿ï¼Œå¹¶æ²¡æœ‰åšä»€ä¹ˆç‰¹åˆ«çš„äº‹æƒ…ï¼Œè¿™å°±æ˜¯å½“æ¸²æŸ“åˆ°æ·±åº¦çº¹ç†æ—¶æˆ‘ä»¬æ‰€éœ€è¦åšçš„å…¨éƒ¨äº‹æƒ…ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å†æ¸²æŸ“åœºæ™¯åˆ°ç”»å¸ƒä¸­ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰åšçš„é‚£æ ·ï¼ŒæŠŠçº¹ç†æŠ•å½±åˆ°åœºæ™¯å†…ã€‚å½“æˆ‘ä»¬åœ¨ç€è‰²å™¨å†…å¼•ç”¨æ·±åº¦çº¹ç†æ—¶ï¼Œåªæœ‰çº¢è‰²åˆ†é‡æ˜¯æœ‰æ•ˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šé‡å¤çº¢è‰²åˆ†é‡ä½œä¸ºç»¿è‰²åˆ†é‡å’Œè“è‰²åˆ†é‡ã€‚</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-glsl">void main() {
  vec3 projectedTexcoord = v_projectedTexcoord.xyz / v_projectedTexcoord.w;
  bool inRange = 
      projectedTexcoord.x &gt;= 0.0 &amp;&amp;
      projectedTexcoord.x &lt;= 1.0 &amp;&amp;
      projectedTexcoord.y &gt;= 0.0 &amp;&amp;
      projectedTexcoord.y &lt;= 1.0;

-  vec4 projectedTexColor = texture2D(u_projectedTexture, projectedTexcoord.xy);
+  // &#39;r&#39; é€šé“å†…åŒ…å«æ·±åº¦å€¼
+  vec4 projectedTexColor = vec4(texture2D(u_projectedTexture, projectedTexcoord.xy).rrr, 1);
  vec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;
  float projectedAmount = inRange ? 1.0 : 0.0;
  gl_FragColor = mix(texColor, projectedTexColor, projectedAmount);
}
</code></pre>
<p>è¶æ­¤æœºä¼šï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç«‹æ–¹ä½“åˆ°åœºæ™¯ä¸­</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">+const cubeBufferInfo = primitives.createCubeBufferInfo(
+    gl,
+    2,  // size
+);

...

+const cubeUniforms = {
+  u_colorMult: [0.5, 1, 0.5, 1],  // ç»¿è‰²çš„å…‰æº
+  u_color: [0, 0, 1, 1],
+  u_texture: checkerboardTexture,
+  u_world: m4.translation(3, 1, 0),
+};

...

function drawScene(projectionMatrix, cameraMatrix, textureMatrix, programInfo) {

    ...

+    // ------ ç»˜åˆ¶ç«‹æ–¹ä½“ --------
+
+    // è®¾ç½®æ‰€éœ€è¦çš„æ‰€æœ‰ attributes
+    webglUtils.setBuffersAndAttributes(gl, programInfo, cubeBufferInfo);
+
+    // è®¾ç½®æˆ‘ä»¬åˆšåˆšè®¡ç®—çš„ uniforms
+    webglUtils.setUniforms(programInfo, cubeUniforms);
+
+    // è°ƒç”¨ gl.drawArrays æˆ– gl.drawElements
+    webglUtils.drawBufferInfo(gl, cubeBufferInfo);

...
</code></pre>
<p>ç„¶åè®©æˆ‘ä»¬æ¥è°ƒæ•´ä¸€ä¸‹è®¾ç½®ã€‚æˆ‘ä»¬ä¼šç§»åŠ¨ç›¸æœºå’Œä¸ºäº†ä½¿çº¹ç†æŠ•å½±å¯ä»¥è¦†ç›–åˆ°çš„èŒƒå›´æ›´å¤§ï¼Œæˆ‘ä»¬ä¼šåŠ å®½è§†åœºè§’ã€‚</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">const settings = {
-  cameraX: 2.5,
+  cameraX: 6,
  cameraY: 5,
  posX: 2.5,
  posY: 4.8,
  posZ: 4.3,
  targetX: 2.5,
  targetY: 0,
  targetZ: 3.5,
  projWidth: 1,
  projHeight: 1,
  perspective: true,
-  fieldOfView: 45,
+  fieldOfView: 120,
};
</code></pre>
<p>æ³¨æ„ï¼šæˆ‘æŠŠç»˜åˆ¶è¡¨ç¤ºè§†æ¤ä½“çš„çº¿æ¡†ç«‹æ–¹ä½“çš„ä»£ç ç§»åˆ°äº† <code class="notranslate" translate="no">drawScene</code> å‡½æ•°çš„å¤–é¢ã€‚</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-shadows-depth-texture.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-shadows-depth-texture.html" target="_blank">ç‚¹æ­¤åœ¨æ–°çª—å£ä¸­æµè§ˆ</a>
</div>

</p>
<p>è¿™å’Œä¸Šé¢çš„ä¾‹å­æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œåªä¸è¿‡æˆ‘ä»¬ä¸æ˜¯é€šè¿‡åŠ è½½ä¸€ä¸ªå›¾åƒï¼Œè€Œæ˜¯é€šè¿‡æ¸²æŸ“åœºæ™¯æ¥ç”Ÿæˆä¸€ä¸ªæ·±åº¦çº¹ç†ã€‚å¦‚æœä½ æƒ³è¦éªŒè¯çš„è¯ï¼Œå¯ä»¥æŠŠ <code class="notranslate" translate="no">cameraX</code> æ”¹å› 2.5ï¼ŒæŠŠ <code class="notranslate" translate="no">fieldOfView</code> æ”¹å› 45ï¼Œè¿™æ ·å°±ä¼šå’Œä¸Šé¢ä¾‹å­çœ‹èµ·æ¥ä¸€æ ·äº†ï¼Œé™¤äº†æˆ‘ä»¬æŠ•å½±çš„æ˜¯æ·±åº¦çº¹ç†ï¼Œè€Œä¸æ˜¯åŠ è½½ä¸€ä¸ªå›¾åƒå¤–ã€‚</p>
<p>æ·±åº¦å€¼çš„èŒƒå›´æ˜¯ 0.0 åˆ° 1.0ï¼Œä»£è¡¨å®ƒä»¬åœ¨è§†æ¤ä½“å†…çš„ä½ç½®ï¼Œå› æ­¤ 0.0ï¼ˆæš—ï¼‰è¡¨ç¤ºæ¥è¿‘è§†æ¤ä½“çš„é¡¶ç«¯çš„é‚£ç«¯ï¼Œè€Œ 1.0ï¼ˆäº®ï¼‰åˆ™æ˜¯ä½äºè¾ƒè¿œçš„å¼€å£é‚£ç«¯ã€‚</p>
<p>å› æ­¤ï¼Œå‰©ä¸‹è¦åšçš„å°±æ˜¯ï¼Œæˆ‘ä»¬ä¸åœ¨æŠ•å½±çº¹ç†çš„é¢œè‰²å’Œæ˜ å°„çº¹ç†çš„é¢œè‰²ä¸­åšé€‰æ‹©ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ·±åº¦çº¹ç†ä¸­çš„æ·±åº¦å€¼æ¥æ£€æŸ¥æ·±åº¦çº¹ç†çš„ Z ä½ç½®æ˜¯ç¦»å…‰æºæ›´è¿‘è¿˜æ˜¯æ›´è¿œï¼Œç„¶åå†æ£€æŸ¥è¦ç»˜åˆ¶çš„åƒç´ çš„æ·±åº¦å€¼ã€‚å¦‚æœæ·±åº¦çº¹ç†çš„æ·±åº¦å€¼æ›´å°ï¼Œåˆ™è¡¨æ˜æœ‰æŸç‰©æŒ¡ä½äº†å…‰æºï¼Œè¯¥åƒç´ ä½äºé˜´å½±ä¸­ã€‚</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-glsl">void main() {
  vec3 projectedTexcoord = v_projectedTexcoord.xyz / v_projectedTexcoord.w;
+  float currentDepth = projectedTexcoord.z;

  bool inRange = 
      projectedTexcoord.x &gt;= 0.0 &amp;&amp;
      projectedTexcoord.x &lt;= 1.0 &amp;&amp;
      projectedTexcoord.y &gt;= 0.0 &amp;&amp;
      projectedTexcoord.y &lt;= 1.0;

-  vec4 projectedTexColor = vec4(texture2D(u_projectedTexture, projectedTexcoord.xy).rrr, 1);
+  float projectedDepth = texture2D(u_projectedTexture, projectedTexcoord.xy).r;
+  float shadowLight = (inRange &amp;&amp; projectedDepth &lt;= currentDepth) ? 0.0 : 1.0;  

  vec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;
-  gl_FragColor = mix(texColor, projectedTexColor, projectedAmount);
+  gl_FragColor = vec4(texColor.rgb * shadowLight, texColor.a);
}
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¦‚æœ <code class="notranslate" translate="no">projectedDepth</code> å°äº <code class="notranslate" translate="no">currentDepth</code> ï¼Œåˆ™ä»å…‰æºè§†è§’æ¥çœ‹ï¼Œæœ‰æŸç‰©æ›´åŠ æ¥è¿‘å…‰æºï¼Œæ‰€ä»¥æ­£åœ¨ç»˜åˆ¶çš„åƒç´ ä½äºé˜´å½±ä¸­ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¿è¡Œå®ƒï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸€ä¸ªé˜´å½±</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-shadows-basic.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-shadows-basic.html" target="_blank">ç‚¹æ­¤åœ¨æ–°çª—å£ä¸­æµè§ˆ</a>
</div>

</p>
<p>æœ‰ç‚¹åƒæ ·äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åœ°é¢çœ‹åˆ°çƒä½“çš„é˜´å½±ï¼Œä½†æ˜¯è¿™äº›ä½äºåº”è¯¥æ²¡æœ‰é˜´å½±çš„åœ°æ–¹çš„å¥‡æ€ªå›¾æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿè¿™äº›å›¾æ¡ˆè¢«ç§°ä¸º<em>é˜´å½±ç—¤ç–®ï¼ˆshadow acneï¼‰</em>ã€‚è¿™äº›å›¾æ¡ˆçš„æ¥æºæ˜¯å› ä¸ºå­˜å‚¨åœ¨æ·±åº¦çº¹ç†é‡Œçš„æ·±åº¦æ•°æ®å·²ç»è¢«é‡åŒ–äº†ï¼Œæ·±åº¦æ•°æ®å·²ç»æ˜¯ä¸€ä¸ªçº¹ç†ï¼Œä¸€ä¸ªåƒç´ ç½‘æ ¼äº†ï¼Œå®ƒè¢«ä»å…‰æºè§†è§’ä¸­æŠ•å½±å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä»¬è¦æŠŠå®ƒå’Œç›¸æœºè§†è§’çš„æ·±åº¦å€¼è¿›è¡Œæ¯”è¾ƒã€‚å³æ„å‘³ç€åœ¨è¿™ä¸ªæ·±åº¦çº¹ç†ç½‘æ ¼ä¸­çš„å€¼å’Œæˆ‘ä»¬ç›¸æœºæ²¡æœ‰å¯¹é½ï¼Œå› æ­¤ï¼Œå½“æˆ‘ä»¬è®¡ç®— <code class="notranslate" translate="no">currentDepth</code> æ—¶ï¼Œæœ‰æ—¶ä¼šå‡ºç°æ¯” <code class="notranslate" translate="no">projectedDepth</code> ç¨å¾®å¤§çš„å€¼ï¼Œæœ‰æ—¶ä¼šå‡ºç°ç¨å¾®å°çš„å€¼ã€‚</p>
<p>è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªåå·®å€¼ï¼ˆbiasï¼‰ã€‚</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-glsl">...

+uniform float u_bias;

void main() {
  vec3 projectedTexcoord = v_projectedTexcoord.xyz / v_projectedTexcoord.w;
-  float currentDepth = projectedTexcoord.z;
+  float currentDepth = projectedTexcoord.z + u_bias;

  bool inRange = 
      projectedTexcoord.x &gt;= 0.0 &amp;&amp;
      projectedTexcoord.x &lt;= 1.0 &amp;&amp;
      projectedTexcoord.y &gt;= 0.0 &amp;&amp;
      projectedTexcoord.y &lt;= 1.0;

  float projectedDepth = texture2D(u_projectedTexture, projectedTexcoord.xy).r;
  float shadowLight = (inRange &amp;&amp; projectedDepth &lt;= currentDepth) ? 0.0 : 1.0;  

  vec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;
  gl_FragColor = vec4(texColor.rgb * shadowLight, texColor.a);
}
</code></pre>
<p>è€Œä¸”æˆ‘ä»¬éœ€è¦è®¾ç½®å®ƒ</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">const settings = {
  cameraX: 2.75,
  cameraY: 5,
  posX: 2.5,
  posY: 4.8,
  posZ: 4.3,
  targetX: 2.5,
  targetY: 0,
  targetZ: 3.5,
  projWidth: 1,
  projHeight: 1,
  perspective: true,
  fieldOfView: 120,
+  bias: -0.006,
};

...

function drawScene(projectionMatrix, cameraMatrix, textureMatrix, programInfo, /**/u_lightWorldMatrix) {
  // ä»ç›¸æœºçŸ©é˜µä¸­åˆ›å»ºä¸€ä¸ªè§†å›¾çŸ©é˜µ
  const viewMatrix = m4.inverse(cameraMatrix);

  gl.useProgram(programInfo.program);

  // è®¾ç½®å¯¹äºçƒä½“å’Œå¹³é¢éƒ½æ˜¯ä¸€æ ·çš„ uniforms
  // æ³¨æ„ï¼šåœ¨ç€è‰²å™¨ä¸­ï¼Œä»»ä½•æ²¡æœ‰å¯¹åº” uniform çš„å€¼éƒ½ä¼šè¢«å¿½ç•¥ã€‚
  webglUtils.setUniforms(programInfo, {
    u_view: viewMatrix,
    u_projection: projectionMatrix,
+    u_bias: settings.bias,
    u_textureMatrix: textureMatrix,
    u_projectedTexture: depthTexture,
  });

  ...
</code></pre>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-shadows-basic-w-bias.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-shadows-basic-w-bias.html" target="_blank">ç‚¹æ­¤åœ¨æ–°çª—å£ä¸­æµè§ˆ</a>
</div>

</p>
<p>æ»‘åŠ¨åå·®å€¼ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒå¦‚ä½•å½±å“å›¾æ¡ˆçš„å‡ºç°æ—¶é—´å’Œå‡ºç°åœ°æ–¹ã€‚</p>
<p>ä¸ºäº†æ›´æ¥è¿‘äºå®Œæ•´ï¼Œè®©æˆ‘ä»¬çœŸåœ°æ·»åŠ ä¸€ä¸ªèšå…‰ç¯ï¼Œèšå…‰ç¯çš„è®¡ç®—æ–¹æ³•ä» <a href="webgl-3d-lighting-spot.html">èšå…‰ç¯æ–‡ç« </a> ä¸­æ¥ã€‚</p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç›´æ¥ä» <a href="webgl-3d-lighting-spot.html">é‚£ç¯‡æ–‡ç« </a> ä¸­ç²˜è´´æˆ‘ä»¬éœ€è¦çš„éƒ¨åˆ†åˆ°é¡¶ç‚¹ç€è‰²å™¨ä¸­ã€‚</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-glsl">attribute vec4 a_position;
attribute vec2 a_texcoord;
+attribute vec3 a_normal;

+uniform vec3 u_lightWorldPosition;
+uniform vec3 u_viewWorldPosition;

uniform mat4 u_projection;
uniform mat4 u_view;
uniform mat4 u_world;
uniform mat4 u_textureMatrix;

varying vec2 v_texcoord;
varying vec4 v_projectedTexcoord;
+varying vec3 v_normal;

+varying vec3 v_surfaceToLight;
+varying vec3 v_surfaceToView;

void main() {
  // å°†åæ ‡ä¹˜ä»¥çŸ©é˜µ
  vec4 worldPosition = u_world * a_position;

  gl_Position = u_projection * u_view * worldPosition;

  // å°†çº¹ç†åæ ‡ä¼ ç»™ç‰‡æ®µç€è‰²å™¨
  v_texcoord = a_texcoord;

  v_projectedTexcoord = u_textureMatrix * worldPosition;

+  // è°ƒæ•´æ³•çº¿æ–¹ä½å¹¶ä¼ ç»™ç‰‡æ®µç€è‰²å™¨
+  v_normal = mat3(u_world) * a_normal;
+
+  // è®¡ç®—ç‰©ä½“è¡¨é¢çš„ä¸–ç•Œåæ ‡
+  vec3 surfaceWorldPosition = (u_world * a_position).xyz;
+
+  // è®¡ç®—ç‰©ä½“è¡¨é¢æŒ‡å‘å…‰æºçš„å‘é‡
+  // ç„¶åå°†å®ƒä¼ ç»™ç‰‡æ®µç€è‰²å™¨
+  v_surfaceToLight = u_lightWorldPosition - surfaceWorldPosition;
+
+  // è®¡ç®—ç‰©ä½“è¡¨é¢æŒ‡å‘ç›¸æœºçš„å‘é‡
+  // ç„¶åå°†å®ƒä¼ ç»™ç‰‡æ®µç€è‰²å™¨
+  v_surfaceToView = u_viewWorldPosition - surfaceWorldPosition;
}
</code></pre>
<p>æ¥ç€æ˜¯ç‰‡æ®µç€è‰²å™¨</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-glsl">precision mediump float;

// ä»é¡¶ç‚¹ç€è‰²å™¨ä¸­ä¼ å…¥
varying vec2 v_texcoord;
varying vec4 v_projectedTexcoord;
+varying vec3 v_normal;
+varying vec3 v_surfaceToLight;
+varying vec3 v_surfaceToView;

uniform vec4 u_colorMult;
uniform sampler2D u_texture;
uniform sampler2D u_projectedTexture;
uniform float u_bias;
+uniform float u_shininess;
+uniform vec3 u_lightDirection;
+uniform float u_innerLimit;          // in dot space
+uniform float u_outerLimit;          // in dot space

void main() {
+  // å› ä¸º v_normal æ˜¯ä¸€ä¸ª varyingï¼Œå®ƒå·²ç»è¢«æ’å€¼äº†
+  // æ‰€ä»¥å®ƒä¸ä¼šæ˜¯ä¸€ä¸ªå•ä½å‘é‡ã€‚å¯¹å®ƒè¿›è¡Œå½’ä¸€åŒ–
+  // ä½¿å…¶å†æ¬¡æˆä¸ºå•ä½å‘é‡
+  vec3 normal = normalize(v_normal);
+
+  vec3 surfaceToLightDirection = normalize(v_surfaceToLight);
+  vec3 surfaceToViewDirection = normalize(v_surfaceToView);
+  vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);
+
+  float dotFromDirection = dot(surfaceToLightDirection,
+                               -u_lightDirection);
+  float limitRange = u_innerLimit - u_outerLimit;
+  float inLight = clamp((dotFromDirection - u_outerLimit) / limitRange, 0.0, 1.0);
+  float light = inLight * dot(normal, surfaceToLightDirection);
+  float specular = inLight * pow(dot(normal, halfVector), u_shininess);

  vec3 projectedTexcoord = v_projectedTexcoord.xyz / v_projectedTexcoord.w;
  float currentDepth = projectedTexcoord.z + u_bias;

  bool inRange =
      projectedTexcoord.x &gt;= 0.0 &amp;&amp;
      projectedTexcoord.x &lt;= 1.0 &amp;&amp;
      projectedTexcoord.y &gt;= 0.0 &amp;&amp;
      projectedTexcoord.y &lt;= 1.0;

  // &#39;r&#39; é€šé“å†…åŒ…å«æ·±åº¦å€¼
  float projectedDepth = texture2D(u_projectedTexture, projectedTexcoord.xy).r;
  float shadowLight = (inRange &amp;&amp; projectedDepth &lt;= currentDepth) ? 0.0 : 1.0;

  vec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;
-  gl_FragColor = vec4(texColor.rgb * shadowLight, texColor.a);
+  gl_FragColor = vec4(
+      texColor.rgb * light * shadowLight +
+      specular * shadowLight,
+      texColor.a);
}
</code></pre>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ <code class="notranslate" translate="no">shadowLight</code> æ¥è°ƒæ•´ <code class="notranslate" translate="no">light</code> å’Œ <code class="notranslate" translate="no">specular</code> çš„æ•ˆæœã€‚å¦‚æœä¸€ä¸ªç‰©ä½“ä½äºé˜´å½±å†…ï¼Œåˆ™æ²¡æœ‰å…‰ã€‚</p>
<p>ç„¶åæˆ‘ä»¬è¿˜éœ€è¦è®¾ç½®å¥½ uniforms</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">-function drawScene(projectionMatrix, cameraMatrix, textureMatrix, programInfo) {
+function drawScene(
+    projectionMatrix,
+    cameraMatrix,
+    textureMatrix,
+    lightWorldMatrix,
+    programInfo) {
  // ä»ç›¸æœºçŸ©é˜µä¸­åˆ›å»ºä¸€ä¸ªè§†å›¾çŸ©é˜µ
  const viewMatrix = m4.inverse(cameraMatrix);

  gl.useProgram(programInfo.program);

  // è®¾ç½®å¯¹äºçƒä½“å’Œå¹³é¢éƒ½æ˜¯ä¸€æ ·çš„ uniforms
  // æ³¨æ„ï¼šåœ¨ç€è‰²å™¨ä¸­ï¼Œä»»ä½•æ²¡æœ‰å¯¹åº” uniform çš„å€¼éƒ½ä¼šè¢«å¿½ç•¥ã€‚  
  webglUtils.setUniforms(programInfo, {
    u_view: viewMatrix,
    u_projection: projectionMatrix,
    u_bias: settings.bias,
    u_textureMatrix: textureMatrix,
    u_projectedTexture: depthTexture,
+    u_shininess: 150,
+    u_innerLimit: Math.cos(degToRad(settings.fieldOfView / 2 - 10)),
+    u_outerLimit: Math.cos(degToRad(settings.fieldOfView / 2)),
+    u_lightDirection: lightWorldMatrix.slice(8, 11).map(v =&gt; -v),
+    u_lightWorldPosition: lightWorldMatrix.slice(12, 15),
+    u_viewWorldPosition: cameraMatrix.slice(12, 15),
  });

...

function render() {
  ...

-  drawScene(lightProjectionMatrix, lightWorldMatrix, m4.identity(), colorProgramInfo);
+  drawScene(
+      lightProjectionMatrix,
+      lightWorldMatrix,
+      m4.identity(),
+      lightWorldMatrix,
+      colorProgramInfo);

  ...

-  drawScene(projectionMatrix, cameraMatrix, textureMatrix, textureProgramInfo);
+  drawScene(
+      projectionMatrix,
+      cameraMatrix,
+      textureMatrix,
+      lightWorldMatrix,
+      textureProgramInfo);

  ...
}
</code></pre>
<p>ä»‹ç»ä¸€ä¸‹å…¶ä¸­ä¸€äº› uniform è®¾ç½®ã€‚å›æƒ³ä¸€ä¸‹ <a href="webgl-3d-lighting-spot.html">èšå…‰ç¯æ–‡ç« </a> çš„ innerLimit å’Œ outerLimit è®¾ç½®éƒ½æ˜¯åœ¨ç‚¹ä¹˜ç©ºé—´ï¼ˆä½™å¼¦ç©ºé—´ï¼‰å†…çš„ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦ä¸€åŠçš„è§†åœºè§’ï¼Œå› ä¸ºå®ƒä»¬ä¼šç»•ç€å…‰æºçš„æ–¹å‘è¿›è¡Œå»¶ä¼¸ã€‚å†å›æƒ³ä¸€ä¸‹ <a href="webgl-3d-camera.html">ç›¸æœºæ–‡ç« </a> ä¸­ 4x4 çŸ©é˜µçš„ç¬¬ 3 è¡Œæ˜¯ Z è½´ï¼Œæ‰€ä»¥æˆ‘ä»¬ä» <code class="notranslate" translate="no">lightWorldMatrix</code> çš„ç¬¬ 3 è¡Œä¸­æ‹‰å–å‰ 3 ä¸ªå€¼ï¼Œå°±ä¼šå¾—åˆ°å…‰æºçš„ -Z æ–¹å‘ã€‚æˆ‘ä»¬æƒ³è¦çš„æ˜¯ +Z æ–¹å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œç¿»è½¬ã€‚ç±»ä¼¼åœ°ï¼Œç›¸æœºæ–‡ç« è¿˜å‘Šè¯‰äº†æˆ‘ä»¬ï¼Œç¬¬ 4 è¡Œæ˜¯ä¸–ç•Œåæ ‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»å¯¹åº”çŸ©é˜µä¸­æŠŠå®ƒä»¬æ‹‰å–å‡ºæ¥å¾—åˆ° lightWorldPosition å’Œ viewWorldPositionï¼ˆå³ç›¸æœºçš„ä¸–ç•Œåæ ‡ï¼‰ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æš´éœ²æ›´å¤šçš„è®¾ç½®æˆ–è€…ä¼ å…¥æ›´å¤šçš„å˜é‡æ¥å¾—åˆ°å®ƒä»¬ã€‚</p>
<p>è®©æˆ‘ä»¬æŠŠèƒŒæ™¯æ¸…é™¤ä¸ºé»‘è‰²ï¼Œå¹¶è®¾ç½®è§†æ¤ä½“çº¿æ¡†ä¸ºç™½è‰²</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">function render() {

  ...

  // ç°åœ¨ç»˜åˆ¶åœºæ™¯åˆ°ç”»å¸ƒï¼Œå¹¶æŠ•å½±æ·±åº¦çº¹ç†åˆ°åœºæ™¯
  gl.bindFramebuffer(gl.FRAMEBUFFER, null);
  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
+  gl.clearColor(0, 0, 0, 1);
  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

  ...

  // ------ ç»˜åˆ¶è§†æ¤ä½“ ------
  {

    ...

          // è®¾ç½®æˆ‘ä»¬åˆšåˆšè®¡ç®—çš„ uniforms
    webglUtils.setUniforms(colorProgramInfo, {
-      u_color: [0, 0, 0, 1],
+      u_color: [1, 1, 1, 1],
      u_view: viewMatrix,
      u_projection: projectionMatrix,
      u_world: mat,
    });
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¸¦é˜´å½±çš„èšå…‰ç¯ã€‚</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-shadows-w-spot-light.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-shadows-w-spot-light.html" target="_blank">ç‚¹æ­¤åœ¨æ–°çª—å£ä¸­æµè§ˆ</a>
</div>

</p>
<p>å¯¹äºæ–¹å‘å…‰æºï¼Œæˆ‘ä»¬å¯ä»¥ä» <a href="webgl-3d-lighting-directional.html">æ–¹å‘å…‰æºæ–‡ç« </a> ä¸­æ‹·è´å®ƒçš„ç€è‰²å™¨ï¼Œç„¶åå°†æˆ‘ä»¬çš„æŠ•å½±ä»é€è§†çš„æ”¹ä¸ºæ­£å°„çš„å³å¯ã€‚</p>
<p>é¦–å…ˆæ˜¯é¡¶ç‚¹ç€è‰²å™¨</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-glsl">attribute vec4 a_position;
attribute vec2 a_texcoord;
+attribute vec3 a_normal;

-uniform vec3 u_lightWorldPosition;
-uniform vec3 u_viewWorldPosition;

uniform mat4 u_projection;
uniform mat4 u_view;
uniform mat4 u_world;
uniform mat4 u_textureMatrix;

varying vec2 v_texcoord;
varying vec4 v_projectedTexcoord;
varying vec3 v_normal;

-varying vec3 v_surfaceToLight;
-varying vec3 v_surfaceToView;

void main() {
  // å°†åæ ‡ä¹˜ä»¥çŸ©é˜µ
  vec4 worldPosition = u_world * a_position;

  gl_Position = u_projection * u_view * worldPosition;

  // å°†çº¹ç†åæ ‡ä¼ ç»™ç‰‡æ®µç€è‰²å™¨
  v_texcoord = a_texcoord;

  v_projectedTexcoord = u_textureMatrix * worldPosition;

  // è°ƒæ•´æ³•çº¿æ–¹ä½å¹¶ä¼ ç»™ç‰‡æ®µç€è‰²å™¨
  v_normal = mat3(u_world) * a_normal;

-  // è®¡ç®—ç‰©ä½“è¡¨é¢çš„ä¸–ç•Œåæ ‡
-  vec3 surfaceWorldPosition = (u_world * a_position).xyz;
-
-  // è®¡ç®—ç‰©ä½“è¡¨é¢æŒ‡å‘å…‰æºçš„å‘é‡
-  // ç„¶åå°†å®ƒä¼ ç»™ç‰‡æ®µç€è‰²å™¨
-  v_surfaceToLight = u_lightWorldPosition - surfaceWorldPosition;
-
-  // è®¡ç®—ç‰©ä½“è¡¨é¢æŒ‡å‘ç›¸æœºçš„å‘é‡
-  // ç„¶åå°†å®ƒä¼ ç»™ç‰‡æ®µç€è‰²å™¨
-  v_surfaceToView = u_viewWorldPosition - surfaceWorldPosition;
}
</code></pre>
<p>æ¥ç€æ˜¯ç‰‡æ®µç€è‰²å™¨</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-glsl">precision mediump float;

// ä»é¡¶ç‚¹ç€è‰²å™¨ä¸­ä¼ å…¥
varying vec2 v_texcoord;
varying vec4 v_projectedTexcoord;
varying vec3 v_normal;
-varying vec3 v_surfaceToLight;
-varying vec3 v_surfaceToView;

uniform vec4 u_colorMult;
uniform sampler2D u_texture;
uniform sampler2D u_projectedTexture;
uniform float u_bias;
-uniform float u_shininess;
-uniform vec3 u_lightDirection;
-uniform float u_innerLimit;          // in dot space
-uniform float u_outerLimit;          // in dot space
+uniform vec3 u_reverseLightDirection;

void main() {
  // å› ä¸º v_normal æ˜¯ä¸€ä¸ª varyingï¼Œå®ƒå·²ç»è¢«æ’å€¼äº†
  // æ‰€ä»¥å®ƒä¸ä¼šæ˜¯ä¸€ä¸ªå•ä½å‘é‡ã€‚å¯¹å®ƒè¿›è¡Œå½’ä¸€åŒ–
  // ä½¿å…¶å†æ¬¡æˆä¸ºå•ä½å‘é‡
  vec3 normal = normalize(v_normal);

+  float light = dot(normal, u_reverseLightDirection);

-  vec3 surfaceToLightDirection = normalize(v_surfaceToLight);
-  vec3 surfaceToViewDirection = normalize(v_surfaceToView);
-  vec3 halfVector = normalize(surfaceToLightDirection + surfaceToViewDirection);
-
-  float dotFromDirection = dot(surfaceToLightDirection,
-                               -u_lightDirection);
-  float limitRange = u_innerLimit - u_outerLimit;
-  float inLight = clamp((dotFromDirection - u_outerLimit) / limitRange, 0.0, 1.0);
-  float light = inLight * dot(normal, surfaceToLightDirection);
-  float specular = inLight * pow(dot(normal, halfVector), u_shininess);

  vec3 projectedTexcoord = v_projectedTexcoord.xyz / v_projectedTexcoord.w;
  float currentDepth = projectedTexcoord.z + u_bias;

  bool inRange =
      projectedTexcoord.x &gt;= 0.0 &amp;&amp;
      projectedTexcoord.x &lt;= 1.0 &amp;&amp;
      projectedTexcoord.y &gt;= 0.0 &amp;&amp;
      projectedTexcoord.y &lt;= 1.0;

  // &#39;r&#39; é€šé“å†…åŒ…å«æ·±åº¦å€¼
  float projectedDepth = texture2D(u_projectedTexture, projectedTexcoord.xy).r;
  float shadowLight = (inRange &amp;&amp; projectedDepth &lt;= currentDepth) ? 0.0 : 1.0;

  vec4 texColor = texture2D(u_texture, v_texcoord) * u_colorMult;
  gl_FragColor = vec4(
-      texColor.rgb * light * shadowLight +
-      specular * shadowLight,
+      texColor.rgb * light * shadowLight,
      texColor.a);
}
</code></pre>
<p>å’Œ uniforms</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">  // è®¾ç½®å¯¹äºçƒä½“å’Œå¹³é¢éƒ½æ˜¯ä¸€æ ·çš„ uniforms
  // æ³¨æ„ï¼šåœ¨ç€è‰²å™¨ä¸­ï¼Œä»»ä½•æ²¡æœ‰å¯¹åº” uniform çš„å€¼éƒ½ä¼šè¢«å¿½ç•¥ã€‚
  webglUtils.setUniforms(programInfo, {
    u_view: viewMatrix,
    u_projection: projectionMatrix,
    u_bias: settings.bias,
    u_textureMatrix: textureMatrix,
    u_projectedTexture: depthTexture,
-    u_shininess: 150,
-    u_innerLimit: Math.cos(degToRad(settings.fieldOfView / 2 - 10)),
-    u_outerLimit: Math.cos(degToRad(settings.fieldOfView / 2)),
-    u_lightDirection: lightWorldMatrix.slice(8, 11).map(v =&gt; -v),
-    u_lightWorldPosition: lightWorldMatrix.slice(12, 15),
-    u_viewWorldPosition: cameraMatrix.slice(12, 15),
+    u_reverseLightDirection: lightWorldMatrix.slice(8, 11),
  });
</code></pre>
<p>æˆ‘è°ƒæ•´äº†ç›¸æœºä½ç½®ä»¥ä¾¿çœ‹åˆ°æ›´å¤§çš„åœºæ™¯ã€‚</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-shadows-w-directional-light.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-shadows-w-directional-light.html" target="_blank">ç‚¹æ­¤åœ¨æ–°çª—å£ä¸­æµè§ˆ</a>
</div>

</p>
<p>ä»ä¸Šé¢çš„ä»£ç ä¸­åº”è¯¥å¯ä»¥çœ‹å‡ºæŸä¸ªé—®é¢˜ï¼Œå³æˆ‘ä»¬çš„é˜´å½±æ˜ å°„åˆ†è¾¨ç‡åªæœ‰é‚£ä¹ˆå¤§ï¼Œæ‰€ä»¥å³ä½¿è®¡ç®—æ–¹å‘å…‰æºåªéœ€è¦ä¸€ä¸ªæ–¹å‘ï¼Œä¸éœ€è¦å…‰æºæœ¬èº«çš„ä½ç½®ï¼Œä½†ä¸ºäº†èƒ½å¤Ÿå†³å®šå“ªå—åŒºåŸŸéœ€è¦è®¡ç®—å¹¶åº”ç”¨é˜´å½±æ˜ å°„ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦é€‰æ‹©ä¸€ä¸ªå…‰æºä½ç½®ã€‚</p>
<p>æœ¬æ–‡è¶Šæ¥è¶Šé•¿äº†ï¼Œä½†è¿˜æœ‰å¾ˆå¤šå’Œé˜´å½±ç›¸å…³çš„ä¸œè¥¿æ²¡æœ‰è®²ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå‰©ä¸‹çš„ç•™åˆ° <a href="webgl-shadows-continued.html">ä¸‹ä¸€ç¯‡æ–‡ç« </a>ã€‚</p>
<div class="webgl_bottombar">
<a id="attachment-combinations"></a>
<h3>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åˆ›å»ºä¸€ä¸ªä¸ä¼šä½¿ç”¨çš„é¢œè‰²çº¹ç†ï¼Ÿ</h3>
<p>ä¸‹é¢æˆ‘ä»¬è¿›å…¥åˆ° WebGL è§„èŒƒçš„ç»†èŠ‚ä¸­ã€‚</p>
<p>WebGL æ˜¯åŸºäº OpenGL ES 2.0 çš„ï¼Œè€Œ <a href="https://www.khronos.org/registry/webgl/specs/latest/1.0/">WebGL è§„èŒƒ</a>
åŸºæœ¬ä¸Šè¯´ WebGL éµå¾ª OpenGL ES 2.0 è§„èŒƒï¼Œé™¤äº† WebGL è§„èŒƒä¸­åˆ—å‡ºçš„ä¾‹å¤–ã€‚</p>
<p>å½“ä½ åˆ›å»ºä¸€ä¸ªå¸§ç¼“å†²æ—¶ï¼Œä½ å°±ä¼šæ·»åŠ  attachmentsã€‚ä½ å¯ä»¥æ·»åŠ æ‰€æœ‰ç±»å‹çš„ attachmentsã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª RGBA/UNSIGNED_BYTE çº¹ç† color attachment å’Œä¸€ä¸ªæ·±åº¦çº¹ç† attachmentã€‚åœ¨æ¸²æŸ“åˆ°çº¹ç†æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é™„åŠ äº†ä¸€ä¸ªç±»ä¼¼çš„ color attachmentï¼Œä½†æˆ‘ä»¬é™„åŠ çš„å¦ä¸€ä¸ª attachment æ˜¯ä¸€ä¸ªæ·±åº¦æ¸²æŸ“ç¼“å†²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ·±åº¦çº¹ç†ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é™„åŠ ä¸€ä¸ª RGB çº¹ç†ï¼Œä¸€ä¸ª LUMINANCE çº¹ç†ï¼Œå’Œè®¸å¤šå…¶ä»–ç±»å‹çš„çº¹ç†å’Œæ¸²æŸ“ç¼“å†²ã€‚</p>
<p><a href="">OpenGL ES 2.0 è§„èŒƒ</a> ç»™å‡ºäº†ä¸€å †å…³äºæŸä¸ª attachments ç»„åˆæ˜¯å¦å¯ä»¥ä¸€èµ·å·¥ä½œçš„è§„åˆ™ã€‚å…¶ä¸­ä¸€ä¸ªè§„åˆ™æ˜¯è‡³å°‘æœ‰ä¸€ä¸ª attachmentã€‚å¦ä¸€ä¸ªè§„åˆ™æ˜¯å®ƒä»¬å¿…é¡»å…·æœ‰ç›¸åŒçš„å°ºå¯¸ã€‚æœ€åçš„è§„åˆ™æ˜¯</p>
<blockquote>
<h4>4.4.5 Framebuffer Completeness</h4>
<p>
The combination of internal formats of the attached images does not violate an <b>implementation-dependent</b> set of restrictions.
</p>
</blockquote>
<p>
è¿™ä¸ªä¸å¹¸çš„æªè¾æ„å‘³ç€<b>å³ä½¿æ²¡æœ‰ attachments ç»„åˆä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼</b>
</p>
<p>
WebGL å§”å‘˜ä¼šçœ‹åˆ°äº†è¿™ä¸€ç‚¹å¹¶å†³å®šè¦æ±‚ WebGL å®ç°è‡³å°‘æ”¯æŒ 3 ç§å¸¸è§ç»„åˆã€‚ä» <a href="https://www.khronos.org/registry/webgl/specs/latest/1.0/#6.8">WebGL è§„èŒƒçš„ç¬¬ 6.8 èŠ‚</a> æ¥çœ‹ï¼Œè¿™äº›ç»„åˆæ˜¯ï¼š
<blockquote>
<ul>
  <li><code class="notranslate" translate="no">COLOR_ATTACHMENT0</code> = <code class="notranslate" translate="no">RGBA</code>/<code class="notranslate" translate="no">UNSIGNED_BYTE</code> texture</li>
  <li><code class="notranslate" translate="no">COLOR_ATTACHMENT0</code> = <code class="notranslate" translate="no">RGBA</code>/<code class="notranslate" translate="no">UNSIGNED_BYTE</code> texture + <code class="notranslate" translate="no">DEPTH_ATTACHMENT</code> = <code class="notranslate" translate="no">DEPTH_COMPONENT16</code> renderbuffer</li>
  <li><code class="notranslate" translate="no">COLOR_ATTACHMENT0</code> = <code class="notranslate" translate="no">RGBA</code>/<code class="notranslate" translate="no">UNSIGNED_BYTE</code> texture + <code class="notranslate" translate="no">DEPTH_STENCIL_ATTACHMENT</code> = <code class="notranslate" translate="no">DEPTH_STENCIL</code> renderbuffer</li>
</blockquote>
<p>
åæ¥ <a href="https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/">WEBGL_depth_texture</a> æ‰©å±•è¢«åˆ›å»ºã€‚
è¯¥æ‰©å±•çœŸæ­£è¯´çš„æ˜¯ï¼Œä½ å¯ä»¥åˆ›å»ºæ·±åº¦çº¹ç†ï¼Œä½ ä¹Ÿå¯ä»¥é™„åŠ å®ƒä»¬åˆ°å¸§ç¼“å†²ä¸­ï¼Œä½†è¯¥æ‰©å±•æ²¡æœ‰è¯´æ›´å¤šå…³äºæ‰€éœ€ç»„åˆçš„å†…å®¹ã€‚æ‰€ä»¥ï¼Œè€ƒè™‘åˆ° OpenGL ES 2.0 è§„èŒƒçš„è§„åˆ™è¯´ï¼Œä»€ä¹ˆæ ·çš„ç»„åˆå¯ä»¥æ­£å¸¸å·¥ä½œæ˜¯ç”±å…·ä½“çš„å®ç°å†³å®šçš„ï¼Œè€ƒè™‘åˆ° WebGL è§„èŒƒåªåˆ—å‡ºäº† 3 ç§å¿…é¡»æ­£å¸¸å·¥ä½œçš„ç»„åˆï¼Œè€Œè¿™ 3 ç§ç»„åˆéƒ½ä¸åŒ…å«æ·±åº¦çº¹ç†ï¼Œåªæœ‰æ·±åº¦æ¸²æŸ“ç¼“å†²ï¼Œè¿™æ„å‘³ç€å¹¶ä¸ä¿è¯ä½¿ç”¨æ·±åº¦çº¹ç†æ€»æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œè‡³å°‘æ ¹æ®è§„èŒƒæ˜¯è¿™æ ·çš„ã€‚
</p>
<p>
å®é™…ä¸Šï¼Œä¼¼ä¹å¤§å¤šæ•°é©±åŠ¨æœ¬èº«å¯ä»¥åœ¨åªé™„åŠ æ·±åº¦çº¹ç†çš„æƒ…å†µä¸‹æ­£å¸¸å·¥ä½œã€‚ä¸å¹¸çš„æ˜¯ï¼Œè‡³å°‘åœ¨ 2020 å¹´äºŒæœˆä¹‹å‰ï¼ŒSafari ä¸å…è®¸è¿™ç§ç»„åˆå¯ä»¥æ­£å¸¸å·¥ä½œã€‚å®ƒè¦æ±‚å¿…é¡»è¿˜è¦æœ‰ä¸€ä¸ª color attachmentï¼Œå¾ˆæœ‰å¯èƒ½éœ€è¦ä¸€ä¸ª <code class="notranslate" translate="no">RGBA</code>/<code class="notranslate" translate="no">UNSIGNED_BYTE</code> color attachmentã€‚å®é™…ä¸Šï¼Œæ²¡æœ‰ color attachment ä¼šå¤±è´¥ä¹Ÿæ˜¯ç¬¦åˆä¸Šé¢çš„ WebGL è§„èŒƒçš„ã€‚
</p>
<p>
æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬éœ€è¦æœªä½¿ç”¨çš„é¢œè‰²çº¹ç†æ‰èƒ½åœ¨ Safari ä¸­æ­£å¸¸å·¥ä½œã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™æ ·ä¹Ÿä»ç„¶ä¸èƒ½ä¿è¯è¿™ç§ç»„åˆå¯ä»¥åœ¨æ‰€æœ‰çš„é©±åŠ¨/gpus/æµè§ˆå™¨ä¸­æ­£å¸¸å·¥ä½œã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™ç§ç»„åˆçœ‹èµ·æ¥åœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚åŒæ ·å¹¸è¿çš„æ˜¯ï¼Œ<a href="https://webgl2fundamentals.org">WebGL2</a> æ‰€åŸºäºçš„ OpenGL ES 3.0 ä¿®æ”¹äº†è§„èŒƒï¼Œè¦æ±‚æ›´å¤šçš„ç»„åˆä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆªæ­¢ 2020 å¹´äºŒæœˆï¼Œ<a href="https://webgl2fundamentals.org/webgl/lessons/webgl-getting-webgl2.html">Safari è¿˜ä¸æ”¯æŒ WebGL2</a>ã€‚æ‰€ä»¥ï¼Œåœ¨ WebGL1 ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æœªä½¿ç”¨çš„é¢œè‰²çº¹ç†ï¼Œç„¶åç¥ˆç¥·å®ƒå¯ä»¥æ­£å¸¸å·¥ä½œã€‚ğŸ˜­
</p>
</div>
    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-shadows.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-shadows.html" >FranÃ§ais</a>
    <option value="/webgl/lessons/ja/webgl-shadows.html" >æ—¥æœ¬èª</a>
    <option value="/webgl/lessons/ko/webgl-shadows.html" >í•œêµ­ì–´</a>
    <option value="/webgl/lessons/pl/webgl-shadows.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-shadows.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-shadows.html" >Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
    <option value="/webgl/lessons/zh_cn/webgl-shadows.html" selected>ç®€ä½“ä¸­æ–‡</a>
</select>


        <div id="toc">
          <ul>  <li>åŸºç¡€æ¦‚å¿µ</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-fundamentals.html">WebGL åŸºç¡€æ¦‚å¿µ</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-how-it-works.html">WebGL å·¥ä½œåŸç†</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html">WebGL ç€è‰²å™¨å’ŒGLSL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL State Diagram</a></li>
        </ul>
  <li>å›¾åƒå¤„ç†</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-image-processing.html">WebGL å›¾åƒå¤„ç†</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-image-processing-continued.html">WebGL è¿›ä¸€æ­¥å¤„ç†å›¾åƒ</a></li>
        </ul>
  <li>äºŒç»´å¹³ç§»ï¼Œæ—‹è½¬ï¼Œç¼©æ”¾å’ŒçŸ©é˜µè¿ç®—</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-2d-translation.html">WebGL äºŒç»´å¹³ç§»</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-rotation.html">WebGL äºŒç»´æ—‹è½¬</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-scale.html">WebGL äºŒç»´ç¼©æ”¾</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-matrices.html">WebGL äºŒç»´çŸ©é˜µ</a></li>
        </ul>
  <li>ä¸‰ç»´</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-orthographic.html">WebGL ä¸‰ç»´æ­£å°„æŠ•å½±</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-perspective.html">WebGL ä¸‰ç»´é€è§†æŠ•å½±</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-camera.html">WebGL ä¸‰ç»´ç›¸æœº</a></li>
        </ul>
  <li>å…‰ç…§</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-lighting-directional.html">WebGL ä¸‰ç»´æ–¹å‘å…‰æº</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-lighting-point.html">WebGL ä¸‰ç»´ç‚¹å…‰æº</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-lighting-spot.html">WebGL ä¸‰ç»´èšå…‰ç¯</a></li>
        </ul>
  <li>ç»„ç»‡å’Œé‡æ„</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-less-code-more-fun.html">WebGL ç å°‘è¶£å¤š</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-drawing-multiple-things.html">WebGL ç»˜åˆ¶å¤šä¸ªç‰©ä½“</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-scene-graph.html">WebGL åœºæ™¯å›¾</a></li>
        </ul>
  <li>å‡ ä½•</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-geometry-lathe.html">WebGL ä¸‰ç»´å‡ ä½•åŠ å·¥</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-load-obj.html">WebGL åŠ è½½ .obj æ–‡ä»¶</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-load-obj-w-mtl.html">WebGL åŠ è½½å¸¦ .mtl çš„ .obj æ–‡ä»¶</a></li>
        </ul>
  <li>çº¹ç†</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-textures.html">WebGL ä¸‰ç»´çº¹ç†</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-data-textures.html">WebGL æ•°æ®çº¹ç†</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2-textures.html">WebGL ä½¿ç”¨å¤šä¸ªçº¹ç†</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-cors-permission.html">WebGL è·¨åŸŸå›¾åƒ</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-perspective-correct-texturemapping.html">WebGL çº¹ç†æ˜ å°„çš„é€è§†çº æ­£</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-planar-projection-mapping.html">å¹³é¢çš„å’Œé€è§†çš„æŠ•å½±æ˜ å°„</a></li>
        </ul>
  <li>æ¸²æŸ“åˆ°çº¹ç†</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-render-to-texture.html">WebGL æ¸²æŸ“åˆ°çº¹ç†</a></li>
        </ul>
  <li>Shadows</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-shadows.html">é˜´å½±</a></li>
        </ul>
  <li>æŠ€æœ¯</li>
        <ul>
            <li>äºŒç»´</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-2d-drawimage.html">WebGL äºŒç»´DrawImage</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-matrix-stack.html">WebGL äºŒç»´çŸ©é˜µæ ˆ</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-sprites.html">ç²¾çµ</a></li>
        </ul>
  <li>ä¸‰ç»´</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-cube-maps.html">WebGL ç«‹æ–¹ä½“è´´å›¾</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-environment-maps.html">WebGL ç¯å¢ƒè´´å›¾</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-skybox.html">WebGL å¤©ç©ºç›’</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-skinning.html">WebGL è’™çš®</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-fog.html">WebGL é›¾</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-picking.html">Picking (clicking on stuff)</a></li>
        </ul>
  <li>æ–‡å­—</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-text-html.html">WebGL æ–‡å­— - HTML</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-text-canvas2d.html">WebGL æ–‡å­— - äºŒç»´Canvas</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-text-texture.html">WebGL æ–‡å­— - ä½¿ç”¨çº¹ç†</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-text-glyphs.html">WebGL æ–‡å­— - ä½¿ç”¨å­—å½¢çº¹ç†</a></li>
        </ul>
  <li>çº¹ç†</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-ramp-textures.html">Ramp Textures (Toon Shading)</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>Tips</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-smallest-programs.html">WebGL æœ€å°çš„ç¨‹åº</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-drawing-without-data.html">Drawing Without Data</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-pulling-vertices.html">Pulling Vertices</a></li>
        </ul>
  <li>Optimization</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-indexed-vertices.html">é¡¶ç‚¹ç´¢å¼• ï¼ˆgl.drawElements)</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-instanced-drawing.html">å®ä¾‹åŒ–ç»˜åˆ¶</a></li>
        </ul>
  <li>æ‚é¡¹</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-setup-and-installation.html">WebGL è®¾ç½®å’Œå®‰è£…</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-boilerplate.html">WebGL æ ·æ¿</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-resizing-the-canvas.html">WebGL é‡ç½®ç”»å¸ƒå°ºå¯¸</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-animation.html">WebGL åŠ¨ç”»</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-points-lines-triangles.html">WebGL ç‚¹ã€çº¿å’Œä¸‰è§’</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-multiple-views.html">Multiple Views, Multiple Canvases</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-visualizing-the-camera.html">å¯è§†åŒ–ç›¸æœº</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-and-alpha.html">WebGL å’Œé˜¿å°”æ³•é€šé“</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-vs-3d-library.html">WebGL 2D vs 3D åº“</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-anti-patterns.html">WebGL é”™è¯¯æ¨¡å¼</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-matrix-vs-math.html">WebGL çŸ©é˜µ vs æ•°å­¦ä¸­çš„çŸ©é˜µ</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-precision-issues.html">Precision Issues</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#screenshot">æˆªå±</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#preservedrawingbuffer">é˜²æ­¢ç”»å¸ƒè¢«æ¸…ç©º</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#tabindex">åœ¨ç”»å¸ƒä¸­è·å–é”®ç›˜è¾“å…¥</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#html-background">å°† WebGL ä½œä¸º HTML çš„èƒŒæ™¯</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-cross-platform-issues.html">WebGL è·¨å¹³å°ç›¸å…³é—®é¢˜</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-qna.html">Questions and Answers</a></li>
        </ul>
  <li>Reference</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-attributes.html">WebGL å±æ€§</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-texture-units.html">WebGL çº¹ç†å•å…ƒ</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-framebuffers.html">WebGL å¸§ç¼“å†²</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-readpixels.html">WebGL readPixels</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-references.html">WebGL å‚è€ƒ</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">API å¸®åŠ©æ–‡æ¡£</a></li>
  <li><a href="https://twgljs.org">TWGL, ä¸€ä¸ªè½»é‡çº§WebGLè¾…åŠ©åº“</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl-fundamentals">GitHub</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        <div>æœ‰æ„è§æˆ–å»ºè®®? <a href="https://github.com/vinci-mz/webgl-fundamentals/issues">åœ¨GitHubä¸Šæissue</a>ã€‚</div>

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL é˜´å½±';
            var disqus_title = 'WebGL é˜´å½±';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
  owner: "gfxfundamentals",
  repo: "webgl-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
(function() {
  if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
      return;
  }

  function addScript(src, fn) {
    const script = document.createElement('script');
    const firstScript = document.getElementsByTagName('script')[0];
    script.async = true;
    script.defer = true;
    if (fn) {
      script.addEventListener('load', fn);
    }
    script.src = src;
    firstScript.parentNode.insertBefore(script, firstScript);
  }

  addScript('//cdn.webglstats.com/stat.js');

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59804936-1', 'auto');
  ga('send', 'pageview');
}());
</script>


</html>



